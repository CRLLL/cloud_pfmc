(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e15e39d","chunk-2d21062b","chunk-b5d27614","chunk-04bac318","chunk-6b472776","chunk-6b480e81","chunk-6b472f31","chunk-2d21062b"],{"2bae":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ihr-wrapper"},[i("div",{staticClass:"top-query"},[i("el-form",{ref:"queryForm",attrs:{model:e.queryParams,"label-width":"110px"}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"考核表名称"}},[i("el-input",{attrs:{placeholder:"请输入...",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.formName,callback:function(t){e.$set(e.queryParams,"formName",t)},expression:"queryParams.formName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"状态"}},[i("el-select",{attrs:{placeholder:"全部",clearable:""},model:{value:e.queryParams.formState,callback:function(t){e.$set(e.queryParams,"formState",t)},expression:"queryParams.formState"}},e._l(e.stateOptions,(function(e){return i("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1)],1)],1),e._v(" "),i("div",[i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleQuery}},[e._v("查询")]),e._v(" "),i("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-refresh-left"},on:{click:e.handleReset}},[e._v("重置")])],1)],1),e._v(" "),i("div",{staticClass:"main-table"},[i("div",{staticClass:"button-flex"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleAdd}},[e._v("新增")])],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.formSetList,"row-key":"formId"}},[i("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),i("el-table-column",{attrs:{prop:"formName",label:"考核表名称","show-overflow-tooltip":!0}}),e._v(" "),i("el-table-column",{attrs:{prop:"formType",label:"考核表名称类型","show-overflow-tooltip":!0,formatter:e.formTypeFormat}}),e._v(" "),i("el-table-column",{attrs:{label:"状态",prop:"status"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},on:{change:function(i){return e.handleUpdateStatus(t.row)}},model:{value:t.row.formState,callback:function(i){e.$set(t.row,"formState",i)},expression:"scope.row.formState"}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("view-pfmc-form",{attrs:{type:"text","form-id":t.row.formId,plain:!1,btnText:"查看"}}),e._v(" "),0===t.row.refCount?i("el-button",{attrs:{type:"text"},on:{click:function(i){return e.handleUpdate(t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),0===t.row.refCount?i("el-popconfirm",{staticClass:"el-button-confirm",attrs:{title:"您确定要删除吗？"},on:{onConfirm:function(i){return e.handleDelete(t.row)}}},[i("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("删除")])],1):e._e()]}}])})],1),e._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],staticClass:"pagination-wrap",attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1),e._v(" "),i("el-dialog",{attrs:{title:e.title,visible:e.open,width:"990px","close-on-click-modal":!1},on:{"update:visible":function(t){e.open=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,inline:!0}},[i("el-form-item",{attrs:{label:"考核表名称",prop:"formName","label-width":"100px"}},[i("el-input",{attrs:{placeholder:"请输入考核表名称",clearable:"",size:"small"},model:{value:e.form.formName,callback:function(t){e.$set(e.form,"formName",t)},expression:"form.formName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"考核表类型",prop:"formType","label-width":"100px"}},[i("el-select",{attrs:{placeholder:"考核表类型",size:"small"},model:{value:e.form.formType,callback:function(t){e.$set(e.form,"formType",t)},expression:"form.formType"}},e._l(e.pfmcTypeOptions,(function(e){return i("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"状态",prop:"formState","label-width":"100px"}},[i("el-select",{attrs:{placeholder:"状态",size:"small"},model:{value:e.form.formState,callback:function(t){e.$set(e.form,"formState",t)},expression:"form.formState"}},e._l(e.stateOptions,(function(e){return i("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"展示方式",prop:"showType","label-width":"100px"}},[i("el-select",{attrs:{placeholder:"横向",size:"small"},on:{change:e.toggleShowType},model:{value:e.form.showType,callback:function(t){e.$set(e.form,"showType",t)},expression:"form.showType"}},e._l(e.showTypeOptions,(function(e){return i("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"公开",prop:"isPublic","label-width":"100px"}},[i("el-radio-group",{model:{value:e.form.isPublic,callback:function(t){e.$set(e.form,"isPublic",t)},expression:"form.isPublic"}},[i("el-radio",{attrs:{label:"Y"}},[e._v("是")]),e._v(" "),i("el-radio",{attrs:{label:"N"}},[e._v("否")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:" ","label-width":"140px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-view",size:"mini"},on:{click:e.handlePreview}},[e._v("预览表单")]),e._v(" "),i("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"mini"},on:{click:e.addSection}},[e._v("增加区段")])]}}])}),e._v(" "),i("div",{staticClass:"app-container"},[[i("el-collapse",{staticStyle:{width:"910px","border-bottom":"1"},model:{value:e.sectionNames,callback:function(t){e.sectionNames=t},expression:"sectionNames"}},e._l(e.formSetSectionList,(function(t,o){return i("el-collapse-item",{key:t.formSectionId,attrs:{name:o}},[i("template",{slot:"title"},[i("div",{on:{click:function(e){}}},[i("div",{staticStyle:{float:"left","margin-top":"13px",width:"190px","font-weight":"bold"}},[e._v(e._s(t.sectionName))]),e._v(" "),i("div",{staticStyle:{float:"left","margin-left":"70px","margin-top":"17px",width:"180px"}},[e.widthPerIsShow?i("el-select",{attrs:{size:"small"},model:{value:t.widthPerType,callback:function(i){e.$set(t,"widthPerType",i)},expression:"apply.widthPerType"}},e._l(e.widthPerOptions,(function(e){return i("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1):e._e()],1),e._v(" "),i("div",{staticStyle:{float:"left","margin-left":"10px","margin-top":"13px",width:"190px"}},[i("el-form-item",{attrs:{label:"区段顺序"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.showOrder,expression:"apply.showOrder"}],staticStyle:{width:"55px","margin-top":"12px",border:"1px solid #ccc","border-radius":"3px",padding:"4px 4px","font-family":"sans-serif","font-size":"13px",color:"rgb(96, 98, 102)"},domProps:{value:t.showOrder},on:{input:function(i){i.target.composing||e.$set(t,"showOrder",i.target.value)}}})])],1),e._v(" "),i("div",{staticStyle:{float:"left","margin-left":"10px","margin-top":"15px",width:"230px"}},[i("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"mini"},nativeOn:{click:function(t){return t.stopPropagation(),e.addField(o)}}},[e._v("增加区段字段")]),e._v(" "),i("el-button",{attrs:{type:"danger",plain:"",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(t){return t.stopPropagation(),e.handleDelSection(o)}}},[e._v("删除")])],1)])]),e._v(" "),i("div",[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.formSetSectionList[o].formSetFieldList,"row-key":"formFieldId","tree-props":{children:"children",hasChildren:"hasChildren"}}},[i("el-table-column",{attrs:{label:"区段名称","show-overflow-tooltip":!0,width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-input",{attrs:{width:"100px",disabled:!0},model:{value:t.row.fieldName,callback:function(i){e.$set(t.row,"fieldName",i)},expression:"scope.row.fieldName"}})]}}],null,!0)}),e._v(" "),i("el-table-column",{attrs:{label:"字段顺序","show-overflow-tooltip":!0,width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticStyle:{"margin-right":"5px"}},[e._v(e._s(t.row.showOrder))]),e._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"上移",placement:"top",enterable:!1}},[i("el-button",{attrs:{type:"text",icon:"el-icon-upload2"},on:{click:function(i){return i.stopPropagation(),e.moveUpTable(t.$index,e.formSetSectionList[o].formSetFieldList)}}})],1),e._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"下移",placement:"top",enterable:!1}},[i("el-button",{staticStyle:{"margin-left":"0"},attrs:{type:"text",icon:"el-icon-download"},on:{click:function(i){return i.stopPropagation(),e.moveDownTable(t.$index,e.formSetSectionList[o].formSetFieldList)}}})],1)]}}],null,!0)}),e._v(" "),i("el-table-column",{attrs:{label:"必填","show-overflow-tooltip":!0,width:"60px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-checkbox",{attrs:{"true-label":"Y","false-label":"N"},model:{value:t.row.isnotnull,callback:function(i){e.$set(t.row,"isnotnull",i)},expression:"scope.row.isnotnull"}})]}}],null,!0)}),e._v(" "),i("el-table-column",{attrs:{label:"附件","show-overflow-tooltip":!0,width:"60px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-checkbox",{attrs:{"true-label":"Y","false-label":"N"},model:{value:t.row.ishasfile,callback:function(i){e.$set(t.row,"ishasfile",i)},expression:"scope.row.ishasfile"}})]}}],null,!0)}),e._v(" "),e.widthPerIsShow?i("el-table-column",{attrs:{label:"宽度","show-overflow-tooltip":!0,width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-input",{attrs:{width:"90px"},model:{value:t.row.widthper,callback:function(i){e.$set(t.row,"widthper",i)},expression:"scope.row.widthper"}})]}}],null,!0)}):e._e(),e._v(" "),i("el-table-column",{attrs:{label:"开始显示阶段","show-overflow-tooltip":!0,width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-select",{attrs:{placeholder:"开始显示阶段",size:"small"},model:{value:t.row.viewStage,callback:function(i){e.$set(t.row,"viewStage",i)},expression:"scope.row.viewStage"}},e._l(e.viewStageOptions,(function(e){return i("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)]}}],null,!0)}),e._v(" "),i("el-table-column",{attrs:{label:"其他属性","show-overflow-tooltip":!0,width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-select",{attrs:{placeholder:"其他属性",size:"small"},model:{value:t.row.otherAttr,callback:function(i){e.$set(t.row,"otherAttr",i)},expression:"scope.row.otherAttr"}},e._l(e.otherAttrOptions,(function(e){return i("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)]}}],null,!0)}),e._v(" "),i("el-table-column",{attrs:{label:"操作",align:"center",width:"80","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top",enterable:!1}},[i("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:menu:remove"],expression:"['system:menu:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(i){return e.handleDelField(o,t.$index,t.row)}}})],1)]}}],null,!0)})],1)],1)],2)})),1)]],2)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{plan:"",icon:"el-icon-close"},on:{click:e.cancelFormSet}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-bank-card"},on:{click:e.submitForm}},[e._v("保存")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:e.selectSectionTitle,visible:e.selectSection,width:"990px","close-on-click-modal":!1},on:{"update:visible":function(t){e.selectSection=t}}},[i("el-form",{ref:"formSection",attrs:{inline:!0,"label-width":"68px"}},[i("el-form-item",{attrs:{label:"区段名称"}},[i("el-input",{attrs:{clearable:"",placeholder:"输入区段名称"},model:{value:e.queryParams1.sectionName,callback:function(t){e.$set(e.queryParams1,"sectionName",t)},expression:"queryParams1.sectionName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"区段类型",prop:"sectionType"}},[i("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.queryParams1.sectionType,callback:function(t){e.$set(e.queryParams1,"sectionType",t)},expression:"queryParams1.sectionType"}},e._l(e.sectionTypeOptions,(function(e){return i("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSectionQuery}},[e._v("查询")])],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.sectionList,"row-key":"sectionId","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":e.getSelectedSection}},[i("el-table-column",{attrs:{type:"selection","class-name":"small-padding fixed-width"}}),e._v(" "),i("el-table-column",{attrs:{label:"序号",type:"index"}}),e._v(" "),i("el-table-column",{attrs:{label:"区段名称",prop:"sectionName"}}),e._v(" "),i("el-table-column",{attrs:{label:"区段类型",prop:"sectionType",formatter:e.sectionTypeFormat}})],1),e._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.totalSection>0,expression:"totalSection>0"}],attrs:{total:e.totalSection,page:e.queryParams1.pageNum,limit:e.queryParams1.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams1,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams1,"pageSize",t)},pagination:e.getSectionList}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{plain:"",icon:"el-icon-close"},on:{click:e.cancelSection}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:e.handleAddSection}},[e._v("确定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:e.selectFieldTitle,visible:e.selectField,width:"990px","close-on-click-modal":!1},on:{"update:visible":function(t){e.selectField=t}}},[i("el-form",{ref:"formField",attrs:{inline:!0}},[i("el-form-item",{attrs:{label:"区段字段名称"}},[i("el-input",{attrs:{clearable:"",placeholder:"输入区段字段名称"},model:{value:e.queryParams2.fieldName,callback:function(t){e.$set(e.queryParams2,"fieldName",t)},expression:"queryParams2.fieldName"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFieldQuery}},[e._v("查询")])],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"addFieldTable",attrs:{data:e.fieldList,"row-key":"fieldId"},on:{"selection-change":e.getSelectedField,"select-all":e.selectAll,select:e.selectSingle}},[i("el-table-column",{attrs:{type:"selection"}}),e._v(" "),i("el-table-column",{attrs:{label:"序号",type:"index"}}),e._v(" "),i("el-table-column",{attrs:{label:"区段字段名称",prop:"fieldName"}}),e._v(" "),i("el-table-column",{attrs:{label:"字段说明",prop:"fieldDesc"}}),e._v(" "),i("el-table-column",{attrs:{label:"字段类型",prop:"fieldType",formatter:e.fieldTypeFormat}}),e._v(" "),i("el-table-column",{attrs:{label:"状态",prop:"status"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s("1"===t.row.status?"有效":"失效")+"\n            ")]}}])})],1),e._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.totalField>0,expression:"totalField>0"}],attrs:{total:e.totalField,page:e.queryParams2.pageNum,limit:e.queryParams2.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams2,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams2,"pageSize",t)},pagination:e.getFieldList}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{plain:"",icon:"el-icon-close"},on:{click:e.cancelField}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:e.handleAddField}},[e._v("确定")])],1)],1),e._v(" "),i("el-dialog",{ref:"previewContain",attrs:{title:e.previewTitle,visible:e.preview,width:"870px"},on:{"update:visible":function(t){e.preview=t}}},[[i("el-collapse",{staticStyle:{width:"800px","border-bottom":"1"},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},e._l(e.previewSectionList,(function(t,o){return i("el-collapse-item",{key:o,attrs:{name:o}},[i("template",{slot:"title"},[i("div",{on:{click:function(e){}}},[i("div",{staticStyle:{float:"left","margin-top":"13px",width:"150px","font-weight":"bold"}},[e._v(e._s(t.sectionName))])])]),e._v(" "),i("div",{staticStyle:{width:"95%"}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-key":"fieldName","tree-props":{children:"children",hasChildren:"hasChildren"},"empty-text":" "}},[e._l(t.previewFieldList,(function(t,o){return i("el-table-column",{key:o,attrs:{prop:t.prop,width:t.width,label:t.fieldName,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(o){return["select"===t.fieldType?i("div",[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}},e._l(t.selectValue,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1):"date"===t.fieldType?i("div",[i("el-date-picker",{staticStyle:{width:"100%",height:"100%","line-height":"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})],1):i("div",[i("el-input",{staticStyle:{width:"100%",height:"100%","line-height":"100%"},attrs:{type:"textarea",rows:"1"},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}})],1)]}}],null,!0)})})),e._v(" "),0==e.widthPerIsShow?i("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(o){return[i("el-form",{staticClass:"expand-form",attrs:{"label-position":"left",inline:"","label-width":"100px"}},[e._l(t.expendFieldList,(function(t,r){return[i("el-row",[i("el-form-item",{attrs:{label:t.fieldName+":",prop:t.prop}},["select"===t.fieldType?i("div",[i("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择"},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"props.row[item.prop]"}},e._l(t.selectValue,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1):"date"===t.fieldType?i("div",[i("el-date-picker",{staticStyle:{width:"300px",height:"100%","line-height":"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"props.row[item.prop]"}})],1):i("div",[i("el-input",{staticStyle:{width:"300px",height:"100%","line-height":"100%"},attrs:{type:"textarea",rows:"1"},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"props.row[item.prop]"}})],1)])],1)]}))],2)]}}],null,!0)}):e._e()],2)],1)],2)})),1)]],2)],1)},r=[],l=i("75fc"),n=(i("7f7f"),i("7514"),i("55dd"),i("28a5"),i("ac6a"),i("5df3"),i("f400"),i("81c7")),a=i("6338"),s=i("6553"),c=(i("7026"),i("542c"),i("5aee"),{components:{ViewPfmcForm:function(){return i.e("chunk-0efcce37").then(i.bind(null,"9eda"))}},data:function(){return{loading:!0,total:0,formSetList:[],formSetSectionList:[],title:"",open:!1,widthPerIsShow:!0,selectField:!1,selectSection:!1,selectFieldTitle:"",selectSectionTitle:"",previewTitle:"",preview:!1,stateOptions:[],showTypeOptions:[],pfmcTypeOptions:[],viewStageOptions:[],otherAttrOptions:[],fieldTypeOptions:[],sectionTypeOptions:[],widthPerOptions:[],totalField:0,fieldList:[],totalSection:0,sectionList:[],selectedData:[],activeNames:[],sectionNames:[],queryParams:{pageNum:1,pageSize:10,formName:void 0,formState:"1"},queryParams1:{pageNum:1,pageSize:10,sectionName:void 0,sectionType:void 0,status:"1"},queryParams2:{pageNum:1,pageSize:10,fieldName:void 0,status:"1"},form:{formId:void 0,formName:void 0,formState:"1",formType:"1",showType:"1",isPublic:"Y"},rules:{formName:[{required:!0,message:"请输入考核表名称",trigger:"blur"},{min:1,max:30,message:"长度在 1到 30 个字符",trigger:"blur"}],widthper:[{required:!0,message:"请输入宽度数据",trigger:"blur"}]},previewSectionList:[],addFieldMap:new Map}},created:function(){var e=this;this.getDicts("sys_normal_status").then((function(t){e.stateOptions=t.data})),this.getDicts("pfmc_show_type").then((function(t){e.showTypeOptions=t.data})),this.getDicts("pfmc_type").then((function(t){e.pfmcTypeOptions=t.data})),this.getDicts("pfmc_view_stage").then((function(t){e.viewStageOptions=t.data})),this.getDicts("pfmc_other_attr").then((function(t){e.otherAttrOptions=t.data})),this.getDicts("pfmc_presettings_field_type").then((function(t){e.fieldTypeOptions=t.data})),this.getDicts("pfmc_presettings_section_type").then((function(t){e.sectionTypeOptions=t.data})),this.getDicts("pfmc_width_per_type").then((function(t){e.widthPerOptions=t.data})),this.getList()},methods:{moveUpTable:function(e,t){if(e>0){var i=t[e-1];i.showOrder++,t[e].showOrder--,t.splice(e-1,1),t.splice(e,0,i)}else this.msgInfo("已经是第一条，不可上移")},moveDownTable:function(e,t){if(e+1!==t.length){var i=t[e+1];i.showOrder--,t[e].showOrder++,t.splice(e+1,1),t.splice(e,0,i)}else this.msgInfo("已经是最后一条，不可下移")},handleReset:function(){this.queryParams={pageNum:1,pageSize:10,formName:void 0,formState:"1"}},toggleShowType:function(){this.widthPerIsShow="1"==this.form.showType},cancelFormSet:function(){this.resetForm("cancelFormSet"),this.open=!1},cancelSection:function(){this.resetForm("formSection"),this.selectSection=!1},cancelField:function(){this.resetForm("formField"),this.selectField=!1},sortNumber:function(e,t){return parseInt(e.showOrder)-parseInt(t.showOrder)},addItemRow:function(e,t){for(var i={},o=0;o<e.previewFieldList.length;o++){var r=e.previewFieldList[o],l=r.prop;i[l]=""}for(var n=0;n<e.expendFieldList.length;n++){var a=e.expendFieldList[n],s=a.prop;i[s]=""}e.tableData||(e.tableData=[]),e.tableData.push(i)},handlePreview:function(){if(this.formSetSectionList&&0!=this.formSetSectionList.length){this.previewSectionList=[];for(var e=this.$refs.previewContain.width,t=0;t<this.formSetSectionList.length;t++){var i=this.formSetSectionList[t],o={sectionName:i.sectionName,showOrder:i.showOrder,previewFieldList:[],tableData:[{}],expendFieldList:[]};if(!this.formSetSectionList[t].formSetFieldList||0==this.formSetSectionList[t].formSetFieldList.length)return void this.msgError("缺少区段字段信息，无法预览！");if(this.activeNames.push(t),this.widthPerIsShow){for(var r=0;r<this.formSetSectionList[t].formSetFieldList.length;r++){var l=this.formSetSectionList[t].formSetFieldList[r],n={fieldName:l.fieldName,showOrder:l.showOrder,prop:l.fieldId,fieldType:l.fieldType,selectValue:"select"===l.fieldType?l.selectValue.split(","):[],width:"1"==i.widthPerType?e*parseInt(l.widthper)/100+"px":l.widthper+"px"};o.previewFieldList.push(n)}o.previewFieldList.sort(this.sortNumber)}else{for(var a=["2","3","4","5"],s=0,c=0;c<this.formSetSectionList[t].formSetFieldList.length;c++){var d=this.formSetSectionList[t].formSetFieldList[c],u={fieldName:d.fieldName,prop:d.fieldId,width:"1"==i.widthPerType?e*parseInt(d.widthper)/100+"px":d.widthper+"px",showOrder:d.showOrder,fieldType:d.fieldType,selectValue:"select"===d.fieldType?d.selectValue.split(","):[]};a.indexOf(d.otherAttr)>-1?(o.previewFieldList.push(u),s++):o.expendFieldList.push(u)}for(var f=.9*e/s,p=0;p<o.previewFieldList.length;p++){var m=o.previewFieldList[p];m.width=f+"px"}o.previewFieldList.sort(this.sortNumber),o.expendFieldList.sort(this.sortNumber)}this.previewSectionList.push(o),this.previewSectionList.sort(this.sortNumber)}this.previewTitle="预览绩效表单",this.preview=!0}},fieldTypeFormat:function(e,t,i,o){var r=this.fieldTypeOptions.find((function(e){return e.dictValue==i}));return r?r.dictLabel:""},sectionTypeFormat:function(e,t,i,o){var r=this.sectionTypeOptions.find((function(e){return e.dictValue==i}));return r?r.dictLabel:""},formTypeFormat:function(e,t,i,o){var r=this.pfmcTypeOptions.find((function(e){return e.dictValue==i}));return r?r.dictLabel:""},formStateFormat:function(e,t,i,o){var r=this.stateOptions.find((function(e){return e.dictValue==i}));return r?r.dictLabel:""},addField:function(e){this.resetField(),this.selectField=!0,this.selectFieldTitle="选择区段字段",this.formField.fIndex=e,this.getFieldList(),this.addFieldMap.clear()},getCurItem:function(e,t,i){for(var o=null,r=0;e&&r<e.length;r++){var l=e[r];if(l[i]===t){o=l,o.inListIndex=r;break}}return o},selectSingle:function(e,t){e.some((function(e){return e.fieldId===t.fieldId}))?this.addSelsField([t]):this.delUnSelsField([t])},selectAll:function(e){e.length>0?this.addSelsField(e):this.delUnSelsField(this.fieldList)},addSelsField:function(e){var t=this;e.forEach((function(e){t.addFieldMap.set(e.fieldId,e)}))},delUnSelsField:function(e){var t=this;e.forEach((function(e){t.addFieldMap.delete(e.fieldId)}))},handleAddField:function(){var e=this,t=this.formField.fIndex;this.selectedData=[],this.addFieldMap.forEach((function(t){e.selectedData.push(t)}));var i=0===this.formSetSectionList[t].formSetFieldList.length?1:Math.max.apply(Math,Object(l["a"])(this.formSetSectionList[t].formSetFieldList.map((function(e){return e.showOrder}))))+1;console.log(i);for(var o=function(o){var r=e.selectedData[o];if(e.formSetSectionList[t].formSetFieldList.some((function(e){return e.fieldId===r.fieldId})))return"continue";var l={fieldId:r.fieldId,fieldName:r.fieldName,showOrder:""+i++,isnotnull:"Y",ishasfile:"",widthper:"",viewStage:"1",otherAttr:"1",fieldType:r.fieldType,selectValue:r.selectValue};e.formSetSectionList[t].formSetFieldList.push(l),e.widthPerIsShow&&e.setAdaptWidth(e.formSetSectionList[t],e.formSetSectionList[t].formSetFieldList)},r=0;r<this.selectedData.length;r++)o(r);this.selectField=!1},setAdaptWidth:function(e,t){var i=t.length;if(0!=i){var o=0;o="1"==e.widthPerType?Math.floor(100/i):Math.floor(1e3/i);for(var r=0;r<t.length;r++){var l=t[r];l.widthper=o}}},addSection:function(){this.resetSection(),this.selectSection=!0,this.selectSectionTitle="选择考核区段",this.getSectionList()},getSelectedSection:function(e){this.selectedData=e},getSelectedField:function(e){this.selectedData=e},handleAddSection:function(){for(var e=0;e<this.selectedData.length;e++){var t=this.selectedData[e],i={sectionId:t.sectionId,sectionName:t.sectionName,showOrder:""+(e+1),widthPerType:"1",formSetFieldList:[]},o=this.getCurItem(this.formSetSectionList,t.sectionId,"sectionId");o?this.msgError("考核区段["+t.sectionName+"]已存在"):this.formSetSectionList.push(i)}this.selectSection=!1},handleDelSection:function(e){this.formSetSectionList.splice(e,1)},handleDelField:function(e,t,i){this.formSetSectionList[e].formSetFieldList.splice(t,1)},getList:function(){var e=this;this.loading=!0,Object(n["listFormSet"])(this.queryParams).then((function(t){e.formSetList=t.data.list,e.total=t.data.total,e.loading=!1}))},getSectionList:function(){var e=this;this.loading=!0,Object(s["listPfmcSection"])(this.queryParams1).then((function(t){e.sectionList=t.data.list,e.totalSection=t.data.total,e.loading=!1}))},getFieldList:function(){var e=this;this.loading=!0,Object(a["listPfmcField"])(this.addDateRange(this.queryParams2)).then((function(t){"0"===t.code?(e.fieldList=t.data.list,e.totalField=t.data.total,e.loading=!1,e.$nextTick((function(){e.fieldList.forEach((function(t){e.addFieldMap.has(t.fieldId)&&e.$refs.addFieldTable.toggleRowSelection(t,!0)}))}))):e.msgError("查询区段字段定义列表失败")})).catch((function(t){e.msgError(t)}))},handleQuery:function(){this.queryParams.page=1,this.getList()},handleSectionQuery:function(){this.queryParams1.page=1,this.getSectionList()},handleFieldQuery:function(){this.queryParams2.page=1,this.getFieldList()},reset:function(){this.form={formId:void 0,formName:void 0,formState:"1",formType:"1",showType:"1",isPublic:"Y"},this.widthPerIsShow=!0,this.formSetSectionList=[],this.sectionNames=[],this.activeNames=[],this.resetForm("form")},resetSection:function(){this.formSection={sectionName:void 0,sectionType:void 0},this.sectionList=[],this.resetForm("formSection")},resetField:function(){this.formField={fieldName:void 0,status:void 0,fIndex:void 0},this.fieldList=[],this.resetForm("formField")},handleUpdate:function(e){var t=this;this.reset(),this.form.formId=e.formId,Object(n["getformSet"])(e.formId).then((function(e){t.form=e.data,t.formSetSectionList=e.data.formSetSectionList;for(var i=0;i<t.formSetSectionList.length;i++)t.sectionNames.push(i);t.widthPerIsShow="1"==t.form.showType,t.open=!0,t.title="修改考核表"}))},handleAdd:function(e){this.reset(),this.open=!0,this.title="新增绩效表单配置"},validation:function(){for(var e=0,t=0,i=0,o=0,r=0;r<this.formSetSectionList.length;r++){this.formSetSectionList[r];if(!this.formSetSectionList[r].formSetFieldList||0==this.formSetSectionList[r].formSetFieldList.length)return this.msgError("缺少区段字段信息，无法保存！"),!1;for(var l=0;l<this.formSetSectionList[r].formSetFieldList.length;l++){var n=this.formSetSectionList[r].formSetFieldList[l];if("2"===n.otherAttr?e++:"3"===n.otherAttr?t++:"4"===n.otherAttr?i++:"5"===n.otherAttr&&o++,this.widthPerIsShow&&!n.widthper)return this.msgError("缺少区段字段宽度信息，无法保存！"),!1}}return 0==e?(this.msgError("区段字段缺少指标名称列，无法保存！"),!1):0==t?(this.msgError("区段字段缺少权重列，无法保存！"),!1):0==i?(this.msgError("区段字段缺少自评列，无法保存！"),!1):0!=o||(this.msgError("区段字段缺少算分列，无法保存！"),!1)},submitForm:function(){var e=this;this.validation()&&this.$refs["form"].validate((function(t){t&&(e.form.formSetSectionList=e.formSetSectionList,void 0!==e.form.formId?Object(n["updateFormSet"])(e.form).then((function(t){"0"===t.code?(e.msgSuccess("修改成功"),e.open=!1,e.getList()):e.msgError(t.msg)})):(e.form.isDeleted=!1,Object(n["addFormSet"])(e.form).then((function(t){"0"===t.code?(e.msgSuccess("新增成功"),e.open=!1,e.getList()):e.msgError(t.msg)}))))}))},handledisAble:function(e){var t=this;this.$confirm('是否设置名称为"'+e.formName+'"的数据项为失效?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(n["disableFormSet"])(e.formId)})).then((function(e){console.log("disableFormSet",e),"0"===e.code?(t.getList(),t.msgSuccess("设置成功")):t.msgError(e.msg)})).catch((function(){}))},handleDelete:function(e){var t=this;this.loading=!0,Object(n["delFormSet"])(e.formId).then((function(e){t.loading=!1,console.log("delFormSet",e),"0"===e.code?(t.getList(),t.msgSuccess("删除成功")):t.msgError(e.msg)})).catch((function(e){t.loading=!1,t.msgError(e)}))},handleUpdateStatus:function(e){var t=this;this.$confirm('您确定要将名称为"'+e.formName+'"的绩效表单设置为'+("1"===e.formState?"有效":"失效")+"?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0;var i=e.formId;Object(n["disableFormSet"])(i).then((function(e){t.loading=!1,"0"===e.code?(t.msgSuccess("修改成功"),t.getList()):t.msgError(e.msg)})).catch((function(e){t.loading=!1,t.msgError(e)}))})).catch((function(){e.formState="1"===e.formState?"0":"1"}))}}}),d=c,u=(i("8d12"),i("2877")),f=Object(u["a"])(d,o,r,!1,null,"053d0422",null);t["default"]=f.exports},"2f21":function(e,t,i){"use strict";var o=i("79e5");e.exports=function(e,t){return!!e&&o((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},"55dd":function(e,t,i){"use strict";var o=i("5ca1"),r=i("d8e8"),l=i("4bf8"),n=i("79e5"),a=[].sort,s=[1,2,3];o(o.P+o.F*(n((function(){s.sort(void 0)}))||!n((function(){s.sort(null)}))||!i("2f21")(a)),"Array",{sort:function(e){return void 0===e?a.call(l(this)):a.call(l(this),r(e))}})},6338:function(e,t,i){"use strict";i.r(t),i.d(t,"listPfmcField",(function(){return l})),i.d(t,"updateField",(function(){return n})),i.d(t,"getField",(function(){return a})),i.d(t,"addField",(function(){return s})),i.d(t,"updateFieldDetail",(function(){return c}));var o=i("b775"),r=i("b854");function l(e){return Object(o["a"])({url:"".concat(r["pfmcSettings"],"/pfmcfield/list"),method:"get",params:e})}function n(e){return Object(o["a"])({url:"".concat(r["pfmcSettings"],"/pfmcfield/update"),method:"put",data:e})}function a(e){return Object(o["a"])({url:"".concat(r["pfmcSettings"],"/pfmcfield/").concat(e),method:"get"})}function s(e){return Object(o["a"])({url:"".concat(r["pfmcSettings"],"/pfmcfield/add"),method:"post",data:e})}function c(e){return Object(o["a"])({url:"".concat(r["pfmcSettings"],"/pfmcfield/updatedetail"),method:"put",data:e})}},6553:function(e,t,i){"use strict";i.r(t),i.d(t,"listPfmcSection",(function(){return l})),i.d(t,"getPfmcSection",(function(){return n})),i.d(t,"addPfmcSection",(function(){return a})),i.d(t,"updatePfmcSection",(function(){return s}));var o=i("b775"),r=i("b854");function l(e){return Object(o["a"])({url:"".concat(r["pfmcSettings"],"/pfmcsection/list"),method:"get",params:e})}function n(e){return Object(o["a"])({url:"".concat(r["pfmcSettings"],"/pfmcsection/").concat(e),method:"get"})}function a(e){return Object(o["a"])({url:"".concat(r["pfmcSettings"],"/pfmcsection/add"),method:"post",data:e})}function s(e){return Object(o["a"])({url:"".concat(r["pfmcSettings"],"/pfmcsection/update"),method:"put",data:e})}},7514:function(e,t,i){"use strict";var o=i("5ca1"),r=i("0a49")(5),l="find",n=!0;l in[]&&Array(1)[l]((function(){n=!1})),o(o.P+o.F*n,"Array",{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),i("9c6c")(l)},"81c7":function(e,t,i){"use strict";i.r(t),i.d(t,"listFormSet",(function(){return l})),i.d(t,"addFormSet",(function(){return n})),i.d(t,"getformSet",(function(){return a})),i.d(t,"updateFormSet",(function(){return s})),i.d(t,"delFormSet",(function(){return c})),i.d(t,"disableFormSet",(function(){return d})),i.d(t,"progListByFormId",(function(){return u}));var o=i("b775"),r=i("b854");function l(e){return Object(o["a"])({url:"".concat(r["pfmcSettings"],"/pfmcPresetFormSet/list"),method:"get",params:e})}function n(e){return Object(o["a"])({url:"".concat(r["pfmcSettings"],"/pfmcPresetFormSet"),method:"post",data:e})}function a(e){return Object(o["a"])({url:"".concat(r["pfmcSettings"],"/pfmcPresetFormSet/").concat(e),method:"get"})}function s(e){return Object(o["a"])({url:"".concat(r["pfmcSettings"],"/pfmcPresetFormSet"),method:"put",data:e})}function c(e){return Object(o["a"])({url:"".concat(r["pfmcSettings"],"/pfmcPresetFormSet/").concat(e),method:"delete"})}function d(e){return Object(o["a"])({url:"".concat(r["pfmcSettings"],"/pfmcPresetFormSet/disableFormSet/").concat(e),method:"get"})}function u(e){return Object(o["a"])({url:"".concat(r["pfmcSettings"],"/pfmcPresetFormSet/getProgByFormId/").concat(e),method:"get"})}},"832e":function(e,t,i){},"8d12":function(e,t,i){"use strict";var o=i("832e"),r=i.n(o);r.a},b854:function(e,t,i){"use strict";i.r(t),i.d(t,"pfmcSettings",(function(){return o})),i.d(t,"pfmcAsist",(function(){return r})),i.d(t,"pfmcExecution",(function(){return l})),i.d(t,"pfmcEval",(function(){return n}));var o="pfmc-settings",r="pfmc-asist",l="pfmc-execution",n="pfmc-eval"},f400:function(e,t,i){"use strict";var o=i("c26b"),r=i("b39a"),l="Map";e.exports=i("e0b8")(l,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=o.getEntry(r(this,l),e);return t&&t.v},set:function(e,t){return o.def(r(this,l),0===e?0:e,t)}},o,!0)}}]);