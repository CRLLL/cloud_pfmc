(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21785c"],{c6a4:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"pfmc-import-button-container"},[o("el-button",{attrs:{size:t.size,type:t.type,plain:t.plain,round:t.round,circle:t.circle,disabled:t.disabled,icon:t.icon},on:{click:function(e){t.showDialog=!0}}},[t._v(t._s(t.btnText))]),t._v(" "),o("el-dialog",{ref:"dialog",attrs:{visible:t.showDialog,title:t.title,"close-on-click-modal":!1,"append-to-body":"",width:"700px"},on:{"update:visible":function(e){t.showDialog=e},open:t.dialogOpen}},[o("el-form",{ref:"indicatorForm",attrs:{model:t.indicatorForm,rules:t.rules,"label-width":"80px"}},[o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"指标名称",prop:"indicatorName"}},[o("el-input",{attrs:{placeholder:"请输入..."},model:{value:t.indicatorForm.indicatorName,callback:function(e){t.$set(t.indicatorForm,"indicatorName",e)},expression:"indicatorForm.indicatorName"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"指标编号",prop:"indicatorNumber"}},[o("el-input",{model:{value:t.indicatorForm.indicatorNumber,callback:function(e){t.$set(t.indicatorForm,"indicatorNumber",e)},expression:"indicatorForm.indicatorNumber"}})],1)],1)],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"分类",prop:"categoryId"}},[o("tree-select",{attrs:{options:t.indicatorCategoryList,placeholder:"请选择...","default-expand-level":1},model:{value:t.indicatorForm.categoryId,callback:function(e){t.$set(t.indicatorForm,"categoryId",e)},expression:"indicatorForm.categoryId"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"指标单位",prop:"indicatorUnit"}},[o("el-input",{model:{value:t.indicatorForm.indicatorUnit,callback:function(e){t.$set(t.indicatorForm,"indicatorUnit",e)},expression:"indicatorForm.indicatorUnit"}})],1)],1)],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"评价周期",prop:"evalPeriod"}},[o("el-input",{model:{value:t.indicatorForm.evalPeriod,callback:function(e){t.$set(t.indicatorForm,"evalPeriod",e)},expression:"indicatorForm.evalPeriod"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"数据来源",prop:"dataSource"}},[o("el-input",{model:{value:t.indicatorForm.dataSource,callback:function(e){t.$set(t.indicatorForm,"dataSource",e)},expression:"indicatorForm.dataSource"}},[o("div",{attrs:{slot:"append"},slot:"append"},[o("select-org",{on:{"select-finish":t.selectFinish}})],1)])],1)],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"应用范围",prop:"orgId"}},[o("tree-select",{attrs:{options:t.deptOptions,placeholder:"","default-expand-level":1},model:{value:t.indicatorForm.orgId,callback:function(e){t.$set(t.indicatorForm,"orgId",e)},expression:"indicatorForm.orgId"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"指标说明",prop:"indicatorDesc"}},[o("el-input",{attrs:{type:"textarea",rows:"2"},model:{value:t.indicatorForm.indicatorDesc,callback:function(e){t.$set(t.indicatorForm,"indicatorDesc",e)},expression:"indicatorForm.indicatorDesc"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"考核标准",prop:"evalStandard"}},[o("el-input",{attrs:{type:"textarea",rows:"2"},model:{value:t.indicatorForm.evalStandard,callback:function(e){t.$set(t.indicatorForm,"evalStandard",e)},expression:"indicatorForm.evalStandard"}})],1)],1),t._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{plain:"",icon:"el-icon-close"},on:{click:t.handleCancel}},[t._v("取消")]),t._v(" "),o("el-button",{attrs:{type:"primary",icon:"el-icon-bank-card"},on:{click:t.handleSave}},[t._v("确定")])],1)],1)],1)},a=[],r=o("2879"),n=o("2d1b"),d=(o("542c"),{name:"UpdateIndicator",components:{TreeSelect:function(){return o.e("chunk-5c5c1f08").then(o.t.bind(null,"7026",7))},SelectOrg:function(){return o.e("chunk-4c38833e").then(o.bind(null,"b0f7"))}},props:{size:{type:String,required:!1},type:{type:String,default:"primary"},plain:{type:Boolean,default:!0},round:{type:Boolean,default:!1},circle:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},icon:{type:String,default:"el-icon-edit"},btnText:{type:String,default:"修改"},title:{type:String,default:"修改指标"},operaterMode:{type:String,default:"modify"},indicatorId:{type:String,default:void 0}},data:function(){return{showDialog:!1,activeName:"fastLoad",defaultProps:{children:"children",label:"label"},indicatorCategoryList:[],indicatorForm:{indicatorName:void 0,indicatorNumber:void 0,categoryId:void 0,indicatorUnit:void 0,evalPeriod:void 0,dataSource:void 0,orgId:void 0,indicatorDesc:void 0,evalStandard:void 0},rules:{indicatorName:[{required:!0,message:"指标名称不能为空",trigger:"change"}],categoryId:[{required:!0,message:"分类不能为空",trigger:"change"}],applyScope:[{required:!0,message:"应用范围不能为空",trigger:"input"}]},deptOptions:void 0}},created:function(){this.getTreeselect(),this.getIndicatorCategoryList()},methods:{selectFinish:function(t){this.indicatorForm.dataSource=t.orgName},dialogOpen:function(){"add"!==this.operaterMode&&this.getIndicatorInfo(this.indicatorId)},handleCancel:function(){this.resetForm(),this.showDialog=!1},handleSave:function(){var t=this;this.$refs.indicatorForm.validate((function(e){e&&("add"===t.operaterMode?t.addIndicatorInfo(t.indicatorForm):"modify"===t.operaterMode?t.updateIndicatorInfo(t.indicatorForm):"copy"===t.operaterMode&&(t.indicatorForm.indicatorId=void 0,t.addIndicatorInfo(t.indicatorForm)))}))},addIndicatorInfo:function(t){var e=this;Object(n["addIndicator"])(t).then((function(t){"0"===t.code?(e.msgSuccess("新增指标成功"),e.$emit("update-finished"),e.showDialog=!1):e.msgError(t.msg)}))},updateIndicatorInfo:function(t){var e=this;Object(n["updateIndicator"])(t).then((function(t){"0"===t.code?(e.msgSuccess("修改指标成功"),e.$emit("update-finished"),e.showDialog=!1):e.msgError(t.msg)}))},getIndicatorInfo:function(t){var e=this;this.loading=!0,Object(n["getIndicator"])(t).then((function(t){e.loading=!1,"0"===t.code?e.indicatorForm=t.data:e.msgError(t.msg)}))},getTreeselect:function(){var t=this;Object(r["treeselect"])().then((function(e){t.deptOptions=e.data}))},getIndicatorCategoryList:function(){var t=this,e={dataMode:"tree"};Object(n["categoryTreeselect"])(e).then((function(e){"0"===e.code?t.indicatorCategoryList=e.data:t.msgError(e.msg)}))},resetForm:function(){this.indicatorForm={indicatorName:void 0,indicatorNumber:void 0,categoryId:void 0,indicatorUnit:void 0,evalPeriod:void 0,dataSource:void 0,applyScope:void 0,indicatorDesc:void 0,evalStandard:void 0}}},computed:{},watch:{}}),c=d,l=o("2877"),s=Object(l["a"])(c,i,a,!1,null,"61469565",null);e["default"]=s.exports}}]);