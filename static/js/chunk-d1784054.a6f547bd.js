(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d1784054","chunk-2d21062b","chunk-142d866f","chunk-2d21062b"],{"193e":function(e,t,c){"use strict";c.r(t);var r=function(){var e=this,t=e.$createElement,c=e._self._c||t;return c("div",{staticClass:"app-container"},[c("el-dialog",{attrs:{title:e.title,visible:e.show,width:"800px"},on:{"update:visible":function(t){e.show=t},open:e.open,close:e.cancel}},[c("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"130px"}},[c("el-row",[c("el-col",{attrs:{span:12}},[c("el-form-item",{attrs:{label:"年份",prop:"cycleYear"}},[c("el-date-picker",{staticStyle:{width:"200px"},attrs:{clearable:"",format:"yyyy","value-format":"yyyy",type:"year",placeholder:"请选择年份","picker-options":e.yearOptions},model:{value:e.form.cycleYear,callback:function(t){e.$set(e.form,"cycleYear",t)},expression:"form.cycleYear"}})],1)],1),e._v(" "),c("el-col",{attrs:{span:12}},[c("el-form-item",{attrs:{label:"考核类型",prop:"cycleType"}},[c("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.cycleType,callback:function(t){e.$set(e.form,"cycleType",t)},expression:"form.cycleType"}},e._l(e.cycleTypeOptions,(function(e){return c("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1)],1),e._v(" "),c("el-row",[c("el-col",{attrs:{span:22}},[c("el-form-item",{attrs:{label:"周期名称",prop:"cycleName"}},[c("el-input",{model:{value:e.form.cycleName,callback:function(t){e.$set(e.form,"cycleName",t)},expression:"form.cycleName"}})],1)],1)],1),e._v(" "),c("el-row",[c("el-col",{attrs:{span:12}},[c("el-form-item",{attrs:{label:"开始日期",prop:"startDate"}},[c("el-date-picker",{staticStyle:{width:"200px"},attrs:{clearable:"",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date",placeholder:"请选择开始日期"},model:{value:e.form.startDate,callback:function(t){e.$set(e.form,"startDate",t)},expression:"form.startDate"}})],1)],1),e._v(" "),c("el-col",{attrs:{span:12}},[c("el-form-item",{attrs:{label:"结束时间",prop:"endDate"}},[c("el-date-picker",{staticStyle:{width:"200px"},attrs:{clearable:"",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date",placeholder:"请选择开始日期"},model:{value:e.form.endDate,callback:function(t){e.$set(e.form,"endDate",t)},expression:"form.endDate"}})],1)],1)],1)],1),e._v(" "),c("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[c("el-button",{attrs:{plain:"",icon:"el-icon-close"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),c("el-button",{attrs:{type:"primary",icon:"el-icon-bank-card"},on:{click:e.submitForm}},[e._v("保存")])],1)],1)],1)},a=[],l=(c("6b54"),c("304f")),o={props:{visible:{type:Boolean,default:!1},title:{type:String,default:""},cycleId:{type:String,default:"0"}},data:function(){var e=this;return{show:!1,cycleTypeOptions:[],yearOptions:{onPick:function(t){var c=t.maxDate,r=t.minDate;e.choiceDate=r.getTime(),c&&(e.choiceDate="")},disabledDate:function(t){if(null!=e.choiceDate){var c=62208e6;return t.getTime()<Date.now()-(new Date).getFullYear()||t.getTime()>Date.now()-(new Date).getFullYear()+c}}},choiceDate:"",form:{cycleYear:(new Date).getFullYear().toString()},rules:{cycleYear:[{required:!0,message:"年份不能为空",trigger:"blur"}],cycleType:[{required:!0,message:"考核类型不能为空",trigger:"blur"}],cycleName:[{required:!0,message:"周期名称不能为空",trigger:"blur"}],startDate:[{required:!0,message:"开始日期不能为空",trigger:"blur"}],endDate:[{required:!0,message:"结束日期不能为空",trigger:"blur"}]}}},created:function(){var e=this;this.getDicts("pfmc_basicsettings_cycle_type").then((function(t){e.cycleTypeOptions=t.data}))},methods:{open:function(){var e=this;"0"!=this.cycleId&&Object(l["getPfmcCycle"])(this.cycleId).then((function(t){"0"===t.code?e.form=t.data:e.msgError(t.msg)})).catch((function(t){e.msgError(erro)}))},cancel:function(){this.show=!1,this.reset()},reset:function(){this.resetForm("form")},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(void 0!==e.form.cycleId?Object(l["updatePfmcCycle"])(e.form).then((function(t){"0"===t.code?(e.msgSuccess("修改成功"),e.cancel()):e.msgError(t.msg),cancelBatch})):Object(l["addPfmcCycle"])(e.form).then((function(t){"0"===t.code?(e.msgSuccess("新增成功"),e.cancel()):e.msgError(t.msg)})))}))}},watch:{show:function(){0==this.show&&this.$emit("update:visible",!1)},visible:function(){this.show=this.visible}}},n=o,i=c("2877"),s=Object(i["a"])(n,r,a,!1,null,null,null);t["default"]=s.exports},"304f":function(e,t,c){"use strict";c.r(t),c.d(t,"listPfmcCycle",(function(){return l})),c.d(t,"getPfmcCycle",(function(){return o})),c.d(t,"addPfmcCycle",(function(){return n})),c.d(t,"updatePfmcCycle",(function(){return i})),c.d(t,"batchAddPfmcCycle",(function(){return s}));var r=c("b775"),a=c("b854");function l(e){return Object(r["a"])({url:"".concat(a["pfmcSettings"],"/pfmccycle/list"),method:"get",params:e})}function o(e){return Object(r["a"])({url:"".concat(a["pfmcSettings"],"/pfmccycle/").concat(e),method:"get"})}function n(e){return Object(r["a"])({url:"".concat(a["pfmcSettings"],"/pfmccycle/add"),method:"post",data:e})}function i(e){return Object(r["a"])({url:"".concat(a["pfmcSettings"],"/pfmccycle/update"),method:"put",data:e})}function s(e){return Object(r["a"])({url:"".concat(a["pfmcSettings"],"/pfmccycle/batchAdd"),method:"post",data:e})}},b854:function(e,t,c){"use strict";c.r(t),c.d(t,"pfmcSettings",(function(){return r})),c.d(t,"pfmcAsist",(function(){return a})),c.d(t,"pfmcExecution",(function(){return l})),c.d(t,"pfmcEval",(function(){return o}));var r="pfmc-settings",a="pfmc-asist",l="pfmc-execution",o="pfmc-eval"}}]);