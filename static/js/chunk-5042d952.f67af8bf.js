(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5042d952","chunk-2d21062b","chunk-6b5c8887","chunk-2d21062b"],{b854:function(t,e,n){"use strict";n.r(e),n.d(e,"pfmcSettings",(function(){return c})),n.d(e,"pfmcAsist",(function(){return r})),n.d(e,"pfmcExecution",(function(){return o})),n.d(e,"pfmcEval",(function(){return i}));var c="pfmc-settings",r="pfmc-asist",o="pfmc-execution",i="pfmc-eval"},d69e:function(t,e,n){"use strict";n.r(e);var c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-dialog",{attrs:{title:t.title,visible:t.show,width:"800px"},on:{"update:visible":function(e){t.show=e},open:t.open,close:t.cancel}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"130px"}},[t._l(t.formSetFieldList,(function(e){return[n("el-form-item",{attrs:{label:e.fieldName,prop:e.fieldId}},[n("el-input",{attrs:{"v-model":t.form.fieldId}})],1)]}))],2),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")]),t._v(" "),n("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1)],1)},r=[],o=(n("6b54"),n("e426")),i={props:{visible:{type:Boolean,default:!1},title:{type:String,default:""},groupId:{type:String,default:"0"},rowId:{type:String,default:"0"}},data:function(){var t=this;return{show:!1,formSetFieldList:[],cycleTypeOptions:[],yearOptions:{onPick:function(e){var n=e.maxDate,c=e.minDate;t.choiceDate=c.getTime(),n&&(t.choiceDate="")},disabledDate:function(e){if(null!=t.choiceDate){var n=62208e6;return e.getTime()<Date.now()-(new Date).getFullYear()||e.getTime()>Date.now()-(new Date).getFullYear()+n}}},choiceDate:"",form:{cycleYear:(new Date).getFullYear().toString()},rules:{cycleYear:[{required:!0,message:"年份不能为空",trigger:"blur"}],cycleType:[{required:!0,message:"考核类型不能为空",trigger:"blur"}],cycleName:[{required:!0,message:"周期名称不能为空",trigger:"blur"}],startDate:[{required:!0,message:"开始日期不能为空",trigger:"blur"}],endDate:[{required:!0,message:"结束日期不能为空",trigger:"blur"}]}}},created:function(){var t=this;this.getDicts("pfmc_basicsettings_cycle_type").then((function(e){t.cycleTypeOptions=e.data}))},methods:{open:function(){var t=this;"0"!=this.rowId?getPfmcCycle(this.cycleId).then((function(e){"0"===e.code?t.form=e.data:t.msgError(e.msg)})).catch((function(e){t.msgError(e)})):Object(o["getGroupInfo"])(this.groupId).then((function(e){"0"===e.code?t.formSetFieldList=e.data.formSetSection.formSetFieldList:t.msgError(e.msg)}))},cancel:function(){this.show=!1,this.reset()},reset:function(){this.resetForm("form")},submitForm:function(){var t=this;this.$refs["form"].validate((function(e){e&&(void 0!==t.form.cycleId?updatePfmcCycle(t.form).then((function(e){"0"===e.code?(t.msgSuccess("修改成功"),t.cancel()):t.msgError(e.msg),cancelBatch})):addPfmcCycle(t.form).then((function(e){"0"===e.code?(t.msgSuccess("新增成功"),t.cancel()):t.msgError(e.msg)})))}))}},watch:{show:function(){0==this.show&&this.$emit("update:visible",!1)},visible:function(){this.show=this.visible}}},a=i,s=n("2877"),u=Object(s["a"])(a,c,r,!1,null,null,null);e["default"]=u.exports},e426:function(t,e,n){"use strict";n.r(e),n.d(e,"getPlanByProcInstId",(function(){return o})),n.d(e,"addPlanItem",(function(){return i})),n.d(e,"startEmpPlan",(function(){return a})),n.d(e,"copyHisPlan",(function(){return s})),n.d(e,"queryApprovers",(function(){return u})),n.d(e,"flowApproval",(function(){return l})),n.d(e,"listPfmcCycle",(function(){return f}));var c=n("b775"),r=n("b854");function o(t){return Object(c["a"])({url:"".concat(r["pfmcExecution"],"/pfmcMakePlan/getPlanByProcInstId/").concat(t),method:"get"})}function i(t){return Object(c["a"])({url:"".concat(r["pfmcExecution"],"/pfmcMakePlan"),method:"post",data:t})}function a(t){return Object(c["a"])({url:"".concat(r["pfmcExecution"],"/pfmcStartPlan/startEmpPlan"),method:"post",data:t})}function s(t){return Object(c["a"])({url:"".concat(r["pfmcExecution"],"/pfmcMakePlan/copyHisPlan"),method:"post",data:t})}function u(t){return Object(c["a"])({url:"".concat(r["pfmcExecution"],"/pfmcMakePlan/queryApprovers/").concat(t),method:"get"})}function l(t){return Object(c["a"])({url:"".concat(r["pfmcExecution"],"/pfmcMakePlan/flowApproval"),method:"post",data:t})}function f(t){return Object(c["a"])({url:"".concat(r["pfmcExecution"],"/pfmcMakePlan/getCycleList"),method:"get",params:t})}}}]);