(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-247de817","chunk-2d21062b","chunk-6b5b3df2","chunk-2d21062b","chunk-d5614324"],{"304f6":function(e,t,r){"use strict";var i=r("4f0b"),n=r.n(i);n.a},4569:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"button-container"},[r("el-button",{attrs:{size:e.size,type:e.type,plain:e.plain,round:e.round,circle:e.circle,disabled:e.disabled,icon:e.icon},on:{click:function(t){e.showDialog=!0}}},[e._v(e._s(e.btnText))]),e._v(" "),r("el-dialog",{ref:"dialog",attrs:{visible:e.showDialog,title:e.title,"close-on-click-modal":!1,"append-to-body":"",width:"700px"},on:{"update:visible":function(t){e.showDialog=t},open:e.open,close:e.handleCancel}},[r("el-form",{ref:"remindForm",attrs:{model:e.remindForm,rules:e.rules}},[r("el-row",[r("el-form-item",e._l(e.remindForm.empList,(function(t){return r("el-tag",{key:t.procInstId,staticStyle:{"margin-right":"10px"},attrs:{closable:""},on:{close:function(r){return e.handleRemoveEmp(t)}}},[e._v(e._s(t.empName+t.cycleName))])})),1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"催办开始时间",prop:"startDate"}},[r("el-date-picker",{model:{value:e.remindForm.startDate,callback:function(t){e.$set(e.remindForm,"startDate",t)},expression:"remindForm.startDate"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"催办结束时间",prop:"endDate"}},[r("el-date-picker",{model:{value:e.remindForm.endDate,callback:function(t){e.$set(e.remindForm,"endDate",t)},expression:"remindForm.endDate"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-form-item",{attrs:{label:"催办方式",prop:"remindType"}},[r("el-radio-group",{model:{value:e.remindForm.remindType,callback:function(t){e.$set(e.remindForm,"remindType",t)},expression:"remindForm.remindType"}},[r("el-radio",{attrs:{label:"sms"}},[e._v("短信")]),e._v(" "),r("el-radio",{attrs:{label:"email"}},[e._v("邮件")])],1)],1)],1),e._v(" "),r("el-row",[r("el-form-item",{attrs:{label:"发送时间",prop:"remindTimeType"}},[r("el-radio-group",{model:{value:e.remindForm.remindTimeType,callback:function(t){e.$set(e.remindForm,"remindTimeType",t)},expression:"remindForm.remindTimeType"}},[r("el-radio",{attrs:{label:"immediate"}},[e._v("即时发送")]),e._v(" "),r("el-radio",{attrs:{label:"timing"}},[e._v("定时发送")])],1),e._v(" "),r("el-time-select",{directives:[{name:"show",rawName:"v-show",value:"timing"===e.remindForm.remindTimeType,expression:"remindForm.remindTimeType==='timing'"}],attrs:{"picker-options":{start:"00:00",step:"01:00",end:"23:00"},clearable:!1},model:{value:e.remindForm.remindTime,callback:function(t){e.$set(e.remindForm,"remindTime",t)},expression:"remindForm.remindTime"}})],1)],1),e._v(" "),r("el-row",[r("el-form-item",{attrs:{label:"催办主题",prop:"remindTitle"}},[r("el-input",{staticStyle:{width:"450px"},attrs:{placeholder:"请输入"},model:{value:e.remindForm.remindTitle,callback:function(t){e.$set(e.remindForm,"remindTitle",t)},expression:"remindForm.remindTitle"}})],1)],1),e._v(" "),r("el-row",[r("el-form-item",{attrs:{label:"催办内容",prop:"remindContent"}},[r("el-input",{staticStyle:{width:"450px"},attrs:{type:"textarea",rows:2,placeholder:"请输入"},model:{value:e.remindForm.remindContent,callback:function(t){e.$set(e.remindForm,"remindContent",t)},expression:"remindForm.remindContent"}})],1)],1)],1),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{plain:"",icon:"el-icon-close"},on:{click:e.handleCancel}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{type:"primary",icon:"el-icon-bank-card"},on:{click:e.handleFinish}},[e._v("确定")])],1)],1)],1)},n=[],o=r("b907"),m={name:"FlowRemind",components:{},props:{size:{type:String,required:!1},type:{type:String,default:"primary"},plain:{type:Boolean,default:!0},round:{type:Boolean,default:!1},circle:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},icon:{type:String,default:"el-icon-bell"},btnText:{type:String,default:"流程催办"},title:{type:String,default:"流程催办"},empList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,total:0,showDialog:!1,deptOptions:void 0,searchList:[],searchSelectedRows:[],resultList:[],resultSelectedRows:[],remindForm:{empList:[],startDate:void 0,endDate:void 0,remindType:void 0,remindTimeType:void 0,remindTime:void 0,remindTitle:void 0,remindContent:void 0},rules:{empList:[{type:"array",required:!0,message:"请选择催办流程",trigger:"change"}],startDate:[{required:!0,message:"开始时间不能为空",trigger:"change"}],endDate:[{required:!0,message:"结束时间不能为空",trigger:"change"}],remindType:[{required:!0,message:"请选择催办方式",trigger:"change"}],remindTimeType:[{required:!0,message:"发送时间不能为空",trigger:"change"}],remindContent:[{required:!0,message:"催办内容不能为空",trigger:"change"}],remindTitle:[{required:!0,message:"催办主题不能为空",trigger:"change"}]}}},created:function(){},mounted:function(){},computed:{},methods:{open:function(){this.remindForm.empList=this.empList},handleRemoveEmp:function(e){this.remindForm.empList=this.remindForm.empList.filter((function(t){return t.procInstId!==e.procInstId}))},handleFinish:function(){var e=this;this.$refs.remindForm.validate((function(t){if(t){if("timing"===e.remindForm.remindTimeType&&!e.remindForm.remindTime)return void e.msgError("请选择发送时间");if(0===e.remindForm.empList.length)return void e.msgError("要催办的流程不能为空");var r=e.remindForm.empList.map((function(e){return e.procInstId}));e.remindForm.procInstIds=r,Object(o["flowRemind"])(e.remindForm).then((function(t){e.loading=!1,"0"===t.code?(e.msgSuccess("催办成功"),e.$emit("select-finish",e.resultList),e.showDialog=!1):e.msgError(t.msg)})).catch((function(t){e.msgError(t)}))}}))},handleCancel:function(){this.reset(),this.$refs.remindForm.clearValidate(),this.showDialog=!1},reset:function(){this.remindForm={empList:[],startDate:void 0,endDate:void 0,remindType:void 0,remindFrequency:void 0,remindTimeType:void 0,remindTime:void 0,remindContent:void 0}}},watch:{}},a=m,d=(r("304f6"),r("2877")),l=Object(d["a"])(a,i,n,!1,null,"40656cca",null);t["default"]=l.exports},"4f0b":function(e,t,r){},b854:function(e,t,r){"use strict";r.r(t),r.d(t,"pfmcSettings",(function(){return i})),r.d(t,"pfmcAsist",(function(){return n})),r.d(t,"pfmcExecution",(function(){return o})),r.d(t,"pfmcEval",(function(){return m}));var i="pfmc-settings",n="pfmc-asist",o="pfmc-execution",m="pfmc-eval"},b907:function(e,t,r){"use strict";r.r(t),r.d(t,"list",(function(){return o})),r.d(t,"searchById",(function(){return m})),r.d(t,"delFlow",(function(){return a})),r.d(t,"flowRemind",(function(){return d})),r.d(t,"exportDetail",(function(){return l}));var i=r("b775"),n=r("b854");function o(e){return Object(i["a"])({url:"".concat(n["pfmcExecution"],"/empPfmcMonitor/list"),method:"post",data:e})}function m(e){return Object(i["a"])({url:"".concat(n["pfmcExecution"],"/empPfmcMonitor/searchById"),method:"post",data:e})}function a(e){return Object(i["a"])({url:"".concat(n["pfmcExecution"],"/empPfmcMonitor/delFlow"),method:"put",data:e})}function d(e){return Object(i["a"])({url:"".concat(n["pfmcExecution"],"/empPfmcMonitor/flowRemind  "),method:"post",data:e})}function l(e){return Object(i["a"])({url:"".concat(n["pfmcExecution"],"/empPfmcMonitorExport/exportDetailZip"),method:"post",data:e,responseType:"blob"})}}}]);