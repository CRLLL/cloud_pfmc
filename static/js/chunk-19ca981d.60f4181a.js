(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19ca981d"],{"2dd3":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{staticClass:"app-container"},[o("el-dialog",{attrs:{title:e.title,visible:e.show,width:"980px","close-on-click-modal":!1},on:{"update:visible":function(t){e.show=t},open:e.open,close:e.cancel}},[o("el-form",{ref:"relationForm",attrs:{inline:!0,model:e.form,rules:e.rules,"label-width":"88px"}},[o("el-form-item",{attrs:{label:"年份",prop:"year"}},[o("el-date-picker",{ref:"yearPicker",attrs:{type:"year",placeholder:"请选择年份",width:"4px",disabled:e.isUpdate},on:{change:e.getCycleList},model:{value:e.form.year,callback:function(t){e.$set(e.form,"year",t)},expression:"form.year"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"考核周期",prop:"cycleId"}},[o("el-select",{attrs:{placeholder:"选择考核周期",disabled:e.isUpdate},model:{value:e.form.cycleId,callback:function(t){e.$set(e.form,"cycleId",t)},expression:"form.cycleId"}},e._l(e.cycleOptions,(function(e){return o("el-option",{key:e.cycleId,attrs:{label:e.cycleName,value:e.cycleId}})})),1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:9}},[o("div",[o("div",{staticClass:"table-top"},[o("el-row",[o("span",[e._v("被考核人列表")]),e._v(" "),!1===e.isUpdate?o("select-emp",{staticClass:"fr",attrs:{plain:"",icon:"el-icon-plus",btnText:"新增"},on:{"select-finish":e.handleSelectEmp}}):e._e()],1)],1),e._v(" "),o("el-table",{ref:"empTable",attrs:{data:e.form.relationVOList,"row-key":"personId","empty-text":"请查询员工",height:"300px"}},[o("el-table-column",{attrs:{label:"部门",prop:"deptName",width:"121","show-overflow-tooltip":!0}}),e._v(" "),o("el-table-column",{attrs:{label:"员工编号",prop:"empNumber",width:"91"}}),e._v(" "),o("el-table-column",{attrs:{label:"姓名",prop:"empName",width:"91"}}),e._v(" "),!1===e.isUpdate?o("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top",enterable:!1}},[o("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(o){return e.deleteRow(t.$index,e.form.relationVOList)}}})],1)]}}],null,!1,38030880)}):e._e()],1),e._v(" "),o("pagination",{directives:[{name:"show",rawName:"v-show",value:e.empTotal>0,expression:"empTotal>0"}],attrs:{total:e.empTotal,small:"",layout:"sizes, prev, pager, next"}})],1)]),e._v(" "),o("el-col",{attrs:{span:1}},[o("div",{staticStyle:{width:"5px"}},[e._v(" ")])]),e._v(" "),o("el-col",{attrs:{span:13}},[o("div",[o("div",{staticClass:"table-top"},[o("el-row",[o("span",[e._v("考核人列表")]),e._v(" "),o("select-emp",{staticClass:"fr",attrs:{plain:"",icon:"el-icon-plus",btnText:"新增"},on:{"select-finish":e.handleSelectEvalPer}})],1)],1),e._v(" "),o("el-table",{ref:"empTable",attrs:{data:e.form.evalPersonVOList,"row-key":"personId","empty-text":"请查询员工",height:"300px"}},[o("el-table-column",{attrs:{label:"员工编号",prop:"empNumber",width:"120"}}),e._v(" "),o("el-table-column",{attrs:{label:"姓名",prop:"empName",width:"100"}}),e._v(" "),o("el-table-column",{attrs:{label:"权重",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{prop:"evalPersonVOList."+t.$index+".weight",rules:e.rules.weight}},[o("el-input",{attrs:{type:"number",min:0,max:100},model:{value:t.row.weight,callback:function(o){e.$set(t.row,"weight",e._n(o))},expression:"scope.row.weight"}})],1)]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"审批顺序",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{staticStyle:{"margin-right":"5px"}},[e._v(e._s(t.row.orderNumber))]),e._v(" "),o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"上移",placement:"top",enterable:!1}},[o("el-button",{attrs:{type:"text",icon:"el-icon-upload2"},on:{click:function(o){return o.stopPropagation(),e.moveUpTable(t.$index,t.row,e.form.evalPersonVOList)}}})],1),e._v(" "),o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"下移",placement:"top",enterable:!1}},[o("el-button",{staticStyle:{"margin-left":"0"},attrs:{type:"text",icon:"el-icon-download"},on:{click:function(o){return o.stopPropagation(),e.moveDownTable(t.$index,t.row,e.form.evalPersonVOList)}}})],1)]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"目标审核",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-checkbox",{model:{value:t.row.targetFlag,callback:function(o){e.$set(t.row,"targetFlag",o)},expression:"scope.row.targetFlag"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"考核打分",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-checkbox",{model:{value:t.row.scoreFlag,callback:function(o){e.$set(t.row,"scoreFlag",o)},expression:"scope.row.scoreFlag"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top",enterable:!1}},[o("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(o){return e.deleteRow(t.$index,e.form.evalPersonVOList)}}})],1)]}}])})],1),e._v(" "),o("pagination",{directives:[{name:"show",rawName:"v-show",value:e.evalPerTotal>0,expression:"evalPerTotal>0"}],attrs:{total:e.evalPerTotal,small:"",layout:"sizes, prev, pager, next"}})],1)])],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{plain:"",icon:"el-icon-close"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary",icon:"el-icon-bank-card"},on:{click:e.submitForm}},[e._v("保存")])],1)],1)],1)},a=[],l=(o("c5f6"),o("ac6a"),o("e31f")),n=o("304f"),i={components:{SelectEmp:function(){return Promise.all([o.e("chunk-5c5c1f08"),o.e("chunk-457809e8")]).then(o.bind(null,"2cc9"))}},props:{visible:{type:Boolean,default:!1},isUpdate:{type:Boolean,default:!1},title:{type:String,default:""},queryYear:{type:Date,default:function(){return new Date}},queryCycleId:{type:String,default:""},relationId:{type:String,default:"0"}},data:function(){return{show:!1,year:new Date,empTotal:0,evalPerTotal:0,cycleOptions:[],form:{year:void 0,cycleId:void 0,cycleList:[],relationVOList:[],evalPersonVOList:[]},rules:{year:[{required:!0,message:"年份不能为空",trigger:"blur"}],cycleId:[{required:!0,message:"考核周期不能为空",trigger:"blur"}],weight:[{type:"number",min:0,max:100,message:"权重为0-100之间的数字",trigger:"blur"}]}}},created:function(){},methods:{handleRow:function(e){return row},handleSelectEmp:function(e){var t=this;e.forEach((function(e){var o={personId:e.empId,deptName:e.orgName,empName:e.empName,empNumber:e.empNumber},r=!1,a=!1;t.form.relationVOList.forEach((function(t){t.personId!=e.empId||(r=!0)})),t.form.evalPersonVOList.forEach((function(o){if(o.personId==e.empId)return t.msgError("考核人与被考核人不能为同一人"),void(a=!0)})),r||a||t.form.relationVOList.push(o)}))},handleSelectEvalPer:function(e){var t=this,o=this.form.evalPersonVOList.length+1;e.forEach((function(e){var r={personId:e.empId,empNumber:e.empNumber,empName:e.empName,orderNumber:o};o++;var a=!1,l=!1;t.form.evalPersonVOList.forEach((function(t){t.personId!=e.empId||(a=!0)})),t.form.relationVOList.forEach((function(o){if(o.personId==e.empId)return t.msgError("考核人与被考核人不能为同一人"),void(l=!0)})),a||l||t.form.evalPersonVOList.push(r)}))},deleteRow:function(e,t){t.splice(e,1)},moveUpTable:function(e,t,o){if(e>0){var r=o[e-1];r.orderNumber++,o[e].orderNumber--,o.splice(e-1,1),o.splice(e,0,r)}else this.$message({type:"onfo",message:"已经是第一条，不可上移"})},moveDownTable:function(e,t,o){if(e+1!==o.length){var r=o[e+1];r.orderNumber--,o[e].orderNumber++,o.splice(e+1,1),o.splice(e,0,r)}else this.$message({type:"onfo",message:"已经是最后一条，不可下移"})},getCycleList:function(){var e=this,t={cycleYear:this.form.year.getFullYear(),pageNum:1,pageSize:0};Object(n["listPfmcCycle"])(t).then((function(t){"0"===t.code?e.cycleOptions=t.data.list:e.msgError("查询考核周期列表失败")})).catch((function(t){e.msgError(t)}))},open:function(){var e=this;"0"!=this.relationId?Object(l["getPfmcRelation"])(this.relationId).then((function(t){"0"===t.code?(e.form=t.data,e.cycleOptions=e.form.cycleList):e.msgError(t.msg)})).catch((function(t){e.msgError(erro)})):(this.form.year=this.queryYear,this.form.cycleId=this.queryCycleId,this.getCycleList())},cancel:function(){this.show=!1},reset:function(){this.resetForm("relationForm"),this.form.relationVOList=[],this.form.evalPersonVOList=[]},submitForm:function(){var e=this;this.$refs["relationForm"].validate((function(t){t&&e.validateForm()&&("0"!==e.relationId?Object(l["updatePfmcRelation"])(e.form).then((function(t){"0"===t.code?(e.msgSuccess("修改成功"),e.cancel()):e.msgError(t.msg)})):Object(l["addPfmcRelation"])(e.form).then((function(t){"0"===t.code?(e.msgSuccess("新增成功"),e.cancel()):e.msgError(t.code)})))}))},validateForm:function(){var e=0,t=0,o=!0,r=0,a="";return this.form.evalPersonVOList.forEach((function(l){return Number(l.weight)&&(r+=Number(l.weight)),1==l.scoreFlag&&e++,1==l.targetFlag&&t++,0==l.scoreFlag&&0==l.targetFlag?(o=!1,void(a="目标审核和考核打分至少勾选一个，请修改")):1==l.scoreFlag&&null==l.weight?(o=!1,a="设置为考核打分人的，权重不能为空，请修改",!1):void 0})),o?e>4||t>4?(this.msgError("目标审核和考核打分每种最多可维护4位人员，请修改"),!1):!(e>0&&100!=r)||(this.msgError("权重总和不等于100，请修改"),!1):(this.msgError(a),!1)}},watch:{show:function(){0==this.show&&this.$emit("update:visible",!1)},visible:function(){this.show=this.visible}}},s=i,c=(o("d5e0"),o("2877")),u=Object(c["a"])(s,r,a,!1,null,"12d29348",null);t["default"]=u.exports},3120:function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"ihr-wrapper"},[o("div",{staticClass:"top-query"},[o("el-form",{ref:"queryForm",attrs:{model:e.queryParams,rules:e.rules,"label-width":"78px"}},[o("el-row",[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"年份"}},[o("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"year",placeholder:"选择年份",clearable:!1},on:{change:e.getCycleList},model:{value:e.queryParams.year,callback:function(t){e.$set(e.queryParams,"year",t)},expression:"queryParams.year"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"考核周期"}},[o("el-select",{attrs:{placeholder:"全部"},on:{change:e.getGroupList},model:{value:e.queryParams.cycleId,callback:function(t){e.$set(e.queryParams,"cycleId",t)},expression:"queryParams.cycleId"}},e._l(e.cycleOptions,(function(e){return o("el-option",{key:e.cycleId,attrs:{label:e.cycleName,value:e.cycleId}})})),1)],1)],1),e._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"部门"}},[o("tree-select",{staticClass:"dept-tree-select",attrs:{options:e.deptOptions,multiple:"",placeholder:"全部","default-expand-level":1},model:{value:e.queryParams.deptId,callback:function(t){e.$set(e.queryParams,"deptId",t)},expression:"queryParams.deptId"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"人员群组"}},[o("el-select",{attrs:{clearable:"",placeholder:"全部"},model:{value:e.queryParams.groupId,callback:function(t){e.$set(e.queryParams,"groupId",t)},expression:"queryParams.groupId"}},e._l(e.groupOptions,(function(e){return o("el-option",{key:e.groupId,attrs:{label:e.groupName,value:e.groupId}})})),1)],1)],1),e._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"员工编号"}},[o("el-input",{attrs:{clearable:"",placeholder:"请输入..."},model:{value:e.queryParams.empNumber,callback:function(t){e.$set(e.queryParams,"empNumber",t)},expression:"queryParams.empNumber"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"姓名"}},[o("el-input",{attrs:{clearable:"",placeholder:"请输入..."},model:{value:e.queryParams.empName,callback:function(t){e.$set(e.queryParams,"empName",t)},expression:"queryParams.empName"}})],1)],1)],1)],1),e._v(" "),o("div",[o("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleQuery}},[e._v("查询")]),e._v(" "),o("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-refresh-left"},on:{click:e.handleReset}},[e._v("重置")])],1)],1),e._v(" "),o("div",{staticClass:"main-table"},[o("div",{staticClass:"button-flex"},[o("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:relation:add"],expression:"['system:relation:add']"}],attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleAdd}},[e._v("新增")]),e._v(" "),o("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:relation:add"],expression:"['system:relation:add']"}],attrs:{type:"primary",plain:"",icon:"el-icon-document"},on:{click:e.handleCopy}},[e._v("复制")]),e._v(" "),o("import-data",{attrs:{"task-id":"pfmc_basicsettings_relation"},on:{"import-finished":e.importFinished}}),e._v(" "),o("export-data",{attrs:{"task-id":"pfmc_basicsettings_relation",params:e.queryParams,"before-download":e.handleExport,disabled:0==this.total}}),e._v(" "),o("el-button",{attrs:{type:"danger",plain:"",icon:"el-icon-delete",disabled:0==this.selectedRows.length},on:{click:e.handleBatchDel}},[e._v("删除")])],1),e._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.relationList,"row-key":"relationId"},on:{"selection-change":e.selectedChange}},[o("el-table-column",{attrs:{type:"selection",fixed:"left"}}),e._v(" "),o("el-table-column",{attrs:{label:"序号",type:"index"}}),e._v(" "),o("el-table-column",{attrs:{label:"考核周期",prop:"cycleName","min-width":"165","show-overflow-tooltip":!0}}),e._v(" "),o("el-table-column",{attrs:{label:"部门",prop:"deptName","min-width":"155","show-overflow-tooltip":!0}}),e._v(" "),o("el-table-column",{attrs:{label:"员工编号",prop:"empNumber",width:"85"}}),e._v(" "),o("el-table-column",{attrs:{label:"姓名",prop:"empName",width:"85"}}),e._v(" "),o("el-table-column",{attrs:{label:"目标审核人",prop:"targetPersons",width:"170"}}),e._v(" "),o("el-table-column",{attrs:{label:"考核打分人",prop:"scorePersons",width:"170"}}),e._v(" "),o("el-table-column",{attrs:{label:"权重",prop:"weights",width:"150"}}),e._v(" "),o("el-table-column",{attrs:{label:"操作",width:"110",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.handleUpdate(t.row)}}},[e._v("编辑")]),e._v(" "),o("el-popconfirm",{staticClass:"el-button-confirm",attrs:{title:"您确定要删除吗？"},on:{onConfirm:function(o){return e.handleDelete(t.row)}}},[o("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),e._v(" "),o("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],staticClass:"pagination-wrap",attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1),e._v(" "),o("view-edit-dialog",{attrs:{visible:e.open,title:e.title,"relation-id":e.relationId,"is-update":e.isUpdate,"query-year":e.queryParams.year,"query-cycle-id":e.queryParams.cycleId},on:{"update:visible":function(t){e.open=t}}}),e._v(" "),o("record-copy-dialog",{attrs:{visible:e.openRecCopy,"relation-ids":e.relationIds},on:{"update:visible":function(t){e.openRecCopy=t}}}),e._v(" "),o("norecord-copy-dialog",{attrs:{visible:e.openNoRecCopy},on:{"update:visible":function(t){e.openNoRecCopy=t}}})],1)},a=[],l=(o("ac6a"),o("542c"),o("fcb7")),n=o("2dd3"),i=o("e385"),s=o("310f"),c=o("304f"),u=o("4a47"),d=o("e31f"),p={components:{TreeSelect:function(){return o.e("chunk-5c5c1f08").then(o.t.bind(null,"7026",7))},ImportData:function(){return o.e("chunk-a7c7fc38").then(o.bind(null,"77dc"))},ExportData:function(){return o.e("chunk-336f6cc4").then(o.bind(null,"2ee5"))},viewEditDialog:n["default"],recordCopyDialog:i["default"],norecordCopyDialog:s["default"]},data:function(){return{deptOptions:void 0,cycleOptions:[],groupOptions:[],loading:!1,total:0,relationList:[],title:"",open:!1,relationId:"0",isUpdate:!1,queryParams:{pageNum:1,pageSize:10,year:new Date,cycleId:void 0,deptId:[],groupId:void 0,empName:void 0,empNumber:void 0},queryYear:new Date,selectedRows:[],openRecCopy:!1,openNoRecCopy:!1,relationIds:"",rules:{year:[{required:!0,message:"年份不能为空",trigger:"blur"}],cycleId:[{required:!0,message:"考核周期不能为空",trigger:"blur"}]},loadTimes:0}},created:function(){this.getTreeselect(),this.getCycleList()},mounted:function(){},methods:{getList:function(){var e=this;this.loading=!0,Object(d["listPfmcRelation"])(this.queryParams).then((function(t){"0"===t.code?(e.relationList=t.data.list,e.total=t.data.total,e.loading=!1):e.msgError("查询考核关系列表失败")}))},getTreeselect:function(){var e=this;Object(l["f"])().then((function(t){e.deptOptions=t.data}))},getCycleList:function(){var e=this;this.queryParams.cycleId="";var t={cycleYear:this.queryParams.year.getFullYear(),pageNum:1,pageSize:0};Object(c["listPfmcCycle"])(t).then((function(t){"0"===t.code?e.cycleOptions=t.data.list:e.msgError("查询考核周期列表失败")})).catch((function(t){e.msgError(t)}))},getGroupList:function(){var e=this;this.queryParams.groupId="";var t={cycleId:this.queryParams.cycleId,pageNum:1,pageSize:0};Object(u["listPfmcGroup"])(t).then((function(t){"0"===t.code?e.groupOptions=t.data.list:e.msgError("查询考核组列表失败")})).catch((function(t){e.msgError(t)}))},handleAdd:function(){this.relationId="0",this.open=!0,this.isUpdate=!1,this.title="添加考核关系"},handleCopy:function(){var e=this;this.selectedRows.length>0?(this.relationIds="",this.selectedRows.forEach((function(t){e.relationIds+=t.relationId+","})),this.openRecCopy=!0):this.openNoRecCopy=!0},importFinished:function(e){e?(this.getList(),this.msgSuccess("导入成功")):this.msgError("导入失败")},handleExport:function(){return!(this.total<=0)||(this.msgInfo("没有结果，无需导出"),!1)},handleReset:function(){this.resetForm("queryForm")},handleQuery:function(){var e=this;this.$refs["queryForm"].validate((function(t){t&&(e.queryParams.pageNum=1,e.getList())}))},handleView:function(e){this.relationId=e.relationId,this.open=!0,this.isUpdate=!1,this.title="查看考核关系"},handleUpdate:function(e){this.relationId=e.relationId,this.open=!0,this.isUpdate=!0,this.title="修改考核关系"},handleDelete:function(e){var t=this;this.loading=!0;var o=e.relationId,r={relationId:o,isDeleted:!0};Object(d["deletePfmcRelation"])(this.addDateRange(r)).then((function(e){t.loading=!1,"0"===e.code?(t.msgSuccess("删除成功"),t.getList()):t.msgError(e.msg)})).catch((function(e){t.loading=!1,t.msgError(e)}))},handleBatchDel:function(){var e=this;this.$confirm("确认删除？").then((function(t){e.loading=!0,e.relationIds="",e.selectedRows.forEach((function(t){e.relationIds+=t.relationId+","}));var o={relationIds:e.relationIds};Object(d["batchDelRelation"])(o).then((function(t){e.loading=!1,"0"===t.code?(e.msgSuccess("删除成功"),e.getList()):e.msgError(t.msg)})).catch((function(t){e.loading=!1,e.msgError(t)}))})).catch((function(){}))},selectedChange:function(e){this.selectedRows=e}},watch:{open:function(){0==this.open&&this.getList()},openRecCopy:function(){0==this.openRecCopy&&this.getList()},openNoRecCopy:function(){0==this.openNoRecCopy&&this.getList()}}},m=p,f=(o("e1bb"),o("2877")),h=Object(f["a"])(m,r,a,!1,null,"4b6f69bb",null);t["default"]=h.exports},"4a47":function(e,t,o){"use strict";o.r(t),o.d(t,"listPfmcGroup",(function(){return l})),o.d(t,"addPfmcGroup",(function(){return n})),o.d(t,"getPfmcGroup",(function(){return i})),o.d(t,"updatePfmcGroup",(function(){return s})),o.d(t,"delPfmcGroup",(function(){return c})),o.d(t,"disablePfmcGroup",(function(){return u})),o.d(t,"changeGroupState",(function(){return d})),o.d(t,"listGroupUsers",(function(){return p}));var r=o("b775"),a=o("b854");function l(e){return Object(r["a"])({url:"".concat(a["pfmcSettings"],"/pfmcBaseGroup/list"),method:"get",params:e})}function n(e){return Object(r["a"])({url:"".concat(a["pfmcSettings"],"/pfmcBaseGroup"),method:"post",data:e})}function i(e){return Object(r["a"])({url:"".concat(a["pfmcSettings"],"/pfmcBaseGroup/").concat(e),method:"get"})}function s(e){return Object(r["a"])({url:"".concat(a["pfmcSettings"],"/pfmcBaseGroup/update"),method:"put",data:e})}function c(e){return Object(r["a"])({url:"".concat(a["pfmcSettings"],"/pfmcBaseGroup/").concat(e),method:"delete"})}function u(e){return Object(r["a"])({url:"".concat(a["pfmcSettings"],"/pfmcBaseGroup/disablePfmcBaseGroup/").concat(e),method:"get"})}function d(e){return Object(r["a"])({url:"".concat(a["pfmcSettings"],"/pfmcBaseGroup/changeGroupState"),method:"put",data:e})}function p(e){return Object(r["a"])({url:"".concat(a["pfmcSettings"],"/pfmcBaseGroup/groupUsers"),method:"get",params:e})}},d5e0:function(e,t,o){"use strict";var r=o("d9b1"),a=o.n(r);a.a},d9b1:function(e,t,o){},e0e8:function(e,t,o){},e1bb:function(e,t,o){"use strict";var r=o("e0e8"),a=o.n(r);a.a},e385:function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container"},[o("el-dialog",{attrs:{title:"复制考核关系",visible:e.show,width:"960px","close-on-click-modal":!1},on:{"update:visible":function(t){e.show=t},close:e.cancel}},[o("el-form",{ref:"recordCopyForm",attrs:{inline:!0,model:e.recordCopyForm,rules:e.rules,"label-width":"88px"}},[o("el-form-item",{attrs:{label:"年份",prop:"year"}},[o("el-date-picker",{attrs:{type:"year",placeholder:"请选择年份",width:"4px"},on:{change:e.getCycleList},model:{value:e.recordCopyForm.year,callback:function(t){e.$set(e.recordCopyForm,"year",t)},expression:"recordCopyForm.year"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"考核周期",prop:"newCycleId"}},[o("el-select",{attrs:{placeholder:"选择考核周期"},model:{value:e.recordCopyForm.newCycleId,callback:function(t){e.$set(e.recordCopyForm,"newCycleId",t)},expression:"recordCopyForm.newCycleId"}},e._l(e.cycleOptions,(function(e){return o("el-option",{key:e.cycleId,attrs:{label:e.cycleName,value:e.cycleId}})})),1)],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{plain:"",icon:"el-icon-close"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary",icon:"el-icon-bank-card"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("保存")])],1)],1),e._v(" "),o("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"提示",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("span",[e._v("是否覆盖已有数据？")]),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){return e.submitForm("insert")}}},[e._v("否")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("update")}}},[e._v("是")])],1)])],1)},a=[],l=o("e31f"),n=o("304f"),i={props:{visible:{type:Boolean,default:!1},relationIds:{type:String,default:""}},data:function(){return{show:!1,loading:!0,dialogVisible:!1,empTotal:0,evalPerTotal:0,cycleOptions:[],recordCopyForm:{newCycleId:void 0,relationIds:""},rules:{year:[{required:!0,message:"年份不能为空",trigger:"blur"}],newCycleId:[{required:!0,message:"考核周期不能为空",trigger:"blur"}]}}},created:function(){},methods:{getCycleList:function(){var e=this;this.recordCopyForm.newCycleId="";var t={cycleYear:this.recordCopyForm.year.getFullYear(),pageNum:1,pageSize:0};Object(n["listPfmcCycle"])(t).then((function(t){"0"===t.code?e.cycleOptions=t.data.list:e.msgError("查询考核周期列表失败")})).catch((function(t){e.msgError(t)}))},cancel:function(){this.show=!1,this.reset()},reset:function(){this.resetForm("recordCopyForm")},submitForm:function(e){var t=this;this.$refs["recordCopyForm"].validate((function(o){o&&(t.dialogVisible=!1,t.loading=!0,t.recordCopyForm.relationIds=t.relationIds,t.recordCopyForm.copyType=e,Object(l["recordCopyRelation"])(t.recordCopyForm).then((function(e){t.loading=!1,"0"===e.code?(t.msgSuccess("复制成功"),t.cancel()):t.msgError(e.msg)})))}))}},watch:{show:function(){0==this.show&&this.$emit("update:visible",!1)},visible:function(){this.show=this.visible}}},s=i,c=o("2877"),u=Object(c["a"])(s,r,a,!1,null,null,null);t["default"]=u.exports}}]);