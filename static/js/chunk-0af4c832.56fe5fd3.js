(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0af4c832"],{"7f22":function(e,t,o){"use strict";var r=o("eea2"),n=o.n(r);n.a},"95da":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"pfmc-import-button-container"},[o("el-button",{attrs:{size:e.size,type:e.type,plain:e.plain,round:e.round,circle:e.circle,disabled:e.disabled,icon:e.icon},on:{click:e.btnClick}},[e._v(e._s(e.btnText?e.btnText:e.isAdd?"新增部门":"修改部门"))]),e._v(" "),o("el-dialog",{ref:"updateOrgDialog",attrs:{visible:e.showDialog,title:e.title?e.title:e.isAdd?"新增部门":"修改部门","close-on-click-modal":!1,"append-to-body":"",width:"500px"},on:{"update:visible":function(t){e.showDialog=t}}},[o("el-form",{ref:"updateOrgForm",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[o("el-form-item",{attrs:{label:e.isAdd?"所属父组织":"原组织名称",prop:"orgId"}},[o("tree-select",{attrs:{options:e.deptOptions,placeholder:"选择部门",disabled:!e.isAdd,"default-expand-level":1},model:{value:e.form.orgId,callback:function(t){e.$set(e.form,"orgId",t)},expression:"form.orgId"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"部门名称",prop:"orgName"}},[o("el-input",{model:{value:e.form.orgName,callback:function(t){e.$set(e.form,"orgName",t)},expression:"form.orgName"}})],1)],1),e._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{plain:"",icon:"el-icon-close"},on:{click:e.handleCancel}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary",icon:"el-icon-bank-card"},on:{click:e.sureBtnClick}},[e._v("确定")])],1)],1)],1)},n=[],i=o("7026"),a=o.n(i),d=(o("542c"),o("2879")),s={name:"UpdateOrg",components:{TreeSelect:a.a},props:{size:{type:String,required:!1},type:{type:String,default:"primary"},plain:{type:Boolean,default:!1},round:{type:Boolean,default:!1},circle:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},icon:{type:String,default:"el-icon-plus"},btnText:{type:String,default:void 0},title:{type:String,default:void 0},isAdd:{type:Boolean,default:!1},orgId:{type:String,default:void 0}},data:function(){return{loading:!1,total:0,showDialog:!1,deptOptions:void 0,form:{orgId:void 0,orgName:void 0},rules:{orgId:[{required:!0,message:"所属父组织为空",trigger:"change"}],orgName:[{required:!0,message:"部门名称为空",trigger:"change"}]}}},created:function(){},mounted:function(){},computed:{},methods:{getTreeselect:function(){var e=this;Object(d["treeselect"])().then((function(t){e.deptOptions=t.data}))},btnClick:function(){this.isAdd||"undefined"!==typeof this.orgId?(this.getTreeselect(),this.form.orgId=this.orgId,this.showDialog=!0):this.msgError("请选择要修改的部门")},sureBtnClick:function(){this.isAdd?this.handleAddOrg():this.handleModifyOrg()},handleAddOrg:function(){var e=this;this.$refs.updateOrgForm.validate((function(t){t&&e.$confirm("确认新增绩效组织?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t={parentOrgId:e.form.orgId,orgName:e.form.orgName};return e.addOrgInfo(t)})).catch((function(){}))}))},addOrgInfo:function(e){var t=this;Object(d["addPfmcOrg"])(e).then((function(e){"0"===e.code?(t.msgSuccess("新增成功"),t.$refs.updateOrgForm.resetFields(),t.$emit("update-finished"),t.showDialog=!1):t.msgError(e.msg)}))},handleModifyOrg:function(){var e=this;this.$refs.updateOrgForm.validate((function(t){t&&e.$confirm("确认修改绩效组织?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t={orgId:e.form.orgId,orgName:e.form.orgName};return e.updateOrgInfo(t)})).catch((function(){}))}))},updateOrgInfo:function(e){var t=this;Object(d["updatePfmcOrg"])(e).then((function(e){"0"===e.code?(t.msgSuccess("修改成功"),t.$refs.updateOrgForm.resetFields(),t.$emit("update-finished"),t.showDialog=!1):t.msgError(e.msg)}))},handleCancel:function(){this.$refs.updateOrgForm.resetFields(),this.showDialog=!1}},watch:{}},l=s,c=(o("7f22"),o("2877")),u=Object(c["a"])(l,r,n,!1,null,"715e2f0d",null);t["default"]=u.exports},eea2:function(e,t,o){}}]);