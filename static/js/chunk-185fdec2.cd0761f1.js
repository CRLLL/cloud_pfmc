(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-185fdec2","chunk-2d216217"],{"2cc9":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-button",{attrs:{size:t.size,type:t.type,plain:t.plain,round:t.round,circle:t.circle,disabled:t.disabled,icon:t.icon},on:{click:function(e){t.showSelectEmpDialog=!0}}},[t._v(t._s(t.btnText))]),t._v(" "),n("el-dialog",{ref:"selectEmpDialog",attrs:{visible:t.showSelectEmpDialog,title:t.title,"close-on-click-modal":!1,"append-to-body":"",width:"800px"},on:{"update:visible":function(e){t.showSelectEmpDialog=e},close:t.handleCancel}},[n("div",{staticClass:"top-query"},[n("el-form",{attrs:{inline:!0,"label-width":"80px"}},[n("el-row",[n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:"部门"}},[n("tree-select",{staticClass:"dept-tree-select",attrs:{options:t.deptOptions,placeholder:"全部",multiple:"","default-expand-level":1},model:{value:t.queryForm.deptIds,callback:function(e){t.$set(t.queryForm,"deptIds",e)},expression:"queryForm.deptIds"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:"员工编号"}},[n("el-input",{attrs:{placeholder:"请输入...",clearable:""},model:{value:t.queryForm.empNumber,callback:function(e){t.$set(t.queryForm,"empNumber",e)},expression:"queryForm.empNumber"}})],1)],1),t._v(" "),n("el-col",{staticClass:"fr text-align-right",attrs:{span:4}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.getEmpList}},[t._v("查找")])],1)],1)],1)],1),t._v(" "),n("div",{staticClass:"main-table"},[n("el-tabs",{attrs:{type:"border-card"}},[n("el-tab-pane",{attrs:{label:"查询结果"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"searchTabel",attrs:{data:t.searchList,"row-key":"empId","empty-text":"请查询员工",height:"300px"},on:{"select-all":t.selectAll,select:t.selectSingle}},[n("el-table-column",{attrs:{type:"selection"}}),t._v(" "),n("el-table-column",{attrs:{label:"序号",type:"index"}}),t._v(" "),n("el-table-column",{attrs:{label:"员工编号",prop:"empNumber"}}),t._v(" "),n("el-table-column",{attrs:{label:"姓名",prop:"empName"}}),t._v(" "),n("el-table-column",{attrs:{label:"部门",prop:"orgName"}}),t._v(" "),n("el-table-column",{attrs:{label:"职位",prop:"positionName"}})],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,layout:"sizes, prev, pager, next",page:t.queryForm.pageNum,limit:t.queryForm.pageSize},on:{"update:page":function(e){return t.$set(t.queryForm,"pageNum",e)},"update:limit":function(e){return t.$set(t.queryForm,"pageSize",e)},pagination:t.getEmpList}})],1),t._v(" "),n("el-tab-pane",{attrs:{label:"已选中员工"+t.resultList.length+"人"}},[n("el-table",{ref:"resultTable",attrs:{data:t.resultList,"row-key":"empId","empty-text":"暂无选中员工",height:"300px"}},[n("el-table-column",{attrs:{label:"序号",type:"index"}}),t._v(" "),n("el-table-column",{attrs:{label:"员工编号",prop:"empNumber"}}),t._v(" "),n("el-table-column",{attrs:{label:"姓名",prop:"empName"}}),t._v(" "),n("el-table-column",{attrs:{label:"部门",prop:"orgName"}}),t._v(" "),n("el-table-column",{attrs:{label:"职位",prop:"positionName"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",width:"90",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){return t.handleUnSel(e.row)}}},[t._v("删除")])]}}])})],1)],1)],1)],1),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{plain:"",icon:"el-icon-close"},on:{click:t.handleCancel}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:t.handleFinish}},[t._v("确定")])],1)])],1)},r=[],l=(n("5df3"),n("4f7f"),n("75fc")),o=(n("ac6a"),n("7026")),s=n.n(o),i=(n("542c"),n("2879")),c=(n("c0c7"),{name:"SelectEmp",components:{TreeSelect:s.a},props:{size:{type:String,default:"mini"},type:{type:String,default:"primary"},plain:{type:Boolean,default:!1},round:{type:Boolean,default:!1},circle:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},icon:{type:String,default:"el-icon-search"},btnText:{type:String,default:""},title:{type:String,default:"选择员工"},empId:{type:String,default:""}},data:function(){return{loading:!1,total:0,showSelectEmpDialog:!1,deptOptions:void 0,searchList:[],resultList:[],queryForm:{pageNum:1,pageSize:10,deptIds:[],empNumber:void 0}}},created:function(){this.getTreeselect()},mounted:function(){},computed:{},methods:{getTreeselect:function(){var t=this;Object(i["treeselect"])().then((function(e){t.deptOptions=e.data}))},getEmpList:function(){var t=this;this.loading=!0,Object(i["listEmp"])(this.queryForm).then((function(e){t.searchList=e.data.list,t.total=e.data.total,t.loading=!1,t.$nextTick((function(){var t=this;this.searchList.forEach((function(e){t.resultList.forEach((function(n){n.empId===e.empId&&t.$refs.searchTabel.toggleRowSelection(e,!0)}))}))}))}))},addSels:function(t,e){t.push.apply(t,Object(l["a"])(e));var n=new Set;return t.reduce((function(t,e){return!n.has(e.empId)&&(n.add(e.empId)&&t.push(e)),t}),[])},delUnSels:function(t,e){return t.filter((function(t){return e.every((function(e){return e.empId!==t.empId}))}))},selectSingle:function(t,e){t.some((function(t){return t.empId===e.empId}))?this.resultList=this.addSels(this.resultList,[e]):this.resultList=this.delUnSels(this.resultList,[e])},selectAll:function(t){0===t.length?this.resultList=this.delUnSels(this.resultList,this.searchList):this.resultList=this.addSels(this.resultList,t)},handleUnSel:function(t){var e=this;this.resultList=this.delUnSels(this.resultList,[t]),this.searchList.forEach((function(n){n.empId===t.empId&&e.$refs.searchTabel.toggleRowSelection(n,!1)}))},handleFinish:function(){this.$emit("select-finish",this.resultList),this.reset(),this.showSelectEmpDialog=!1},handleCancel:function(){this.reset(),this.showSelectEmpDialog=!1},reset:function(){this.queryForm={pageNum:1,pageSize:10,deptIds:[],empNumber:void 0},this.$refs.searchTabel.clearSelection(),this.resultList=[]}},watch:{}}),u=c,d=(n("d217"),n("2877")),p=Object(d["a"])(u,a,r,!1,null,"eead2f14",null);e["default"]=p.exports},"47c7":function(t,e,n){},c0c7:function(t,e,n){"use strict";n.d(e,"h",(function(){return l})),n.d(e,"f",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"k",(function(){return i})),n.d(e,"e",(function(){return c})),n.d(e,"j",(function(){return u})),n.d(e,"d",(function(){return d})),n.d(e,"g",(function(){return p})),n.d(e,"l",(function(){return m})),n.d(e,"m",(function(){return h})),n.d(e,"n",(function(){return f})),n.d(e,"i",(function(){return b})),n.d(e,"c",(function(){return g})),n.d(e,"b",(function(){return v}));var a=n("b775"),r=n("365c");function l(t){return Object(a["a"])({url:"".concat(r["d"],"/user/list"),method:"get",params:t})}function o(t){return Object(a["a"])({url:"".concat(r["d"],"/user/").concat(t),method:"get"})}function s(t){return Object(a["a"])({url:"".concat(r["d"],"/user"),method:"post",data:t})}function i(t){return Object(a["a"])({url:"".concat(r["d"],"/user"),method:"put",data:t})}function c(t){return Object(a["a"])({url:"".concat(r["d"],"/user/").concat(t),method:"delete"})}function u(t,e){var n={userId:t,password:e};return Object(a["a"])({url:"".concat(r["d"],"/user/resetPwd"),method:"put",data:n})}function d(t,e){var n={userId:t,status:e};return Object(a["a"])({url:"".concat(r["d"],"/user/changeStatus"),method:"put",data:n})}function p(){return Object(a["a"])({url:"".concat(r["d"],"/user/profile"),method:"get"})}function m(t){return Object(a["a"])({url:"".concat(r["d"],"/user/profile"),method:"put",data:t})}function h(t,e){var n={oldPassword:t,newPassword:e};return Object(a["a"])({url:"".concat(r["d"],"/user/profile/updatePwd"),method:"put",params:n})}function f(t){return Object(a["a"])({url:"".concat(r["d"],"/user/profile/avatar"),method:"post",data:t})}function b(t){return Object(a["a"])({url:"".concat(r["d"],"/user/listUserRole"),method:"get",params:t})}function g(t){return Object(a["a"])({url:"".concat(r["d"],"/user/batchSaveUserRole"),method:"post",data:t})}function v(t){return Object(a["a"])({url:"".concat(r["d"],"/user/batchDeleteUserRole"),method:"put",data:t})}},d217:function(t,e,n){"use strict";var a=n("47c7"),r=n.n(a);r.a}}]);