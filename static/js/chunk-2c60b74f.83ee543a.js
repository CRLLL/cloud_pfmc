(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c60b74f","chunk-2d21062b","chunk-b5d27614","chunk-04bac318","chunk-6b5c8887","chunk-2d21062b","chunk-0e63e46e"],{"2f21":function(e,t,i){"use strict";var l=i("79e5");e.exports=function(e,t){return!!e&&l((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},"333a":function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pfmc-import-button-container"},[i("el-button",{attrs:{size:e.size,type:e.type,plain:e.plain,round:e.round,circle:e.circle,disabled:e.disabled,icon:e.icon},on:{click:function(t){e.showDialog=!0}}},[e._v(e._s(e.btnText))]),e._v(" "),i("el-dialog",{ref:"selectEmpDialog",attrs:{visible:e.showDialog,title:e.title,"close-on-click-modal":!1,"append-to-body":"",width:"90%"},on:{"update:visible":function(t){e.showDialog=t},open:e.open,close:e.close}},[i("div",{staticClass:"app-container"},[i("el-form",[i("el-row",[i("el-col",{attrs:{span:8}},[i("span",{staticStyle:{"font-weight":"bold"}},[e._v("被考核人信息")])])],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"员工编号："}},[i("span",[e._v(e._s(e.oldPlan.empNumber))])])],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"姓名："}},[i("span",[e._v(e._s(e.oldPlan.empName))])])],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"部门："}},[i("span",[e._v(e._s(e.oldPlan.orgName))])])],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"考核周期："}},[i("span",[e._v(e._s(e.oldPlan.cycleName))])])],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"目标审核人："}},[i("span",[e._v(e._s(e.evalNames))])])],1)],1)],1),e._v(" "),[i("div",[i("el-collapse",{ref:"previewContain",model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},e._l(e.itemSectionList,(function(t,l){return i("el-collapse-item",{key:t.groupId,attrs:{name:t.groupId}},[i("template",{slot:"title"},[i("div",{staticStyle:{width:"100%"},on:{click:function(e){}}},[i("el-row",[i("el-col",{attrs:{span:15}},[i("div",{staticStyle:{float:"left","margin-top":"13px",width:"150px","font-weight":"bold"}},[e._v(e._s(t.sectionName))])]),e._v(" "),i("el-col",{attrs:{span:9}},[i("div",{staticStyle:{"margin-top":"10px"}},[!0!==e.isGroupWt||"quantity"!==t.sectionType&&"quality"!==t.sectionType?e._e():["fillPlan"===e.flowParams.TASK_DEF_KEY_&&"1"===e.flowParams.taskType?[i("span",{},[e._v("组间权重：")]),e._v(" "),i("el-input",{staticStyle:{width:"40%"},nativeOn:{click:function(e){e.stopPropagation()}},model:{value:t.wt,callback:function(i){e.$set(t,"wt",i)},expression:"apply.wt"}}),e._v(" "),i("span",[e._v("%")])]:[i("b",[e._v("组间权重：")]),e._v(" "),i("span",[e._v(e._s(t.wt)+"%")])]]],2)])],1)],1)]),e._v(" "),i("div",{staticStyle:{width:"100%"}},["fillPlan"===e.flowParams.TASK_DEF_KEY_&&"1"===e.flowParams.taskType?[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"tree-props":{children:"children",hasChildren:"hasChildren"},"empty-text":" ","row-key":e.getRowKeys,"expand-row-keys":e.expands,"show-summary":t.showGroupWt,"summary-method":e.getTotal},on:{"current-change":e.toggleRowExpansion}},[e._v("\n                    >\n                    "),i("el-table-column",{attrs:{label:"序号",align:"center",type:"index",width:"50"}}),e._v(" "),e._l(t.itemFieldList,(function(t,l){return i("el-table-column",{key:l,attrs:{prop:t.prop,width:t.width,label:t.fieldName,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(l){return["select"===t.fieldType?i("div",[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:!l.row[t.prop].isEdit,readonly:!0},model:{value:l.row[t.prop].itemValue,callback:function(i){e.$set(l.row[t.prop],"itemValue",i)},expression:"scope.row[item.prop].itemValue"}},e._l(t.selectValue,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1):"date"===t.fieldType?i("div",[i("el-date-picker",{staticStyle:{width:"100%",height:"100%","line-height":"100%"},attrs:{type:"date",placeholder:"选择日期",disabled:!l.row[t.prop].isEdit,readonly:!0},model:{value:l.row[t.prop].itemValue,callback:function(i){e.$set(l.row[t.prop],"itemValue",i)},expression:"scope.row[item.prop].itemValue"}})],1):"number"===t.fieldType?i("div",[i("el-input",{staticStyle:{width:"100%",height:"100%","line-height":"100%"},attrs:{disabled:!l.row[t.prop].isEdit,type:"number",readonly:!0},model:{value:l.row[t.prop].itemValue,callback:function(i){e.$set(l.row[t.prop],"itemValue",e._n(i))},expression:"scope.row[item.prop].itemValue"}})],1):"longText"===t.fieldType?i("div",[i("el-input",{staticStyle:{width:"100%",height:"100%","line-height":"100%"},attrs:{disabled:!l.row[t.prop].isEdit,type:"textarea",readonly:!0},model:{value:l.row[t.prop].itemValue,callback:function(i){e.$set(l.row[t.prop],"itemValue",i)},expression:"scope.row[item.prop].itemValue"}})],1):i("div",[i("el-input",{staticStyle:{width:"100%",height:"100%","line-height":"100%"},attrs:{disabled:!l.row[t.prop].isEdit,type:"text",readonly:!0},model:{value:l.row[t.prop].itemValue,callback:function(i){e.$set(l.row[t.prop],"itemValue",i)},expression:"scope.row[item.prop].itemValue"}})],1)]}}],null,!0)})})),e._v(" "),0==e.widthPerIsShow?i("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(l){return[i("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[e._l(t.expendFieldList,(function(t,o){return[i("el-row",[i("el-form-item",{attrs:{label:t.fieldName,prop:t.prop}},["select"===t.fieldType?i("div",[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",readonly:!0},model:{value:l.row[t.prop].itemValue,callback:function(i){e.$set(l.row[t.prop],"itemValue",i)},expression:"props.row[item.prop].itemValue"}},e._l(t.selectValue,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1):"date"===t.fieldType?i("div",[i("el-date-picker",{staticStyle:{width:"100%",height:"100%","line-height":"100%"},attrs:{type:"date",placeholder:"选择日期",readonly:!0},model:{value:l.row[t.prop].itemValue,callback:function(i){e.$set(l.row[t.prop],"itemValue",i)},expression:"props.row[item.prop].itemValue"}})],1):"number"===t.fieldType?i("div",[i("el-input",{staticStyle:{width:"100%",height:"100%","line-height":"100%"},attrs:{type:"number",readonly:!0},model:{value:l.row[t.prop].itemValue,callback:function(i){e.$set(l.row[t.prop],"itemValue",e._n(i))},expression:"props.row[item.prop].itemValue"}})],1):"longText"===t.fieldType?i("div",[i("el-input",{staticStyle:{width:"100%",height:"100%","line-height":"100%"},attrs:{type:"textarea",readonly:!0},model:{value:l.row[t.prop].itemValue,callback:function(i){e.$set(l.row[t.prop],"itemValue",i)},expression:"props.row[item.prop].itemValue"}})],1):i("div",[i("el-input",{staticStyle:{width:"100%",height:"100%","line-height":"100%"},attrs:{type:"text",readonly:!0},model:{value:l.row[t.prop].itemValue,callback:function(i){e.$set(l.row[t.prop],"itemValue",i)},expression:"props.row[item.prop].itemValue"}})],1)])],1)]}))],2)]}}],null,!0)}):e._e()],2)]:[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"empty-text":" ","row-key":e.getRowKeys,"expand-row-keys":e.expands,"show-summary":t.showGroupWt,"summary-method":e.getTotal},on:{"current-change":e.toggleRowExpansion}},[e._v("\n                    >\n                    "),i("el-table-column",{attrs:{label:"序号",align:"center",type:"index"}}),e._v(" "),e._l(t.itemFieldList,(function(t,l){return i("el-table-column",{key:l,attrs:{prop:t.prop,width:t.width,label:t.fieldName},scopedSlots:e._u([{key:"default",fn:function(l){return["date"===t.fieldType?i("div",[i("span",[e._v(e._s(l.row[t.prop].itemValue.substring(0,l.row[t.prop].itemValue.lastIndexOf("T"))))])]):i("div",[e._v(e._s(l.row[t.prop].itemValue))])]}}],null,!0)})})),e._v(" "),0==e.widthPerIsShow?i("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(l){return[i("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[e._l(t.expendFieldList,(function(t,o){return[i("el-row",[i("el-form-item",{attrs:{label:t.fieldName,prop:t.prop}},["date"===t.fieldType?i("div",[i("span",[e._v(e._s(l.row[t.prop].itemValue.substring(0,l.row[t.prop].itemValue.lastIndexOf("T"))))])]):i("div",[i("span",[e._v(e._s(l.row[t.prop].itemValue))])])])],1)]}))],2)]}}],null,!0)}):e._e()],2)]],2)],2)})),1)],1)]],2)])],1)},o=[],a=(i("c5f6"),i("7f7f"),i("28a5"),i("ac6a"),i("55dd"),i("bd86")),r=i("e426"),n={name:"ViewPlanDetail",components:{},props:{size:{type:String,required:!1},type:{type:String,default:"primary"},plain:{type:Boolean,default:!1},round:{type:Boolean,default:!1},circle:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},icon:{type:String,default:""},btnText:{type:String,default:"详细"},title:{type:String,default:"查看流程页面"},procInstId:{type:String,default:void 0}},data:function(){var e;return e={loading:!1,total:0,showDialog:!1,planId:"",formId:"",nextNodeCode:"",lastEvalFlag:!1,isGroupWt:!1,widthPerIsShow:!0},Object(a["a"])(e,"showDialog",!1),Object(a["a"])(e,"loading",!0),Object(a["a"])(e,"itemGroupList",[]),Object(a["a"])(e,"itemSectionList",[]),Object(a["a"])(e,"evalNames",""),Object(a["a"])(e,"oldPlan",{}),Object(a["a"])(e,"newPlan",{}),Object(a["a"])(e,"empInfo",{}),Object(a["a"])(e,"cycleInfo",{}),Object(a["a"])(e,"formSetFielsOtherAttr",{}),Object(a["a"])(e,"empId",""),Object(a["a"])(e,"groupId","0"),Object(a["a"])(e,"rowId","0"),Object(a["a"])(e,"form",{}),Object(a["a"])(e,"expands",[]),Object(a["a"])(e,"approverMap",{}),Object(a["a"])(e,"vars",{}),Object(a["a"])(e,"activeNames",[]),Object(a["a"])(e,"rules",{}),Object(a["a"])(e,"flowParams",{TASK_DEF_KEY_:"fillPlan1",taskType:"1"}),e},created:function(){},mounted:function(){},computed:{},methods:{showPfmcTable:function(){var e=this;this.procInstId&&(this.loading=!0,Object(r["getPlanByProcInstId"])(this.procInstId).then((function(t){e.oldPlan=t.data,e.planId=e.oldPlan.planId,e.empId=e.oldPlan.objectId,e.formId=e.oldPlan.formId,e.itemGroupList=e.oldPlan.itemGroupList,e.isGroupWt="1"===e.oldPlan.isHaveGroupWeight,e.widthPerIsShow="1"===e.oldPlan.showType;var i=.9875*e.$refs.previewContain.$el.offsetWidth-50;"fillPlan"===e.taskDefKey&&(i-=100),e.itemSectionList=e.buildItemList(e.itemGroupList,i,e.widthPerIsShow)||[],e.loading=!1})).catch((function(t){e.loading=!1,e.$notify({title:"网络异常",message:t.message,type:"error"})})))},buildItemList:function(e,t,i){var l=this,o=[];if(e&&0!=e.length){for(var a=0;a<e.length;a++){var r=e[a],n=r.formSetSection,s=r.itemRowList,p={},d="quantity"===n.sectionType||"quality"===n.sectionType,c={groupId:r.itemGroupId,sectionName:n.sectionName,sectionType:n.sectionType,showGroupWt:d,formSectionId:n.formSectionId,showOrder:n.showOrder,wt:r.wt,itemFieldList:[],expendFieldList:[],tableData:[]};if(!n.formSetFieldList||0==n.formSetFieldList.length)break;p=this.buildTableTitle(n,i,t),c.itemFieldList=p.titleFields,c.expendFieldList=p.expendFields,c.tableData=this.buildHorizontalData(s,n),o.push(c),o.sort(this.sortNumber),this.activeNames.push(c.groupId)}return this.showSum=!1,this.$nextTick().then((function(){l.showSum=!0})),o}},buildTableTitle:function(e,t,i){var l=[],o=[],a={titleFields:l,expendFields:o};if(t){for(var r=0;r<e.formSetFieldList.length;r++){var n=e.formSetFieldList[r],s=0;"1"==e.widthPerType&&e.formSetFieldList.forEach((function(e){s+=parseInt(e.widthper)}));var p={fieldName:n.fieldName,showOrder:n.showOrder,prop:n.formFieldId,fieldType:n.fieldType,selectValue:"select"===n.fieldType?n.selectValue.split(","):[],width:"1"==e.widthPerType?i*parseInt(n.widthper)/parseInt(s)+"px":n.widthper+"px"};l.push(p),this.formSetFielsOtherAttr[n.formFieldId]=n.otherAttr}l.sort(this.sortNumber)}else for(var d=0;d<e.formSetFieldList.length;d++){var c=e.formSetFieldList[d],u={fieldName:c.fieldName,showOrder:c.showOrder,prop:c.formFieldId,fieldType:c.fieldType,otherAttr:c.otherAttr,selectValue:"select"===c.fieldType?c.selectValue.split(","):[],width:"1"==e.widthPerType?i*parseInt(c.widthper)/100+"px":c.widthper+"px"};"2"==c.otherAttr?(u.width=.5*i+"px",l.push(u)):"3"==c.otherAttr?(u.width=.3*i+"px",l.push(u)):o.push(u),l.sort(this.sortNumber),o.sort(this.sortNumber)}return a},buildHorizontalData:function(e,t){for(var i=[],l=0;e&&l<e.length;l++){for(var o=e[l],a=o?o.itemList:null,r={rowId:o.rowId},n=!1,s=0;s<t.formSetFieldList.length;s++){var p=t.formSetFieldList[s],d=this.getCurItem(a,p.formFieldId,"formFieldId");d&&(r[p.formFieldId]={},"3"!==p.otherAttr||d.itemValue?r[p.formFieldId].itemValue=d.itemValue:r[p.formFieldId].itemValue="0",1==o.isFixed&&"2"===p.otherAttr?r[p.formFieldId].isEdit=!1:r[p.formFieldId].isEdit=!0,"Y"===p.isnotnull&&(this.rules[p.formFieldId]={required:!0,message:p.fieldName+"不能为空",trigger:"blur"}),n=!0)}n&&i.push(r)}return i},getCurItem:function(e,t,i){for(var l=null,o=0;e&&o<e.length;o++){var a=e[o];if(a[i]===t){l=a;break}}return l},sortNumber:function(e,t){return parseInt(e.showOrder)-parseInt(t.showOrder)},handleCopyHis:function(){},getRowKeys:function(e){return e.rowId},getTotal:function(e){var t=this,i=e.columns,l=e.data,o=[];return i.forEach((function(e,i){if(0!==i){var a=l.map((function(t){return t[e.property]}));"3"===t.formSetFielsOtherAttr[e.property]?(o[i]=a.reduce((function(e,t){var i=Number(t.itemValue);return isNaN(i)?e:e+i}),0),o[i]):o[i]=" "}else o[i]="合计"})),o},toggleRowExpansion:function(e){this.expands=[],this.expands.push(e.rowId)},open:function(){this.showPfmcTable()},close:function(){},handleFinish:function(){this.$emit("select-finish",this.resultList),this.reset(),this.showSelectEmpDialog=!1},handleCancel:function(){this.reset(),this.showSelectEmpDialog=!1},reset:function(){this.queryForm={pageNum:1,pageSize:10,deptIds:[],empNumber:void 0},this.resultList=[]}},watch:{}},s=n,p=i("2877"),d=Object(p["a"])(s,l,o,!1,null,"1495402d",null);t["default"]=d.exports},"55dd":function(e,t,i){"use strict";var l=i("5ca1"),o=i("d8e8"),a=i("4bf8"),r=i("79e5"),n=[].sort,s=[1,2,3];l(l.P+l.F*(r((function(){s.sort(void 0)}))||!r((function(){s.sort(null)}))||!i("2f21")(n)),"Array",{sort:function(e){return void 0===e?n.call(a(this)):n.call(a(this),o(e))}})},b854:function(e,t,i){"use strict";i.r(t),i.d(t,"pfmcSettings",(function(){return l})),i.d(t,"pfmcAsist",(function(){return o})),i.d(t,"pfmcExecution",(function(){return a})),i.d(t,"pfmcEval",(function(){return r}));var l="pfmc-settings",o="pfmc-asist",a="pfmc-execution",r="pfmc-eval"},e426:function(e,t,i){"use strict";i.r(t),i.d(t,"getPlanByProcInstId",(function(){return a})),i.d(t,"addPlanItem",(function(){return r})),i.d(t,"startEmpPlan",(function(){return n})),i.d(t,"copyHisPlan",(function(){return s})),i.d(t,"queryApprovers",(function(){return p})),i.d(t,"flowApproval",(function(){return d})),i.d(t,"listPfmcCycle",(function(){return c}));var l=i("b775"),o=i("b854");function a(e){return Object(l["a"])({url:"".concat(o["pfmcExecution"],"/pfmcMakePlan/getPlanByProcInstId/").concat(e),method:"get"})}function r(e){return Object(l["a"])({url:"".concat(o["pfmcExecution"],"/pfmcMakePlan"),method:"post",data:e})}function n(e){return Object(l["a"])({url:"".concat(o["pfmcExecution"],"/pfmcStartPlan/startEmpPlan"),method:"post",data:e})}function s(e){return Object(l["a"])({url:"".concat(o["pfmcExecution"],"/pfmcMakePlan/copyHisPlan"),method:"post",data:e})}function p(e){return Object(l["a"])({url:"".concat(o["pfmcExecution"],"/pfmcMakePlan/queryApprovers/").concat(e),method:"get"})}function d(e){return Object(l["a"])({url:"".concat(o["pfmcExecution"],"/pfmcMakePlan/flowApproval"),method:"post",data:e})}function c(e){return Object(l["a"])({url:"".concat(o["pfmcExecution"],"/pfmcMakePlan/getCycleList"),method:"get",params:e})}}}]);