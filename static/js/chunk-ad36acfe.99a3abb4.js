(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ad36acfe","chunk-2d21062b","chunk-b5d27614","chunk-04bac318","chunk-cf58091e","chunk-6b5ac146","chunk-6b480e81","chunk-2d216217","chunk-2d21062b","chunk-5bb17500"],{1696:function(t,e,r){"use strict";var n=r("83f3"),o=r.n(n);o.a},"2f21":function(t,e,r){"use strict";var n=r("79e5");t.exports=function(t,e){return!!t&&n((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"51a2":function(t,e,r){"use strict";r.r(e),r.d(e,"listProgram",(function(){return i})),r.d(e,"getProgram",(function(){return a})),r.d(e,"updateProgram",(function(){return c})),r.d(e,"updateProgramStatus",(function(){return l})),r.d(e,"addProgram",(function(){return u})),r.d(e,"delProgram",(function(){return s}));var n=r("b775"),o=r("b854");function i(t){return Object(n["a"])({url:"".concat(o["pfmcSettings"],"/pfmcProgram/list"),method:"get",params:t})}function a(t){return Object(n["a"])({url:"".concat(o["pfmcSettings"],"/pfmcProgram/")+t,method:"get"})}function c(t){return Object(n["a"])({url:"".concat(o["pfmcSettings"],"/pfmcProgram/update"),method:"put",data:t})}function l(t){return Object(n["a"])({url:"".concat(o["pfmcSettings"],"/pfmcProgram/updateStatus"),method:"put",data:t})}function u(t){return Object(n["a"])({url:"".concat(o["pfmcSettings"],"/pfmcProgram/add"),method:"post",data:t})}function s(t){return Object(n["a"])({url:"".concat(o["pfmcSettings"],"/pfmcProgram/del"),method:"put",data:t})}},"55dd":function(t,e,r){"use strict";var n=r("5ca1"),o=r("d8e8"),i=r("4bf8"),a=r("79e5"),c=[].sort,l=[1,2,3];n(n.P+n.F*(a((function(){l.sort(void 0)}))||!a((function(){l.sort(null)}))||!r("2f21")(c)),"Array",{sort:function(t){return void 0===t?c.call(i(this)):c.call(i(this),o(t))}})},"81c7":function(t,e,r){"use strict";r.r(e),r.d(e,"listFormSet",(function(){return i})),r.d(e,"addFormSet",(function(){return a})),r.d(e,"getformSet",(function(){return c})),r.d(e,"updateFormSet",(function(){return l})),r.d(e,"delFormSet",(function(){return u})),r.d(e,"disableFormSet",(function(){return s})),r.d(e,"progListByFormId",(function(){return d}));var n=r("b775"),o=r("b854");function i(t){return Object(n["a"])({url:"".concat(o["pfmcSettings"],"/pfmcPresetFormSet/list"),method:"get",params:t})}function a(t){return Object(n["a"])({url:"".concat(o["pfmcSettings"],"/pfmcPresetFormSet"),method:"post",data:t})}function c(t){return Object(n["a"])({url:"".concat(o["pfmcSettings"],"/pfmcPresetFormSet/").concat(t),method:"get"})}function l(t){return Object(n["a"])({url:"".concat(o["pfmcSettings"],"/pfmcPresetFormSet"),method:"put",data:t})}function u(t){return Object(n["a"])({url:"".concat(o["pfmcSettings"],"/pfmcPresetFormSet/").concat(t),method:"delete"})}function s(t){return Object(n["a"])({url:"".concat(o["pfmcSettings"],"/pfmcPresetFormSet/disableFormSet/").concat(t),method:"get"})}function d(t){return Object(n["a"])({url:"".concat(o["pfmcSettings"],"/pfmcPresetFormSet/getProgByFormId/").concat(t),method:"get"})}},"83f3":function(t,e,r){},9494:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-plus"},on:{click:t.handleSetFixItem}},[t._v("分配固定指标")]),t._v(" "),r("el-dialog",{ref:"previewContain",attrs:{visible:t.showDialog,title:t.title,width:"870px","append-to-body":""},on:{"update:visible":function(e){t.showDialog=e},close:t.resetForm}},[[r("el-collapse",{staticStyle:{width:"800px","border-bottom":"1"},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},t._l(t.itemSectionList,(function(e,n){return r("el-collapse-item",{key:e.formSectionId,attrs:{name:n}},[r("template",{slot:"title"},[r("div",{staticStyle:{width:"100%"},on:{click:function(t){}}},[r("div",{staticStyle:{float:"left","margin-top":"13px",width:"150px","font-weight":"bold"}},[t._v(t._s(e.sectionName))]),t._v(" "),r("div",{staticStyle:{float:"right","margin-left":"10px","margin-top":"15px",width:"250px"}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},nativeOn:{click:function(r){return r.stopPropagation(),t.addItemRow(e,n)}}},[t._v("新增固定指标")])],1)])]),t._v(" "),r("div",{staticStyle:{width:"95%"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-key":t.getRowKeys,"expand-row-keys":t.expands},on:{"current-change":t.toggleRowExpansion}},[t._v("\n                :tree-props=\"{children: 'children', hasChildren: 'hasChildren'}\"\n                empty-text=\" \"\n              >\n                "),t._l(e.itemFieldList,(function(e,n){return t.isShowColumn(e)?r("el-table-column",{key:n,attrs:{prop:e.prop,width:e.width,label:e.fieldName,"show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(n){return["select"===e.fieldType?r("div",[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:n.row[e.prop],callback:function(r){t.$set(n.row,e.prop,r)},expression:"scope.row[item.prop]"}},t._l(e.selectValue,(function(t){return r("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1):"date"===e.fieldType?r("div",[r("el-date-picker",{staticStyle:{width:"100%",height:"100%","line-height":"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:n.row[e.prop],callback:function(r){t.$set(n.row,e.prop,r)},expression:"scope.row[item.prop]"}})],1):r("div",[r("el-input",{staticStyle:{width:"100%",height:"100%","line-height":"100%"},attrs:{type:"textarea"},model:{value:n.row[e.prop],callback:function(r){t.$set(n.row,e.prop,r)},expression:"scope.row[item.prop]"}})],1)]}}],null,!0)}):t._e()})),t._v(" "),r("el-table-column",{attrs:{label:"操作",align:"center",width:"80","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(n){return[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top",enterable:!1}},[r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:menu:remove"],expression:"['system:menu:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(r){return t.handleDelRow(n.$index,e)}}})],1)]}}],null,!0)}),t._v(" "),0==t.widthPerIsShow?r("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(n){return[r("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[t._l(e.expendFieldList,(function(e,o){return[r("el-row",[t.isShowColumn(e)?r("el-form-item",{attrs:{label:e.fieldName,prop:e.prop}},["select"===e.fieldType?r("div",[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:n.row[e.prop],callback:function(r){t.$set(n.row,e.prop,r)},expression:"props.row[item.prop]"}},t._l(e.selectValue,(function(t){return r("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1):"date"===e.fieldType?r("div",[r("el-date-picker",{staticStyle:{width:"100%",height:"100%","line-height":"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:n.row[e.prop],callback:function(r){t.$set(n.row,e.prop,r)},expression:"props.row[item.prop]"}})],1):r("div",[r("el-input",{staticStyle:{width:"100%",height:"100%","line-height":"100%"},attrs:{type:"textarea"},model:{value:n.row[e.prop],callback:function(r){t.$set(n.row,e.prop,r)},expression:"props.row[item.prop]"}})],1)]):t._e()],1)]}))],2)]}}],null,!0)}):t._e()],2)],1)],2)})),1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{plain:"",icon:"el-icon-close"},on:{click:t.resetForm}},[t._v("取消")]),t._v(" "),r("el-button",{attrs:{type:"primary",icon:"el-icon-bank-card"},on:{click:t.submitForm}},[t._v("保存")])],1)]],2)],1)},o=[],i=(r("55dd"),r("28a5"),r("7f7f"),r("c0c7"),r("a5fd"),r("51a2")),a=r("81c7"),c={name:"viewPfmcForm",components:{},props:{visible:{type:Boolean,default:!1},size:{type:String,default:"mini"},type:{type:String,default:"primary"},plain:{type:Boolean,default:!0},round:{type:Boolean,default:!1},circle:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},icon:{type:String,default:""},btnText:{type:String,default:"预览表单"},title:{type:String,default:"预览表单"},progId:{type:String,default:""},fixedProgrel:{type:Object,default:function(){return{}}}},data:function(){return{widthPerIsShow:!0,showDialog:!1,loading:!0,formSetSectionList:[],itemSectionList:[],expands:[],activeNames:[]}},created:function(){},mounted:function(){},computed:{},methods:{resetForm:function(){this.itemSectionList=[],this.showDialog=!1},toggleRowExpansion:function(t){this.expands=[],this.expands.push(t.rowId)},getRowKeys:function(t){return t.rowId},isShowColumn:function(t){return t.viewStage<2},handleSetFixItem:function(){this.progId?(this.showPfmcTable(),this.title="分配固定指标",this.showDialog=!0):this.msgError("请先选择考核方案！")},addItemRow:function(t,e){for(var r={},n=0;n<t.itemFieldList.length;n++){var o=t.itemFieldList[n],i=o.prop;r[i]=""}for(var a=0;a<t.expendFieldList.length;a++){var c=t.expendFieldList[a],l=c.prop;r[l]=""}t.tableData||(t.tableData=[]),t.tableData.push(r)},sortNumber:function(t,e){return parseInt(t.showOrder)-parseInt(e.showOrder)},getCurItem:function(t,e,r){for(var n=null,o=0;t&&o<t.length;o++){var i=t[o];if(i[r]===e){n=i;break}}return n},buildTableTitle:function(t,e,r){var n=[],o=[],i={titleFields:n,expendFields:o};if(e){for(var a=0;a<t.formSetFieldList.length;a++){var c=t.formSetFieldList[a],l={fieldName:c.fieldName,showOrder:c.showOrder,prop:c.formFieldId,fieldType:c.fieldType,viewStage:parseInt(c.viewStage),selectValue:"select"===c.fieldType?c.selectValue.split(","):[],width:"1"==t.widthPerType?r*parseInt(c.widthper)/100+"px":c.widthper+"px"};n.push(l)}n.sort(this.sortNumber)}else for(var u=0;u<t.formSetFieldList.length;u++){var s=t.formSetFieldList[u],d={fieldName:s.fieldName,showOrder:s.showOrder,prop:"5"===s.otherAttr?s.empId:s.formFieldId,fieldType:s.fieldType,viewStage:parseInt(s.viewStage),selectValue:"select"===s.fieldType?s.selectValue.split(","):[],width:"1"==t.widthPerType?r*parseInt(s.widthper)/100+"px":s.widthper+"px",otherAttr:s.otherAttr};"2"==s.otherAttr?(d.width=.2*r+"px",n.push(d)):"3"==s.otherAttr?(d.width=.1*r+"px",n.push(d)):"4"==s.otherAttr?(d.width=.2*r+"px",n.push(d)):"5"==s.otherAttr?(d.width=.2*r+"px",n.push(d)):o.push(d),n.sort(this.sortNumber),o.sort(this.sortNumber)}return i},buildHorizontalData:function(t,e){for(var r=[],n=0;t&&n<t.length;n++){var o=t[n];if(o.formSectionId==e.formSectionId){for(var i=o?o.pfmcFixedItems:null,a={},c=!1,l=0;l<e.formSetFieldList.length;l++){var u=e.formSetFieldList[l],s=this.getCurItem(i,u.formFieldId,"formFieldId");s&&(a[u.formFieldId]=s.itemValue,c=!0)}c&&r.push(a)}}return r},buildItemList:function(t,e,r,n){var o=[];if(t&&0!=t.length){for(var i=0;i<t.length;i++){var a=t[i],c={sectionName:a.sectionName,formSectionId:a.formSectionId,showOrder:a.showOrder,itemFieldList:[],expendFieldList:[],tableData:[]};if(!a.formSetFieldList||0==a.formSetFieldList.length)break;var l=this.buildTableTitle(a,n,r);c.itemFieldList=l.titleFields,c.expendFieldList=l.expendFields,c.tableData=this.buildHorizontalData(e,a),o.push(c),o.sort(this.sortNumber),this.activeNames.push(i)}return o}},showPfmcTable:function(){var t=this;this.progId&&(this.loading=!0,Object(i["getProgram"])(this.progId).then((function(e){var r=e.data;Object(a["getformSet"])(r.formId).then((function(e){t.formSetSectionList=e.data.formSetSectionList,t.widthPerIsShow="1"===e.data.showType;var r=t.$refs.previewContain.width;t.itemSectionList=t.buildItemList(t.formSetSectionList,t.fixedProgrel?t.fixedProgrel.pfmcFixedItemRows:null,r,t.widthPerIsShow)||[],t.loading=!1}))})))},handleDelRow:function(t,e){e.tableData.splice(t,1)},submitForm:function(){for(var t={moduleId:this.progId,pfmcFixedItemRows:[]},e=0;e<this.itemSectionList.length;e++)for(var r=this.itemSectionList[e],n=0;n<r.tableData.length;n++){var o=r.tableData[n],i={formSectionId:r.formSectionId,pfmcFixedItems:[]};for(var a in o){var c={formFieldId:a,itemValue:o[a]};i.pfmcFixedItems.push(c)}t.pfmcFixedItemRows.push(i)}this.$emit("handleSave",t),this.resetForm()}},watch:{}},l=c,u=(r("1696"),r("2877")),s=Object(u["a"])(l,n,o,!1,null,"27ec73b8",null);e["default"]=s.exports},a5fd:function(t,e,r){"use strict";r.r(e),r.d(e,"listPfmcEmpByOrgList",(function(){return i})),r.d(e,"listPfmcEmpByGroupList",(function(){return a})),r.d(e,"getFixedProgRelByProgId",(function(){return c})),r.d(e,"addFixedProgRel",(function(){return l})),r.d(e,"startEmpPlan",(function(){return u}));var n=r("b775"),o=r("b854");function i(t){return Object(n["a"])({url:"".concat(o["pfmcExecution"],"/pfmcStartPlan/getPfmcEmpByOrgList"),method:"post",data:t})}function a(t){return Object(n["a"])({url:"".concat(o["pfmcExecution"],"/pfmcStartPlan/getPfmcEmpByGroupList"),method:"post",data:t})}function c(t){return Object(n["a"])({url:"".concat(o["pfmcExecution"],"/pfmcStartPlan/getFixedProgRel/").concat(t),method:"get"})}function l(t){return Object(n["a"])({url:"".concat(o["pfmcExecution"],"/pfmcStartPlan"),method:"post",data:t})}function u(t){return Object(n["a"])({url:"".concat(o["pfmcExecution"],"/pfmcStartPlan/startEmpPlan"),method:"post",data:t})}},b854:function(t,e,r){"use strict";r.r(e),r.d(e,"pfmcSettings",(function(){return n})),r.d(e,"pfmcAsist",(function(){return o})),r.d(e,"pfmcExecution",(function(){return i})),r.d(e,"pfmcEval",(function(){return a}));var n="pfmc-settings",o="pfmc-asist",i="pfmc-execution",a="pfmc-eval"},c0c7:function(t,e,r){"use strict";r.d(e,"h",(function(){return i})),r.d(e,"f",(function(){return a})),r.d(e,"a",(function(){return c})),r.d(e,"k",(function(){return l})),r.d(e,"e",(function(){return u})),r.d(e,"j",(function(){return s})),r.d(e,"d",(function(){return d})),r.d(e,"g",(function(){return p})),r.d(e,"l",(function(){return f})),r.d(e,"m",(function(){return m})),r.d(e,"n",(function(){return h})),r.d(e,"i",(function(){return g})),r.d(e,"c",(function(){return b})),r.d(e,"b",(function(){return w}));var n=r("b775"),o=r("365c");function i(t){return Object(n["a"])({url:"".concat(o["d"],"/user/list"),method:"get",params:t})}function a(t){return Object(n["a"])({url:"".concat(o["d"],"/user/").concat(t),method:"get"})}function c(t){return Object(n["a"])({url:"".concat(o["d"],"/user"),method:"post",data:t})}function l(t){return Object(n["a"])({url:"".concat(o["d"],"/user"),method:"put",data:t})}function u(t){return Object(n["a"])({url:"".concat(o["d"],"/user/").concat(t),method:"delete"})}function s(t,e){var r={userId:t,password:e};return Object(n["a"])({url:"".concat(o["d"],"/user/resetPwd"),method:"put",data:r})}function d(t,e){var r={userId:t,status:e};return Object(n["a"])({url:"".concat(o["d"],"/user/changeStatus"),method:"put",data:r})}function p(){return Object(n["a"])({url:"".concat(o["d"],"/user/profile"),method:"get"})}function f(t){return Object(n["a"])({url:"".concat(o["d"],"/user/profile"),method:"put",data:t})}function m(t,e){var r={oldPassword:t,newPassword:e};return Object(n["a"])({url:"".concat(o["d"],"/user/profile/updatePwd"),method:"put",params:r})}function h(t){return Object(n["a"])({url:"".concat(o["d"],"/user/profile/avatar"),method:"post",data:t})}function g(t){return Object(n["a"])({url:"".concat(o["d"],"/user/listUserRole"),method:"get",params:t})}function b(t){return Object(n["a"])({url:"".concat(o["d"],"/user/batchSaveUserRole"),method:"post",data:t})}function w(t){return Object(n["a"])({url:"".concat(o["d"],"/user/batchDeleteUserRole"),method:"put",data:t})}}}]);