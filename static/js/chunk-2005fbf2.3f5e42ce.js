(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2005fbf2","chunk-2d21062b","chunk-b5d27614","chunk-74c3632e","chunk-5042d952","chunk-04bac318","chunk-cf58091e","chunk-6b5c8887","chunk-6b480e81","chunk-2d216217","chunk-2d21062b"],{"019b":function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));var i=r("b775"),o=r("365c");function n(t,e){return Object(i["a"])({url:"".concat(o["a"],"/rutask/getNextNode?task_id=").concat(t),method:"post",data:e||{}})}},"14d8":function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("workflow-page",{ref:"wfpage",attrs:{"flow-params":t.flowParams,"approver-map":t.approverMap,vars:t.vars},on:{"driven-flow":t.drivenFlow}},[r("div",{staticClass:"app-container"},[r("el-form",[r("el-row",[r("el-col",{attrs:{span:8}},[r("span",{staticStyle:{"font-weight":"bold"}},[t._v("被考核人信息")])])],1),t._v(" "),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"员工编号："}},[r("span",[t._v(t._s(t.oldPlan.empNumber))])])],1),t._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"姓名："}},[r("span",[t._v(t._s(t.oldPlan.empName))])])],1),t._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"部门："}},[r("span",[t._v(t._s(t.oldPlan.orgName))])])],1)],1),t._v(" "),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"考核周期："}},[r("span",[t._v(t._s(t.oldPlan.cycleName))])])],1),t._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"目标审核人："}},[r("span",[t._v(t._s(t.evalNames))])])],1)],1),t._v(" "),r("el-row",{staticStyle:{"margin-top":"-8px","margin-bottom":"8px"}},["fillPlan"===t.flowParams.TASK_DEF_KEY_&&"1"===t.flowParams.taskType?r("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"mini"},on:{click:t.handleCopyHis}},[t._v("复制历史计划")]):t._e()],1)],1),t._v(" "),[r("div",[r("el-collapse",{ref:"previewContain",model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},t._l(t.itemSectionList,(function(e,i){return r("el-collapse-item",{key:e.groupId,attrs:{name:e.groupId}},[r("template",{slot:"title"},[r("div",{staticStyle:{width:"100%"},on:{click:function(t){}}},[r("el-row",[r("el-col",{attrs:{span:15}},[r("div",{staticStyle:{float:"left","margin-top":"13px",width:"150px","font-weight":"bold"}},[t._v(t._s(e.sectionName))])]),t._v(" "),r("el-col",{attrs:{span:4}},[r("div",{staticStyle:{"margin-top":"10px"}},[!0!==t.isGroupWt||"quantity"!==e.sectionType&&"quality"!==e.sectionType?t._e():["fillPlan"===t.flowParams.TASK_DEF_KEY_&&"1"===t.flowParams.taskType?[r("span",{},[t._v("组间权重：")]),r("el-input",{staticStyle:{width:"40%"},nativeOn:{click:function(t){t.stopPropagation()}},model:{value:e.wt,callback:function(r){t.$set(e,"wt",r)},expression:"apply.wt"}}),r("span",[t._v("%")])]:[r("b",[t._v("组间权重：")]),r("span",[t._v(t._s(e.wt)+"%")])]]],2)]),t._v(" "),r("el-col",{attrs:{span:5}},[r("div",{staticStyle:{float:"right","padding-right":"20px","margin-top":"13px"}},["fillPlan"===t.flowParams.TASK_DEF_KEY_&&"1"===t.flowParams.taskType?r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},nativeOn:{click:function(r){return r.stopPropagation(),t.addItemRow(e,i)}}},[t._v("新增")]):t._e()],1)])],1)],1)]),t._v(" "),r("div",{staticStyle:{width:"100%"}},["fillPlan"===t.flowParams.TASK_DEF_KEY_&&"1"===t.flowParams.taskType?[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"tree-props":{children:"children",hasChildren:"hasChildren"},"empty-text":" ","row-key":t.getRowKeys,"expand-row-keys":t.expands,"show-summary":e.showGroupWt,"summary-method":t.getTotal},on:{"current-change":t.toggleRowExpansion}},[t._v("\n                >\n                 "),r("el-table-column",{attrs:{label:"序号",align:"center",type:"index",width:"50"}}),t._v(" "),t._l(e.itemFieldList,(function(e,i){return r("el-table-column",{key:i,attrs:{prop:e.prop,width:e.width,label:e.fieldName,"show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(i){return["select"===e.fieldType?r("div",[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:!i.row[e.prop].isEdit},model:{value:i.row[e.prop].itemValue,callback:function(r){t.$set(i.row[e.prop],"itemValue",r)},expression:"scope.row[item.prop].itemValue"}},t._l(e.selectValue,(function(t){return r("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1):"date"===e.fieldType?r("div",[r("el-date-picker",{staticStyle:{width:"100%",height:"100%","line-height":"100%"},attrs:{type:"date",placeholder:"选择日期",disabled:!i.row[e.prop].isEdit},model:{value:i.row[e.prop].itemValue,callback:function(r){t.$set(i.row[e.prop],"itemValue",r)},expression:"scope.row[item.prop].itemValue"}})],1):"number"===e.fieldType?r("div",[r("el-input",{staticStyle:{width:"100%",height:"100%","line-height":"100%"},attrs:{disabled:!i.row[e.prop].isEdit,type:"number"},model:{value:i.row[e.prop].itemValue,callback:function(r){t.$set(i.row[e.prop],"itemValue",t._n(r))},expression:"scope.row[item.prop].itemValue"}})],1):"longText"===e.fieldType?r("div",[r("el-input",{staticStyle:{width:"100%",height:"100%","line-height":"100%"},attrs:{disabled:!i.row[e.prop].isEdit,type:"textarea"},model:{value:i.row[e.prop].itemValue,callback:function(r){t.$set(i.row[e.prop],"itemValue",r)},expression:"scope.row[item.prop].itemValue"}})],1):r("div",[r("el-input",{staticStyle:{width:"100%",height:"100%","line-height":"100%"},attrs:{disabled:!i.row[e.prop].isEdit,type:"text"},model:{value:i.row[e.prop].itemValue,callback:function(r){t.$set(i.row[e.prop],"itemValue",r)},expression:"scope.row[item.prop].itemValue"}})],1)]}}],null,!0)})})),t._v(" "),r("el-table-column",{attrs:{label:"操作",align:"center",width:"100","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(i){return[1!=i.row.isFixed?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(r){return t.handleDelRow(i.$index,e)}}})],1):t._e(),t._v(" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"上移",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"text",icon:"el-icon-upload2"},on:{click:function(r){return r.stopPropagation(),t.moveUpTable(i.$index,i.row,e.tableData)}}})],1),t._v(" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"下移",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"text",icon:"el-icon-download"},on:{click:function(r){return r.stopPropagation(),t.moveDownTable(i.$index,i.row,e.tableData)}}})],1)]}}],null,!0)}),t._v(" "),0==t.widthPerIsShow?r("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(i){return[r("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[t._l(e.expendFieldList,(function(e,o){return[r("el-row",[r("el-form-item",{attrs:{label:e.fieldName,prop:e.prop}},["select"===e.fieldType?r("div",[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:i.row[e.prop].itemValue,callback:function(r){t.$set(i.row[e.prop],"itemValue",r)},expression:"props.row[item.prop].itemValue"}},t._l(e.selectValue,(function(t){return r("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1):"date"===e.fieldType?r("div",[r("el-date-picker",{staticStyle:{width:"100%",height:"100%","line-height":"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:i.row[e.prop].itemValue,callback:function(r){t.$set(i.row[e.prop],"itemValue",r)},expression:"props.row[item.prop].itemValue"}})],1):"number"===e.fieldType?r("div",[r("el-input",{staticStyle:{width:"100%",height:"100%","line-height":"100%"},attrs:{type:"number"},model:{value:i.row[e.prop].itemValue,callback:function(r){t.$set(i.row[e.prop],"itemValue",t._n(r))},expression:"props.row[item.prop].itemValue"}})],1):"longText"===e.fieldType?r("div",[r("el-input",{staticStyle:{width:"100%",height:"100%","line-height":"100%"},attrs:{type:"textarea"},model:{value:i.row[e.prop].itemValue,callback:function(r){t.$set(i.row[e.prop],"itemValue",r)},expression:"props.row[item.prop].itemValue"}})],1):r("div",[r("el-input",{staticStyle:{width:"100%",height:"100%","line-height":"100%"},attrs:{type:"text"},model:{value:i.row[e.prop].itemValue,callback:function(r){t.$set(i.row[e.prop],"itemValue",r)},expression:"props.row[item.prop].itemValue"}})],1)])],1)]}))],2)]}}],null,!0)}):t._e()],2)]:[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"empty-text":" ","row-key":t.getRowKeys,"expand-row-keys":t.expands,"show-summary":e.showGroupWt,"summary-method":t.getTotal},on:{"current-change":t.toggleRowExpansion}},[t._v("\n                      >\n                       "),r("el-table-column",{attrs:{label:"序号",align:"center",type:"index"}}),t._v(" "),t._l(e.itemFieldList,(function(e,i){return r("el-table-column",{key:i,attrs:{prop:e.prop,width:e.width,label:e.fieldName},scopedSlots:t._u([{key:"default",fn:function(i){return["date"===e.fieldType?r("div",[r("span",[t._v(t._s(i.row[e.prop].itemValue.substring(0,i.row[e.prop].itemValue.lastIndexOf("T"))))])]):r("div",[t._v(t._s(i.row[e.prop].itemValue))])]}}],null,!0)})})),t._v(" "),0==t.widthPerIsShow?r("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(i){return[r("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[t._l(e.expendFieldList,(function(e,o){return[r("el-row",[r("el-form-item",{attrs:{label:e.fieldName,prop:e.prop}},["date"===e.fieldType?r("div",[r("span",[t._v(t._s(i.row[e.prop].itemValue.substring(0,i.row[e.prop].itemValue.lastIndexOf("T"))))])]):r("div",[r("span",[t._v(t._s(i.row[e.prop].itemValue))])])])],1)]}))],2)]}}],null,!0)}):t._e()],2)]],2)],2)})),1)],1)],t._v(" "),r("view-edit-dialog",{attrs:{visible:t.open,title:t.title,"group-id":t.groupId,"row-id":t.rowId},on:{"update:visible":function(e){t.open=e}}}),t._v(" "),r("copy-his-dialog",{attrs:{visible:t.copyOpen,title:t.title,"plan-id":t.planId,"form-id":t.formId},on:{"update:visible":function(e){t.copyOpen=e}}})],2)])},o=[],n=(r("55dd"),r("28a5"),r("7f7f"),r("ac6a"),r("c5f6"),r("b775"),r("365c"),r("d69e")),a=r("c921"),l=(r("c0c7"),r("e426")),s=(r("019b"),r("51a2"),r("81c7"),{name:"viewPfmcForm",components:{viewEditDialog:n["default"],copyHisDialog:a["default"],WorkflowPage:function(){return r.e("chunk-654254cb").then(r.bind(null,"76d1"))}},props:{flowParams:Object},data:function(){return{open:!1,title:"制定考核计划",copyOpen:!1,procInstId:"",planId:"",formId:"",nextNodeCode:"",lastEvalFlag:!1,isGroupWt:!1,widthPerIsShow:!0,showDialog:!1,loading:!0,itemGroupList:[],itemSectionList:[],evalNames:"",oldPlan:{},newPlan:{},empInfo:{},cycleInfo:{},formSetFielsOtherAttr:{},empId:"",groupId:"0",rowId:"0",getRowKeys:function(t){return t.rowId},form:{},expands:[],approverMap:{},vars:{},activeNames:[],rules:{}}},created:function(){this.procInstId=this.flowParams.PROC_INST_ID_,this.taskDefKey=this.flowParams.TASK_DEF_KEY_,this.showPfmcTable()},mounted:function(){},computed:{},methods:{$_businessVaildCallBack:function(){if("fillPlan"===this.taskDefKey){this.newPlan=this.oldPlan;for(var t=0;t<this.itemSectionList.length;t++){var e=this.itemSectionList[t];this.newPlan.itemGroupList[t].wt=e.wt,this.newPlan.itemGroupList[t].sectionType=e.sectionType,this.newPlan.itemGroupList[t].itemRowList=[];for(var r=0;r<e.tableData.length;r++){var i=e.tableData[r],o={planId:this.planId,itemGroupId:e.groupId,formSectionId:e.formSectionId,isFixed:e.isFixed,rowId:i.rowId,itemList:[]};for(var n in i){if(this.rules[n]&&0==i[n].length)return this.msgError(this.rules[n].message),!1;var a={formFieldId:n,itemValue:i[n].itemValue};"rowId"!==n&&"isEdit"!==n&&o.itemList.push(a)}this.newPlan.itemGroupList[t].itemRowList.push(o)}}if(this.isGroupWt){for(var l=0,s=0;s<this.newPlan.itemGroupList.length;s++){var c=this.newPlan.itemGroupList[s],u=0,d=c.itemRowList;if("quantity"===c.sectionType||"quality"===c.sectionType){for(var p=0;p<d.length;p++){var m=d[p];0==p&&(u=0);for(var f=m.itemList,h=0;h<f.length;h++){var g=f[h];"3"===this.formSetFielsOtherAttr[g.formFieldId]&&(u+=Number(g.itemValue))}if(p==d.length-1&&100!==u)return this.msgError("组内权重和应为100"),!1}l+=Number(c.wt)}}if(100!==l)return this.msgError("组间权重和应为100"),!1}else{for(var w=0,v=0;v<this.newPlan.itemGroupList.length;v++){var b=this.newPlan.itemGroupList[v],y=b.itemRowList;if("quantity"===b.sectionType||"quality"===b.sectionType)for(var I=0;I<y.length;I++)for(var S=y[I],P=S.itemList,_=0;_<P.length;_++){var F=P[_];"3"===this.formSetFielsOtherAttr[F.formFieldId]&&(w+=Number(F.itemValue))}}if(100!==w)return this.msgError("权重和应为100"),!1}}return!0},getTotal:function(t){var e=this,r=t.columns,i=t.data,o=[];return r.forEach((function(t,r){if(0!==r){var n=i.map((function(e){return e[t.property]}));"3"===e.formSetFielsOtherAttr[t.property]?(o[r]=n.reduce((function(t,e){var r=Number(e.itemValue);return isNaN(r)?t:t+r}),0),o[r]):o[r]=" "}else o[r]="合计"})),o},toggleRowExpansion:function(t){this.expands=[],this.expands.push(t.rowId)},resetForm:function(){this.itemSectionList=[],this.loading=!1},moveUpTable:function(t,e,r){if(t>0){var i=r[t-1];r.splice(t-1,1),r.splice(t,0,i)}else this.$message({type:"onfo",message:"已经是第一条，不可上移"})},moveDownTable:function(t,e,r){if(t+1!==r.length){var i=r[t+1];r.splice(t+1,1),r.splice(t,0,i)}else this.$message({type:"onfo",message:"已经是最后一条，不可下移"})},addItemRow:function(t,e){for(var r={},i=0;i<t.itemFieldList.length;i++){var o=t.itemFieldList[i],n=o.prop;r[n]={},"3"==o.otherAttr?r[n].itemValue="0":r[n].itemValue="",r[n].isEdit=!0}for(var a=0;a<t.expendFieldList.length;a++){var l=t.expendFieldList[a],s=l.prop;r[s]={},r[s].itemValue="",r[s].isEdit=!0}t.tableData||(t.tableData=[]),t.tableData.isFixed=!1,t.tableData.push(r)},sortNumber:function(t,e){return parseInt(t.showOrder)-parseInt(e.showOrder)},getCurItem:function(t,e,r){for(var i=null,o=0;t&&o<t.length;o++){var n=t[o];if(n[r]===e){i=n;break}}return i},buildTableTitle:function(t,e,r){var i=[],o=[],n={titleFields:i,expendFields:o};if(e){for(var a=0;a<t.formSetFieldList.length;a++){var l=t.formSetFieldList[a],s=0;"1"==t.widthPerType&&t.formSetFieldList.forEach((function(t){s+=parseInt(t.widthper)}));var c={fieldName:l.fieldName,showOrder:l.showOrder,prop:l.formFieldId,fieldType:l.fieldType,selectValue:"select"===l.fieldType?l.selectValue.split(","):[],width:"1"==t.widthPerType?r*parseInt(l.widthper)/parseInt(s)+"px":l.widthper+"px"};i.push(c),this.formSetFielsOtherAttr[l.formFieldId]=l.otherAttr}i.sort(this.sortNumber)}else for(var u=0;u<t.formSetFieldList.length;u++){var d=t.formSetFieldList[u],p={fieldName:d.fieldName,showOrder:d.showOrder,prop:d.formFieldId,fieldType:d.fieldType,otherAttr:d.otherAttr,selectValue:"select"===d.fieldType?d.selectValue.split(","):[],width:"1"==t.widthPerType?r*parseInt(d.widthper)/100+"px":d.widthper+"px"};"2"==d.otherAttr?(p.width=.5*r+"px",i.push(p)):"3"==d.otherAttr?(p.width=.3*r+"px",i.push(p)):o.push(p),i.sort(this.sortNumber),o.sort(this.sortNumber),this.formSetFielsOtherAttr[d.formFieldId]=d.otherAttr}return n},buildHorizontalData:function(t,e){for(var r=[],i=0;t&&i<t.length;i++){for(var o=t[i],n=o?o.itemList:null,a={rowId:o.rowId},l=!1,s=0;s<e.formSetFieldList.length;s++){var c=e.formSetFieldList[s],u=this.getCurItem(n,c.formFieldId,"formFieldId");u&&(a[c.formFieldId]={},"3"!==c.otherAttr||u.itemValue?a[c.formFieldId].itemValue=u.itemValue:a[c.formFieldId].itemValue="0",1==o.isFixed&&"2"===c.otherAttr?a[c.formFieldId].isEdit=!1:a[c.formFieldId].isEdit=!0,"Y"===c.isnotnull&&(this.rules[c.formFieldId]={required:!0,message:c.fieldName+"不能为空",trigger:"blur"}),l=!0)}l&&r.push(a)}return r},buildItemList:function(t,e,r){var i=this,o=[];if(t&&0!=t.length){for(var n=0;n<t.length;n++){var a=t[n],l=a.formSetSection,s=a.itemRowList,c={},u="quantity"===l.sectionType||"quality"===l.sectionType,d={groupId:a.itemGroupId,sectionName:l.sectionName,sectionType:l.sectionType,showGroupWt:u,formSectionId:l.formSectionId,showOrder:l.showOrder,wt:a.wt,itemFieldList:[],expendFieldList:[],tableData:[]};if(!l.formSetFieldList||0==l.formSetFieldList.length)break;c=this.buildTableTitle(l,r,e),d.itemFieldList=c.titleFields,d.expendFieldList=c.expendFields,d.tableData=this.buildHorizontalData(s,l),o.push(d),o.sort(this.sortNumber),this.activeNames.push(d.groupId)}return this.showSum=!1,this.$nextTick().then((function(){i.showSum=!0})),o}},showPfmcTable:function(){var t=this,e=this.fullScreenLoading("正在加载流程页面，请稍后……");this.procInstId&&(this.loading=!0,Object(l["getPlanByProcInstId"])(this.procInstId).then((function(r){t.oldPlan=r.data,t.planId=t.oldPlan.planId,t.empId=t.oldPlan.objectId,t.formId=t.oldPlan.formId,t.itemGroupList=t.oldPlan.itemGroupList,t.isGroupWt="1"===t.oldPlan.isHaveGroupWeight,t.widthPerIsShow="1"===t.oldPlan.showType;var i=.9875*t.$refs.previewContain.$el.offsetWidth-50;"fillPlan"===t.taskDefKey&&(i-=100),t.itemSectionList=t.buildItemList(t.itemGroupList,i,t.widthPerIsShow)||[],t.loading=!1,Object(l["queryApprovers"])(t.planId).then((function(r){if("0"===r.code){t.lastEvalFlag=r.data["lastEvalFlag"];for(var i=r.data["evalPersonList"],o="",n=1;n<i.length+1;n++){var a=i[n-1].empNumber,l=i[n-1].empName,s={userName:a,nickName:l};t.approverMap["ManAuditEval"+n]=s,o+=1===n?l:","+l}t.evalNames=o,!0===t.lastEvalFlag?t.vars["isEnd"]="1":t.vars["isEnd"]="0"}else t.msgError("获取下一办理人失败");e.close()}))})).catch((function(e){t.loading=!1,t.$notify({title:"网络异常",message:e.message,type:"error"})})))},handleDelRow:function(t,e){e.tableData.splice(t,1)},handleCopyHis:function(){this.copyOpen=!0,this.title="复制历史计划"},drivenFlow:function(t,e){var r=this,i=this.fullScreenLoading("正在驱动流程，请稍后……");e["lastEvalFlag"]=this.lastEvalFlag,e["plan"]=this.newPlan,Object(l["flowApproval"])(e).then((function(e){if(i.close(),"0"===e.code){var o="submit"===t?"提交成功":"退回成功";r.msgSuccess(o),r.closeWorkflowPage(r.flowParams.ihrHome)}else r.$notify({title:"服务调用异常",message:e.msg,type:"error"})})).catch((function(t){try{i.close()}catch(e){}r.$notify({title:"网络异常",message:res.message,type:"error"})})).finally((function(){try{i.close()}catch(t){}}))}},watch:{copyOpen:function(){0==this.copyOpen&&this.showPfmcTable()}}}),c=s,u=(r("82bb"),r("2877")),d=Object(u["a"])(c,i,o,!1,null,"77d93a3b",null);e["default"]=d.exports},"2f21":function(t,e,r){"use strict";var i=r("79e5");t.exports=function(t,e){return!!t&&i((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"425c":function(t,e,r){},"51a2":function(t,e,r){"use strict";r.r(e),r.d(e,"listProgram",(function(){return n})),r.d(e,"getProgram",(function(){return a})),r.d(e,"updateProgram",(function(){return l})),r.d(e,"updateProgramStatus",(function(){return s})),r.d(e,"addProgram",(function(){return c})),r.d(e,"delProgram",(function(){return u}));var i=r("b775"),o=r("b854");function n(t){return Object(i["a"])({url:"".concat(o["pfmcSettings"],"/pfmcProgram/list"),method:"get",params:t})}function a(t){return Object(i["a"])({url:"".concat(o["pfmcSettings"],"/pfmcProgram/")+t,method:"get"})}function l(t){return Object(i["a"])({url:"".concat(o["pfmcSettings"],"/pfmcProgram/update"),method:"put",data:t})}function s(t){return Object(i["a"])({url:"".concat(o["pfmcSettings"],"/pfmcProgram/updateStatus"),method:"put",data:t})}function c(t){return Object(i["a"])({url:"".concat(o["pfmcSettings"],"/pfmcProgram/add"),method:"post",data:t})}function u(t){return Object(i["a"])({url:"".concat(o["pfmcSettings"],"/pfmcProgram/del"),method:"put",data:t})}},"55dd":function(t,e,r){"use strict";var i=r("5ca1"),o=r("d8e8"),n=r("4bf8"),a=r("79e5"),l=[].sort,s=[1,2,3];i(i.P+i.F*(a((function(){s.sort(void 0)}))||!a((function(){s.sort(null)}))||!r("2f21")(l)),"Array",{sort:function(t){return void 0===t?l.call(n(this)):l.call(n(this),o(t))}})},"81c7":function(t,e,r){"use strict";r.r(e),r.d(e,"listFormSet",(function(){return n})),r.d(e,"addFormSet",(function(){return a})),r.d(e,"getformSet",(function(){return l})),r.d(e,"updateFormSet",(function(){return s})),r.d(e,"delFormSet",(function(){return c})),r.d(e,"disableFormSet",(function(){return u})),r.d(e,"progListByFormId",(function(){return d}));var i=r("b775"),o=r("b854");function n(t){return Object(i["a"])({url:"".concat(o["pfmcSettings"],"/pfmcPresetFormSet/list"),method:"get",params:t})}function a(t){return Object(i["a"])({url:"".concat(o["pfmcSettings"],"/pfmcPresetFormSet"),method:"post",data:t})}function l(t){return Object(i["a"])({url:"".concat(o["pfmcSettings"],"/pfmcPresetFormSet/").concat(t),method:"get"})}function s(t){return Object(i["a"])({url:"".concat(o["pfmcSettings"],"/pfmcPresetFormSet"),method:"put",data:t})}function c(t){return Object(i["a"])({url:"".concat(o["pfmcSettings"],"/pfmcPresetFormSet/").concat(t),method:"delete"})}function u(t){return Object(i["a"])({url:"".concat(o["pfmcSettings"],"/pfmcPresetFormSet/disableFormSet/").concat(t),method:"get"})}function d(t){return Object(i["a"])({url:"".concat(o["pfmcSettings"],"/pfmcPresetFormSet/getProgByFormId/").concat(t),method:"get"})}},"82bb":function(t,e,r){"use strict";var i=r("425c"),o=r.n(i);o.a},b854:function(t,e,r){"use strict";r.r(e),r.d(e,"pfmcSettings",(function(){return i})),r.d(e,"pfmcAsist",(function(){return o})),r.d(e,"pfmcExecution",(function(){return n})),r.d(e,"pfmcEval",(function(){return a}));var i="pfmc-settings",o="pfmc-asist",n="pfmc-execution",a="pfmc-eval"},c0c7:function(t,e,r){"use strict";r.d(e,"h",(function(){return n})),r.d(e,"f",(function(){return a})),r.d(e,"a",(function(){return l})),r.d(e,"k",(function(){return s})),r.d(e,"e",(function(){return c})),r.d(e,"j",(function(){return u})),r.d(e,"d",(function(){return d})),r.d(e,"g",(function(){return p})),r.d(e,"l",(function(){return m})),r.d(e,"m",(function(){return f})),r.d(e,"n",(function(){return h})),r.d(e,"i",(function(){return g})),r.d(e,"c",(function(){return w})),r.d(e,"b",(function(){return v}));var i=r("b775"),o=r("365c");function n(t){return Object(i["a"])({url:"".concat(o["d"],"/user/list"),method:"get",params:t})}function a(t){return Object(i["a"])({url:"".concat(o["d"],"/user/").concat(t),method:"get"})}function l(t){return Object(i["a"])({url:"".concat(o["d"],"/user"),method:"post",data:t})}function s(t){return Object(i["a"])({url:"".concat(o["d"],"/user"),method:"put",data:t})}function c(t){return Object(i["a"])({url:"".concat(o["d"],"/user/").concat(t),method:"delete"})}function u(t,e){var r={userId:t,password:e};return Object(i["a"])({url:"".concat(o["d"],"/user/resetPwd"),method:"put",data:r})}function d(t,e){var r={userId:t,status:e};return Object(i["a"])({url:"".concat(o["d"],"/user/changeStatus"),method:"put",data:r})}function p(){return Object(i["a"])({url:"".concat(o["d"],"/user/profile"),method:"get"})}function m(t){return Object(i["a"])({url:"".concat(o["d"],"/user/profile"),method:"put",data:t})}function f(t,e){var r={oldPassword:t,newPassword:e};return Object(i["a"])({url:"".concat(o["d"],"/user/profile/updatePwd"),method:"put",params:r})}function h(t){return Object(i["a"])({url:"".concat(o["d"],"/user/profile/avatar"),method:"post",data:t})}function g(t){return Object(i["a"])({url:"".concat(o["d"],"/user/listUserRole"),method:"get",params:t})}function w(t){return Object(i["a"])({url:"".concat(o["d"],"/user/batchSaveUserRole"),method:"post",data:t})}function v(t){return Object(i["a"])({url:"".concat(o["d"],"/user/batchDeleteUserRole"),method:"put",data:t})}},c921:function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{title:t.title,visible:t.show,width:"800px"},on:{"update:visible":function(e){t.show=e},close:t.cancelBatch}},[r("el-form",{ref:"batchForm",attrs:{model:t.form,rules:t.rules,"label-width":"130px"}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"年份",prop:"cycleYear"}},[r("el-date-picker",{staticStyle:{width:"200px"},attrs:{clearable:"",type:"year",placeholder:"请选择年份","picker-options":t.yearOptions},on:{change:t.getCycleList},model:{value:t.form.cycleYear,callback:function(e){t.$set(t.form,"cycleYear",e)},expression:"form.cycleYear"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"考核周期",prop:"cycleId"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.cycleId,callback:function(e){t.$set(t.form,"cycleId",e)},expression:"form.cycleId"}},t._l(t.cycleOptions,(function(t){return r("el-option",{key:t.cycleId,attrs:{label:t.cycleName,value:t.cycleId}})})),1)],1)],1)],1)],1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:t.submitBatchForm}},[t._v("确 定")]),t._v(" "),r("el-button",{on:{click:t.cancelBatch}},[t._v("取 消")])],1)],1)],1)},o=[],n=r("e426"),a={props:{visible:{type:Boolean,default:!1},title:{type:String,default:""},planId:{type:String,default:"0"},formId:{type:String,default:"0"}},data:function(){var t=this;return{loading:!1,show:!1,sendFormId:"0",sendPlanId:"0",cycleOptions:[],yearOptions:{onPick:function(e){var r=e.maxDate,i=e.minDate;t.choiceDate=i.getTime(),r&&(t.choiceDate="")},disabledDate:function(e){if(null!=t.choiceDate){var r=62208e6;return e.getTime()<Date.now()-(new Date).getFullYear()||e.getTime()>Date.now()-(new Date).getFullYear()+r}}},choiceDate:"",form:{cycleYear:new Date,cycleId:""},rules:{cycleYear:[{required:!0,message:"年份不能为空",trigger:"blur"}],cycleId:[{required:!0,message:"考核周期不能为空",trigger:"blur"}]}}},created:function(){},methods:{getCycleList:function(){var t=this;this.form.cycleId="";var e={cycleYear:this.form.cycleYear.getFullYear(),planId:this.sendPlanId,formId:this.sendFormId};Object(n["listPfmcCycle"])(e).then((function(e){"0"===e.code?t.cycleOptions=e.data:t.msgError("查询考核周期列表失败")})).catch((function(e){t.msgError(e)}))},submitBatchForm:function(){var t=this;this.$refs["batchForm"].validate((function(e){e&&(t.loading=!0,t.form.planId=t.planId,t.form.periodId=t.form.cycleId,Object(n["copyHisPlan"])(t.form).then((function(e){"0"===e.code?(t.msgSuccess("历史计划复制成功"),t.cancelBatch()):(t.msgError(e.msg),t.cancelBatch())})).catch((function(e){t.$notify({title:"网络异常",message:e.message,type:"error"}),t.cancelBatch()})))}))},cancelBatch:function(){this.loading=!1,this.show=!1,this.resetBatch()},resetBatch:function(){this.resetForm("batchForm")}},watch:{show:function(){0==this.show&&this.$emit("update:visible",!1)},visible:function(){this.show=this.visible},formId:function(){this.sendFormId=this.formId,this.sendPlanId=this.planId,this.getCycleList()}}},l=a,s=r("2877"),c=Object(s["a"])(l,i,o,!1,null,null,null);e["default"]=c.exports},d69e:function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("el-dialog",{attrs:{title:t.title,visible:t.show,width:"800px"},on:{"update:visible":function(e){t.show=e},open:t.open,close:t.cancel}},[r("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"130px"}},[t._l(t.formSetFieldList,(function(e){return[r("el-form-item",{attrs:{label:e.fieldName,prop:e.fieldId}},[r("el-input",{attrs:{"v-model":t.form.fieldId}})],1)]}))],2),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")]),t._v(" "),r("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1)],1)},o=[],n=(r("6b54"),r("e426")),a={props:{visible:{type:Boolean,default:!1},title:{type:String,default:""},groupId:{type:String,default:"0"},rowId:{type:String,default:"0"}},data:function(){var t=this;return{show:!1,formSetFieldList:[],cycleTypeOptions:[],yearOptions:{onPick:function(e){var r=e.maxDate,i=e.minDate;t.choiceDate=i.getTime(),r&&(t.choiceDate="")},disabledDate:function(e){if(null!=t.choiceDate){var r=62208e6;return e.getTime()<Date.now()-(new Date).getFullYear()||e.getTime()>Date.now()-(new Date).getFullYear()+r}}},choiceDate:"",form:{cycleYear:(new Date).getFullYear().toString()},rules:{cycleYear:[{required:!0,message:"年份不能为空",trigger:"blur"}],cycleType:[{required:!0,message:"考核类型不能为空",trigger:"blur"}],cycleName:[{required:!0,message:"周期名称不能为空",trigger:"blur"}],startDate:[{required:!0,message:"开始日期不能为空",trigger:"blur"}],endDate:[{required:!0,message:"结束日期不能为空",trigger:"blur"}]}}},created:function(){var t=this;this.getDicts("pfmc_basicsettings_cycle_type").then((function(e){t.cycleTypeOptions=e.data}))},methods:{open:function(){var t=this;"0"!=this.rowId?getPfmcCycle(this.cycleId).then((function(e){"0"===e.code?t.form=e.data:t.msgError(e.msg)})).catch((function(e){t.msgError(e)})):Object(n["getGroupInfo"])(this.groupId).then((function(e){"0"===e.code?t.formSetFieldList=e.data.formSetSection.formSetFieldList:t.msgError(e.msg)}))},cancel:function(){this.show=!1,this.reset()},reset:function(){this.resetForm("form")},submitForm:function(){var t=this;this.$refs["form"].validate((function(e){e&&(void 0!==t.form.cycleId?updatePfmcCycle(t.form).then((function(e){"0"===e.code?(t.msgSuccess("修改成功"),t.cancel()):t.msgError(e.msg),cancelBatch})):addPfmcCycle(t.form).then((function(e){"0"===e.code?(t.msgSuccess("新增成功"),t.cancel()):t.msgError(e.msg)})))}))}},watch:{show:function(){0==this.show&&this.$emit("update:visible",!1)},visible:function(){this.show=this.visible}}},l=a,s=r("2877"),c=Object(s["a"])(l,i,o,!1,null,null,null);e["default"]=c.exports},e426:function(t,e,r){"use strict";r.r(e),r.d(e,"getPlanByProcInstId",(function(){return n})),r.d(e,"addPlanItem",(function(){return a})),r.d(e,"startEmpPlan",(function(){return l})),r.d(e,"copyHisPlan",(function(){return s})),r.d(e,"queryApprovers",(function(){return c})),r.d(e,"flowApproval",(function(){return u})),r.d(e,"listPfmcCycle",(function(){return d}));var i=r("b775"),o=r("b854");function n(t){return Object(i["a"])({url:"".concat(o["pfmcExecution"],"/pfmcMakePlan/getPlanByProcInstId/").concat(t),method:"get"})}function a(t){return Object(i["a"])({url:"".concat(o["pfmcExecution"],"/pfmcMakePlan"),method:"post",data:t})}function l(t){return Object(i["a"])({url:"".concat(o["pfmcExecution"],"/pfmcStartPlan/startEmpPlan"),method:"post",data:t})}function s(t){return Object(i["a"])({url:"".concat(o["pfmcExecution"],"/pfmcMakePlan/copyHisPlan"),method:"post",data:t})}function c(t){return Object(i["a"])({url:"".concat(o["pfmcExecution"],"/pfmcMakePlan/queryApprovers/").concat(t),method:"get"})}function u(t){return Object(i["a"])({url:"".concat(o["pfmcExecution"],"/pfmcMakePlan/flowApproval"),method:"post",data:t})}function d(t){return Object(i["a"])({url:"".concat(o["pfmcExecution"],"/pfmcMakePlan/getCycleList"),method:"get",params:t})}}}]);