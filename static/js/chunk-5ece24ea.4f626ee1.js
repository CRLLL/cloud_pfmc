(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ece24ea","chunk-2d21062b","chunk-10db1c36","chunk-079c1a24","chunk-2d21062b","chunk-68900f74"],{"1ed3":function(t,e,n){},2879:function(t,e,n){"use strict";n.r(e),n.d(e,"treeselect",(function(){return c})),n.d(e,"selectPfmcEmpList",(function(){return a})),n.d(e,"addPfmcOrg",(function(){return i})),n.d(e,"updatePfmcOrg",(function(){return u})),n.d(e,"delPfmcOrg",(function(){return p})),n.d(e,"searchEmp",(function(){return m})),n.d(e,"addEmpToOrg",(function(){return s})),n.d(e,"updatePfmcEmp",(function(){return f})),n.d(e,"delPfmcEmp",(function(){return d})),n.d(e,"batchTransferEmp",(function(){return l})),n.d(e,"listEmpNameOrNumber",(function(){return g})),n.d(e,"batchUpdateEmpStatus",(function(){return h})),n.d(e,"listEmp",(function(){return b})),n.d(e,"delOrgCheck",(function(){return v}));var r=n("b775"),o=n("b854");function c(){return Object(r["a"])({url:"".concat(o["pfmcAsist"],"/pfmcOrgEmp/treeselect"),method:"get"})}function a(t){return Object(r["a"])({url:"".concat(o["pfmcAsist"],"/pfmcOrgEmp/listEmpByOrgId"),method:"get",params:t})}function i(t){return Object(r["a"])({url:"".concat(o["pfmcAsist"],"/pfmcOrgEmp"),method:"post",data:t})}function u(t){return Object(r["a"])({url:"".concat(o["pfmcAsist"],"/pfmcOrgEmp"),method:"put",data:t})}function p(t){return Object(r["a"])({url:"".concat(o["pfmcAsist"],"/pfmcOrgEmp/deleteOrg/").concat(t),method:"delete"})}function m(t){return Object(r["a"])({url:"".concat(o["pfmcAsist"],"/pfmcOrgEmp/searchEmp"),method:"get",params:t})}function s(t){return Object(r["a"])({url:"".concat(o["pfmcAsist"],"/pfmcOrgEmp/updateEmpOfOrg"),method:"get",params:t})}function f(t){return Object(r["a"])({url:"".concat(o["pfmcAsist"],"/pfmcOrgEmp/updateEmp"),method:"post",data:t})}function d(t){return Object(r["a"])({url:"".concat(o["pfmcAsist"],"/pfmcOrgEmp/deleteEmp/").concat(t),method:"delete"})}function l(t){return Object(r["a"])({url:"".concat(o["pfmcAsist"],"/pfmcOrgEmp/batchTransferEmp"),method:"post",data:t})}function g(t){return Object(r["a"])({url:"".concat(o["pfmcAsist"],"/pfmcOrgEmp/listEmpNameOrNumber"),method:"get",params:t})}function h(t){return Object(r["a"])({url:"".concat(o["pfmcAsist"],"/pfmcOrgEmp/batchUpdateEmpStatus"),method:"post",data:t})}function b(t){return Object(r["a"])({url:"".concat(o["pfmcAsist"],"/pfmcOrgEmp/listEmp"),method:"post",data:t})}function v(t){return Object(r["a"])({url:"".concat(o["pfmcAsist"],"/pfmcOrgEmp/delOrgCheck/").concat(t),method:"delete"})}},5250:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pfmc-import-button-container"},[n("el-button",{attrs:{size:t.size,type:t.type,plain:t.plain,round:t.round,circle:t.circle,disabled:t.disabled,icon:t.icon},on:{click:function(e){t.showDialog=!0}}},[t._v(t._s(t.btnText))]),t._v(" "),n("el-dialog",{attrs:{visible:t.showDialog,title:t.title,"close-on-click-modal":!1,"append-to-body":"",width:"500px"},on:{"update:visible":function(e){t.showDialog=e},open:t.openDialog,close:t.handleCancel}},[n("el-form",{ref:"form",attrs:{rules:t.rules,model:t.form,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"测评小组",prop:"groupName"}},[n("el-input",{attrs:{placeholder:"请输入..."},model:{value:t.form.groupName,callback:function(e){t.$set(t.form,"groupName",e)},expression:"form.groupName"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"所属部门",prop:"orgId"}},[n("tree-select",{attrs:{clearable:!1,options:t.orgOptions,placeholder:"选择部门","default-expand-level":1},on:{input:t.validateForm},model:{value:t.form.orgId,callback:function(e){t.$set(t.form,"orgId",e)},expression:"form.orgId"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"小组成员",prop:"memberList"}},[n("el-row",[n("el-col",{attrs:{span:20}},t._l(t.form.memberList,(function(e){return n("el-tag",{key:e.empId,staticStyle:{"margin-right":"10px"},attrs:{closable:""},on:{close:function(n){return t.handleRemoveTag(e)}}},[t._v(t._s(e.empName))])})),1),t._v(" "),n("el-col",{attrs:{span:4}},[n("select-emp",{attrs:{plain:"",btnText:"增加"},on:{"select-finish":t.handleSelectEmp}})],1)],1)],1)],1),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{plain:"",icon:"el-icon-close"},on:{click:t.handleCancel}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-bank-card"},on:{click:t.saveBtnClick}},[t._v("保存")])],1)],1)],1)},o=[],c=(n("7514"),n("ac6a"),n("542c"),n("2879")),a=n("f06f"),i={name:"UpdateGroup",components:{TreeSelect:function(){return n.e("chunk-5c5c1f08").then(n.t.bind(null,"7026",7))},SelectEmp:function(){return Promise.all([n.e("chunk-5c5c1f08"),n.e("chunk-185fdec2")]).then(n.bind(null,"2cc9"))}},props:{size:{type:String,default:"mini"},type:{type:String,default:"primary"},plain:{type:Boolean,default:!0},round:{type:Boolean,default:!1},circle:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},icon:{type:String,default:"el-icon-edit"},btnText:{type:String,default:"修改"},title:{type:String,default:"修改测评小组"},isAdd:{type:Boolean,default:!1},groupId:{type:String,default:void 0}},data:function(){return{showDialog:!1,orgOptions:void 0,form:{groupId:void 0,groupName:void 0,orgId:void 0,memberList:[]},rules:{groupName:[{required:!0,message:"测评小组名称不能为空",trigger:"change"}],orgId:[{required:!0,message:"所属部门不能为空",trigger:"input"}],memberList:[{type:"array",required:!0,message:"小组成员不能为空",trigger:"change"}]}}},created:function(){this.getOrgTreeselect()},mounted:function(){},computed:{},methods:{openDialog:function(){this.isAdd||this.getGroupInfo(this.groupId)},getGroupInfo:function(t){var e=this;Object(a["getGroupInfoById"])(t).then((function(t){"0"===t.code?e.form=t.data:e.msgError(t.msg)}))},saveBtnClick:function(){var t=this;this.$refs.form.validate((function(e){e&&(t.isAdd?t.addGroupInfo(t.form):t.updateGroupInfo(t.form))}))},handleSelectEmp:function(t){var e=this;t.forEach((function(t){e.form.memberList.find((function(e){return e.empId===t.empId}))||e.form.memberList.push({memberId:"0",groupId:e.groupId,empId:t.empId,empName:t.empName,isDeleted:!1})}))},addGroupInfo:function(t){var e=this;Object(a["addGroup"])(t).then((function(t){"0"===t.code?(e.msgSuccess("新增测评小组成功"),e.$emit("update-finish"),e.showDialog=!1):e.msgError(t.msg)}))},updateGroupInfo:function(t){var e=this;Object(a["updateGroup"])(t).then((function(t){"0"===t.code?(e.msgSuccess("修改测评小组成功"),e.$emit("update-finish"),e.showDialog=!1):e.msgError(t.msg)}))},getOrgTreeselect:function(){var t=this;Object(c["treeselect"])().then((function(e){t.orgOptions=e.data}))},btnClick:function(){0!==this.emps.length?(this.form.emps=JSON.parse(JSON.stringify(this.emps)),this.showDialog=!0):this.msgError("请选择员工")},handleRemoveTag:function(t){this.form.memberList=this.form.memberList.filter((function(e){return e.empId!==t.empId}))},handleFinish:function(){this.$emit("update-finish"),this.showDialog=!1},handleCancel:function(){this.resetForm(),this.showDialog=!1},validateForm:function(){this.$refs.form.validate((function(t){}))},resetForm:function(){this.form={orgId:void 0,memberList:[]},this.$refs.form.clearValidate()}},watch:{}},u=i,p=(n("ead2"),n("2877")),m=Object(p["a"])(u,r,o,!1,null,"713b07e6",null);e["default"]=m.exports},"542c":function(t,e,n){},7514:function(t,e,n){"use strict";var r=n("5ca1"),o=n("0a49")(5),c="find",a=!0;c in[]&&Array(1)[c]((function(){a=!1})),r(r.P+r.F*a,"Array",{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(c)},b854:function(t,e,n){"use strict";n.r(e),n.d(e,"pfmcSettings",(function(){return r})),n.d(e,"pfmcAsist",(function(){return o})),n.d(e,"pfmcExecution",(function(){return c})),n.d(e,"pfmcEval",(function(){return a}));var r="pfmc-settings",o="pfmc-asist",c="pfmc-execution",a="pfmc-eval"},ead2:function(t,e,n){"use strict";var r=n("1ed3"),o=n.n(r);o.a},f06f:function(t,e,n){"use strict";n.r(e),n.d(e,"listGroup",(function(){return c})),n.d(e,"getGroupInfoById",(function(){return a})),n.d(e,"addGroup",(function(){return i})),n.d(e,"updateGroup",(function(){return u})),n.d(e,"delGroup",(function(){return p})),n.d(e,"batchDelGroup",(function(){return m}));var r=n("b775"),o=n("b854");function c(t){return Object(r["a"])({url:"".concat(o["pfmcEval"],"/pfmcEvalGroup/listGroup"),method:"get",params:t})}function a(t){return Object(r["a"])({url:"".concat(o["pfmcEval"],"/pfmcEvalGroup/getGroupInfoById/").concat(t),method:"get"})}function i(t){return Object(r["a"])({url:"".concat(o["pfmcEval"],"/pfmcEvalGroup/addGroup"),method:"post",data:t})}function u(t){return Object(r["a"])({url:"".concat(o["pfmcEval"],"/pfmcEvalGroup/updateGroup"),method:"put",data:t})}function p(t){return Object(r["a"])({url:"".concat(o["pfmcEval"],"/pfmcEvalGroup/delGroup/").concat(t),method:"delete"})}function m(t){return Object(r["a"])({url:"".concat(o["pfmcEval"],"/pfmcEvalGroup/batchDelGroup"),method:"delete",data:t})}}}]);