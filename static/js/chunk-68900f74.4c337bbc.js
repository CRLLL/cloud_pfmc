(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-68900f74"],{"1ed3":function(e,t,o){},5250:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"pfmc-import-button-container"},[o("el-button",{attrs:{size:e.size,type:e.type,plain:e.plain,round:e.round,circle:e.circle,disabled:e.disabled,icon:e.icon},on:{click:function(t){e.showDialog=!0}}},[e._v(e._s(e.btnText))]),e._v(" "),o("el-dialog",{attrs:{visible:e.showDialog,title:e.title,"close-on-click-modal":!1,"append-to-body":"",width:"500px"},on:{"update:visible":function(t){e.showDialog=t},open:e.openDialog,close:e.handleCancel}},[o("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"测评小组",prop:"groupName"}},[o("el-input",{attrs:{placeholder:"请输入..."},model:{value:e.form.groupName,callback:function(t){e.$set(e.form,"groupName",t)},expression:"form.groupName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"所属部门",prop:"orgId"}},[o("tree-select",{attrs:{clearable:!1,options:e.orgOptions,placeholder:"选择部门","default-expand-level":1},on:{input:e.validateForm},model:{value:e.form.orgId,callback:function(t){e.$set(e.form,"orgId",t)},expression:"form.orgId"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"小组成员",prop:"memberList"}},[o("el-row",[o("el-col",{attrs:{span:20}},e._l(e.form.memberList,(function(t){return o("el-tag",{key:t.empId,staticStyle:{"margin-right":"10px"},attrs:{closable:""},on:{close:function(o){return e.handleRemoveTag(t)}}},[e._v(e._s(t.empName))])})),1),e._v(" "),o("el-col",{attrs:{span:4}},[o("select-emp",{attrs:{plain:"",btnText:"增加"},on:{"select-finish":e.handleSelectEmp}})],1)],1)],1)],1),e._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{plain:"",icon:"el-icon-close"},on:{click:e.handleCancel}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary",icon:"el-icon-bank-card"},on:{click:e.saveBtnClick}},[e._v("保存")])],1)],1)],1)},i=[],r=(o("7514"),o("ac6a"),o("542c"),o("2879")),a=o("f06f"),s={name:"UpdateGroup",components:{TreeSelect:function(){return o.e("chunk-5c5c1f08").then(o.t.bind(null,"7026",7))},SelectEmp:function(){return Promise.all([o.e("chunk-5c5c1f08"),o.e("chunk-185fdec2")]).then(o.bind(null,"2cc9"))}},props:{size:{type:String,default:"mini"},type:{type:String,default:"primary"},plain:{type:Boolean,default:!0},round:{type:Boolean,default:!1},circle:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},icon:{type:String,default:"el-icon-edit"},btnText:{type:String,default:"修改"},title:{type:String,default:"修改测评小组"},isAdd:{type:Boolean,default:!1},groupId:{type:String,default:void 0}},data:function(){return{showDialog:!1,orgOptions:void 0,form:{groupId:void 0,groupName:void 0,orgId:void 0,memberList:[]},rules:{groupName:[{required:!0,message:"测评小组名称不能为空",trigger:"change"}],orgId:[{required:!0,message:"所属部门不能为空",trigger:"input"}],memberList:[{type:"array",required:!0,message:"小组成员不能为空",trigger:"change"}]}}},created:function(){this.getOrgTreeselect()},mounted:function(){},computed:{},methods:{openDialog:function(){this.isAdd||this.getGroupInfo(this.groupId)},getGroupInfo:function(e){var t=this;Object(a["getGroupInfoById"])(e).then((function(e){"0"===e.code?t.form=e.data:t.msgError(e.msg)}))},saveBtnClick:function(){var e=this;this.$refs.form.validate((function(t){t&&(e.isAdd?e.addGroupInfo(e.form):e.updateGroupInfo(e.form))}))},handleSelectEmp:function(e){var t=this;e.forEach((function(e){t.form.memberList.find((function(t){return t.empId===e.empId}))||t.form.memberList.push({memberId:"0",groupId:t.groupId,empId:e.empId,empName:e.empName,isDeleted:!1})}))},addGroupInfo:function(e){var t=this;Object(a["addGroup"])(e).then((function(e){"0"===e.code?(t.msgSuccess("新增测评小组成功"),t.$emit("update-finish"),t.showDialog=!1):t.msgError(e.msg)}))},updateGroupInfo:function(e){var t=this;Object(a["updateGroup"])(e).then((function(e){"0"===e.code?(t.msgSuccess("修改测评小组成功"),t.$emit("update-finish"),t.showDialog=!1):t.msgError(e.msg)}))},getOrgTreeselect:function(){var e=this;Object(r["treeselect"])().then((function(t){e.orgOptions=t.data}))},btnClick:function(){0!==this.emps.length?(this.form.emps=JSON.parse(JSON.stringify(this.emps)),this.showDialog=!0):this.msgError("请选择员工")},handleRemoveTag:function(e){this.form.memberList=this.form.memberList.filter((function(t){return t.empId!==e.empId}))},handleFinish:function(){this.$emit("update-finish"),this.showDialog=!1},handleCancel:function(){this.resetForm(),this.showDialog=!1},validateForm:function(){this.$refs.form.validate((function(e){}))},resetForm:function(){this.form={orgId:void 0,memberList:[]},this.$refs.form.clearValidate()}},watch:{}},l=s,c=(o("ead2"),o("2877")),d=Object(c["a"])(l,n,i,!1,null,"713b07e6",null);t["default"]=d.exports},7514:function(e,t,o){"use strict";var n=o("5ca1"),i=o("0a49")(5),r="find",a=!0;r in[]&&Array(1)[r]((function(){a=!1})),n(n.P+n.F*a,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("9c6c")(r)},ead2:function(e,t,o){"use strict";var n=o("1ed3"),i=o.n(n);i.a}}]);