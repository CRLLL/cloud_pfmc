(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8f353c00","chunk-2d0a36f7","chunk-39cc9fd1"],{"01bb":function(t,e,o){"use strict";o.r(e),o.d(e,"HRInterface",(function(){return n}));var n="hr-interface"},4248:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app-container"},[o("div",{staticClass:"pfmc-btn-bar"},[o("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"mini"},on:{click:t.$_showAddModal}},[t._v("新增")])],1),t._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.tableData,"row-key":"jobName"}},[o("el-table-column",{attrs:{label:"任务名称",prop:"jobName","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{label:"任务说明",prop:"jobDescription","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{label:"执行类",prop:"jobClassName","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{label:"触发器名称",prop:"triggerName","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{label:"cron表达式",prop:"cronExpression","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{label:"上次执行时间",prop:"previousFireTime",width:"150"}}),t._v(" "),o("el-table-column",{attrs:{label:"下次执行时间",prop:"nextFireTime",width:"150"}}),t._v(" "),o("el-table-column",{attrs:{label:"状态",prop:"stateCN",width:"65"}}),t._v(" "),o("el-table-column",{attrs:{label:"操作",fixed:"right",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"text"},on:{click:function(o){return t.$_showEditModal(e.row)}}},[t._v("修改")]),t._v(" "),o("el-popconfirm",{attrs:{title:"您确定要删除该任务吗？"},on:{onConfirm:function(o){return t.$_del(e.row)}}},[o("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("删除")])],1),t._v(" "),["NORMAL"].includes(e.row.state)?o("el-popconfirm",{attrs:{title:"您确定要暂时停止该任务吗？"},on:{onConfirm:function(o){return t.$_pause(e.row)}}},[o("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("暂停")])],1):t._e(),t._v(" "),["PAUSED"].includes(e.row.state)?o("el-popconfirm",{attrs:{title:"您确定要继续执行该任务吗？"},on:{onConfirm:function(o){return t.$_resume(e.row)}}},[o("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("继续")])],1):t._e()]}}])})],1),t._v(" "),o("job-editor",{attrs:{show:t.showModal,job:t.editJob},on:{"close-editor":t.$_cancelModal}})],1)},a=[],r=o("b4a8"),s={components:{JobEditor:function(){return o.e("chunk-2d0d0632").then(o.bind(null,"6882"))}},data:function(){return{loading:!1,tableData:[],showModal:!1,editJob:null}},created:function(){this.$_loadTableData()},methods:{$_loadTableData:function(){var t=this;this.tableData=[],this.loading=!0,Object(r["getJobList"])().then((function(e){"0"===e.code?t.tableData=e.data||[]:t.$notify.error({title:"服务调用异常",message:e.msg})})).catch((function(e){t.$notify.error({title:"网络错误",message:e.message})})).finally((function(){t.loading=!1}))},$_showAddModal:function(){this.editJob=null,this.showModal=!0},$_showEditModal:function(t){var e=t.jobName,o=t.jobDescription,n=t.triggerName,a=t.jobClassName,r=t.cronExpression;this.editJob={jobName:e,jobDescription:o,triggerName:n,jobClassName:a,cronExpression:r},this.showModal=!0},$_cancelModal:function(t){this.showModal=!1,this.editJob=null,t&&this.$_loadTableData()},$_del:function(t){var e=this,o=t.jobName,n=this.$message({iconClass:"el-icon-loading",message:"正在删除，请稍后...",duration:0});Object(r["delJob"])(o).then((function(t){"0"===t.code?(e.msgSuccess("操作成功"),e.$_loadTableData()):e.$notify.error({title:"服务调用异常",message:t.msg})})).catch((function(t){e.$notify.error({title:"网络错误",message:t.message})})).finally((function(){try{n.close()}catch(t){}}))},$_pause:function(t){var e=this,o=t.jobName,n=this.$message({iconClass:"el-icon-loading",message:"正在暂停，请稍后...",duration:0});Object(r["pauseJob"])(o).then((function(t){"0"===t.code?(e.msgSuccess("操作成功"),e.$_loadTableData()):e.$notify.error({title:"服务调用异常",message:t.msg})})).catch((function(t){e.$notify.error({title:"网络错误",message:t.message})})).finally((function(){try{n.close()}catch(t){}}))},$_resume:function(t){var e=this,o=t.jobName,n=this.$message({iconClass:"el-icon-loading",message:"正在恢复定时任务，请稍后...",duration:0});Object(r["resumeJob"])(o).then((function(t){"0"===t.code?(e.msgSuccess("操作成功"),e.$_loadTableData()):e.$notify.error({title:"服务调用异常",message:t.msg})})).catch((function(t){e.$notify.error({title:"网络错误",message:t.message})})).finally((function(){try{n.close()}catch(t){}}))}}},l=s,i=o("2877"),c=Object(i["a"])(l,n,a,!1,null,null,null);e["default"]=c.exports},b4a8:function(t,e,o){"use strict";o.r(e),o.d(e,"getJobList",(function(){return r})),o.d(e,"saveJob",(function(){return s})),o.d(e,"delJob",(function(){return l})),o.d(e,"pauseJob",(function(){return i})),o.d(e,"resumeJob",(function(){return c}));var n=o("b775"),a=o("01bb");function r(){return Object(n["a"])({url:"".concat(a["HRInterface"],"/quartz/list"),method:"get"})}function s(t,e){return Object(n["a"])({url:"".concat(a["HRInterface"],"/quartz/job"),method:e?"post":"put",data:t})}function l(t){return Object(n["a"])({url:"".concat(a["HRInterface"],"/quartz/job"),method:"delete",params:{jobName:t}})}function i(t){return Object(n["a"])({url:"".concat(a["HRInterface"],"/quartz/pausing"),method:"post",params:{jobName:t}})}function c(t){return Object(n["a"])({url:"".concat(a["HRInterface"],"/quartz/resume"),method:"post",params:{jobName:t}})}}}]);