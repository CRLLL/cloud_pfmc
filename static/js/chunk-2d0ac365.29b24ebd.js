(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ac365"],{1929:function(e,r,o){"use strict";o.r(r);var t=function(){var e=this,r=e.$createElement,o=e._self._c||r;return o("div",{staticClass:"app-container"},[o("el-dialog",{attrs:{title:e.title,visible:e.visible,width:"800px","close-on-click-modal":!1},on:{open:e.open,close:e.cancel}},[o("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[o("el-row",[o("el-col",{attrs:{span:11}},[o("el-form-item",{attrs:{label:"年份:",prop:"periodYear"}},[o("el-date-picker",{attrs:{type:"year",placeholder:"选择年份"},on:{change:e.getCycleList},model:{value:e.form.periodYear,callback:function(r){e.$set(e.form,"periodYear",r)},expression:"form.periodYear"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:11}},[o("el-form-item",{attrs:{label:"考核周期:",prop:"periodId"}},[o("el-select",{attrs:{clearable:"",size:"small"},model:{value:e.form.periodId,callback:function(r){e.$set(e.form,"periodId",r)},expression:"form.periodId"}},e._l(e.periodOptions,(function(e){return o("el-option",{key:e.cycleId,attrs:{label:e.cycleName,value:e.cycleId}})})),1)],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:11}},[o("el-form-item",{attrs:{label:"员工编号:",prop:"empNumber"}},[o("el-input",{attrs:{readonly:"",disabled:!e.isAdd,placeholder:"请选择..."},model:{value:e.form.empNumber,callback:function(r){e.$set(e.form,"empNumber",r)},expression:"form.empNumber"}},[o("select-emp",{directives:[{name:"show",rawName:"v-show",value:e.isAdd,expression:"isAdd"}],attrs:{slot:"append",icon:"el-icon-search"},on:{"select-finish":e.handleSelectEmp},slot:"append"})],1)],1)],1),e._v(" "),o("el-col",{attrs:{span:11}},[o("el-form-item",{attrs:{label:"员工姓名:",prop:"empName"}},[o("el-input",{attrs:{readonly:""},model:{value:e.form.empName,callback:function(r){e.$set(e.form,"empName",r)},expression:"form.empName"}})],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:11}},[o("el-form-item",{attrs:{label:"同事评价人编号:",prop:"evalerNumber"}},[o("el-input",{attrs:{readonly:"",placeholder:"请选择..."},model:{value:e.form.evalerNumber,callback:function(r){e.$set(e.form,"evalerNumber",r)},expression:"form.evalerNumber"}},[o("select-emp",{attrs:{slot:"append",icon:"el-icon-search"},on:{"select-finish":e.handleSelectEvaler},slot:"append"})],1)],1)],1),e._v(" "),o("el-col",{attrs:{span:11}},[o("el-form-item",{attrs:{label:"同事评价人姓名:",prop:"evalerName"}},[o("el-input",{attrs:{readonly:""},model:{value:e.form.evalerName,callback:function(r){e.$set(e.form,"evalerName",r)},expression:"form.evalerName"}})],1)],1)],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{plain:"",icon:"el-icon-close"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary",icon:"el-icon-bank-card"},on:{click:e.submitForm}},[e._v("保存")])],1)],1)],1)},a=[],l=o("304f"),i=o("014e"),s={name:"editColleagueEvalerDialog",components:{SelectEmp:function(){return Promise.all([o.e("chunk-5c5c1f08"),o.e("chunk-457809e8")]).then(o.bind(null,"2cc9"))}},props:{visible:{type:Boolean,default:!1},isAdd:{type:Boolean,default:!0},title:{type:String,default:void 0},id:{type:String,default:void 0}},data:function(){return{show:!1,form:{id:void 0,periodYear:new Date,periodId:void 0,empId:void 0,empNumber:void 0,empName:void 0,evalerId:void 0,evalerNumber:void 0,evalerName:void 0},periodOptions:[],rules:{periodYear:[{required:!0,message:"年份不能为空",trigger:"change"}],periodId:[{required:!0,message:"考核周期不能为空",trigger:"change"}],empName:[{required:!0,message:"员工姓名不能为空",trigger:"change"}],empNumber:[{required:!0,message:"员工编号不能为空",trigger:"change"}],evalerName:[{required:!0,message:"同事评价人姓名不能为空",trigger:"change"}],evalerNumber:[{required:!0,message:"同事评价人编号不能为空",trigger:"change"}]}}},computed:{},created:function(){},methods:{submitForm:function(){var e=this;this.$refs["form"].validate((function(r){r&&(e.form.empId!==e.form.evalerId?e.isAdd?e.addColleagueEvalerInfo(e.form):e.updateColleagueEvalerInfo(e.form):e.msgError("员工和同事评价人相同！"))}))},handleSelectEmp:function(e){var r=e[0];r.empId&&(this.form.empId=r.empId,this.form.empName=r.empName,this.form.empNumber=r.empNumber)},handleSelectEvaler:function(e){var r=e[0];r.empId&&(this.form.evalerId=r.empId,this.form.evalerName=r.empName,this.form.evalerNumber=r.empNumber)},resetForm:function(){this.form={id:void 0,periodYear:new Date,periodId:void 0,empId:void 0,empNumber:void 0,empName:void 0,evalerId:void 0,evalerNumber:void 0,evalerName:void 0},this.$refs.form.resetFields()},open:function(){this.isAdd?this.getCycleList():this.getColleagueEvalerInfo()},cancel:function(){this.resetForm(),this.$emit("update:visible",!1)},getColleagueEvalerInfo:function(){var e=this;Object(i["getColleagueEvaler"])(this.id).then((function(r){"0"===r.code?(e.form=r.data,e.getCycleList()):e.msgError(r.msg)})).catch((function(r){e.msgError(r)}))},addColleagueEvalerInfo:function(e){var r=this;Object(i["addColleagueEvaler"])(e).then((function(e){"0"===e.code?(r.msgSuccess("新增同事评价人维护成功"),r.$emit("update:visible",!1)):r.msgError(e.msg)})).catch((function(e){r.msgError(e)}))},updateColleagueEvalerInfo:function(e){var r=this;Object(i["updateColleagueEvaler"])(e).then((function(e){"0"===e.code?(r.msgSuccess("修改同事评价人维护成功"),r.cancel()):r.msgError("修改同事评价人维护失败")})).catch((function(e){r.msgError(e)}))},getCycleList:function(){var e=this,r={cycleYear:"string"===typeof this.form.periodYear?this.form.periodYear:this.form.periodYear.getFullYear(),pageNum:1,pageSize:0};Object(l["listPfmcCycle"])(r).then((function(r){"0"===r.code?e.periodOptions=r.data.list:e.msgError("查询考核周期列表失败")})).catch((function(r){e.msgError(r)}))}},watch:{}},n=s,m=o("2877"),c=Object(m["a"])(n,t,a,!1,null,"2f91a1aa",null);r["default"]=c.exports}}]);