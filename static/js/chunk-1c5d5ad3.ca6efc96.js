(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c5d5ad3"],{"4b36":function(e,t,r){},"74b1":function(e,t,r){"use strict";r.d(t,"d",(function(){return l})),r.d(t,"c",(function(){return n})),r.d(t,"a",(function(){return i})),r.d(t,"e",(function(){return s})),r.d(t,"b",(function(){return c}));var o=r("b775"),a=r("365c");function l(e){return Object(o["a"])({url:"".concat(a["d"],"/position/list"),method:"get",params:e})}function n(e){return Object(o["a"])({url:"".concat(a["d"],"/position/").concat(e),method:"get"})}function i(e){return Object(o["a"])({url:"".concat(a["d"],"/position"),method:"post",data:e})}function s(e){return Object(o["a"])({url:"".concat(a["d"],"/position"),method:"put",data:e})}function c(e){return Object(o["a"])({url:"".concat(a["d"],"/position/").concat(e),method:"delete"})}},a7a5:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pfmc-import-button-container"},[r("el-button",{attrs:{size:e.size,type:e.type,plain:e.plain,round:e.round,circle:e.circle,disabled:e.disabled,icon:e.icon},on:{click:e.btnClick}},[e._v(e._s(e.btnText))]),e._v(" "),r("el-dialog",{attrs:{title:e.title,visible:e.showDialog,"append-to-body":"","close-on-click-modal":!1,width:"900px"},on:{"update:visible":function(t){e.showDialog=t},open:e.open,close:e.cancel}},[r("el-form",{ref:"form",attrs:{name:"form",model:e.form,rules:e.rules,"label-width":"120px"}},[r("el-row",[r("el-col",{attrs:{span:24}},[r("div",{staticStyle:{"background-color":"rgb(220, 223, 230)",width:"100%","line-height":"30px",color:"rgb(96, 98, 102)","padding-left":"10px"}},[e._v("考核组名称")])]),e._v(" "),r("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:12}},[r("el-form-item",{attrs:{label:"考核组名称",prop:"groupName"}},[r("el-input",{attrs:{placeholder:"请输入考核组名称"},model:{value:e.form.groupName,callback:function(t){e.$set(e.form,"groupName",t)},expression:"form.groupName"}})],1)],1),e._v(" "),r("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:12}},[r("el-form-item",{attrs:{label:"考核周期类型",prop:"groupPeriodType"}},[r("el-select",{attrs:{placeholder:"请选择考核周期类型"},model:{value:e.form.groupPeriodType,callback:function(t){e.$set(e.form,"groupPeriodType",t)},expression:"form.groupPeriodType"}},e._l(e.groupPeriodTypeOptions,(function(e){return r("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1)],1),e._v(" "),r("el-row",{staticStyle:{"background-color":"rgb(220, 223, 230)",width:"100%","line-height":"30px",color:"rgb(96, 98, 102)","padding-left":"10px"}},[r("div",[e._v("考核组成员选择")])]),e._v(" "),r("el-row",{staticStyle:{"margin-top":"10px"}},[r("el-tabs",{attrs:{type:"border-card"}},[r("el-tab-pane",{attrs:{label:"查询员工"}},[r("el-form",{attrs:{"label-width":"100px"}},[r("el-row",[r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"员工编号"}},[r("el-input",{attrs:{clearable:""},model:{value:e.queryForm.empNumber,callback:function(t){e.$set(e.queryForm,"empNumber",t)},expression:"queryForm.empNumber"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"员工姓名"}},[r("el-input",{attrs:{clearable:""},model:{value:e.queryForm.empName,callback:function(t){e.$set(e.queryForm,"empName",t)},expression:"queryForm.empName"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("div",{staticClass:"pfmc-btn-bar"},[r("el-button",{attrs:{type:"text"},on:{click:function(){e.isFastSearch=!e.isFastSearch}}},[e._v(e._s(e.isFastSearch?"高级查询":"快速查询"))]),e._v(" "),r("i",{class:[e.isFastSearch?"el-icon-arrow-down":"el-icon-arrow-up"]})],1)])],1),e._v(" "),r("el-row",{directives:[{name:"show",rawName:"v-show",value:!e.isFastSearch,expression:"!isFastSearch"}]},[r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"部门",prop:"deptIds"}},[r("tree-select",{attrs:{options:e.deptOptions,multiple:"",placeholder:"全部",clearable:"","max-height":200,"default-expand-level":1,"open-direction":"bellow"},model:{value:e.queryForm.deptIds,callback:function(t){e.$set(e.queryForm,"deptIds",t)},expression:"queryForm.deptIds"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"职位"}},[r("el-select",{attrs:{placeholder:"全部",clearable:""},model:{value:e.queryForm.posId,callback:function(t){e.$set(e.queryForm,"posId",t)},expression:"queryForm.posId"}},e._l(e.positionOptions,(function(e){return r("el-option",{key:e.positionId,attrs:{label:e.positionName,value:e.positionId}})})),1)],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{staticClass:"text-align-right",attrs:{span:24}},[r("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.handleQueryEmp}},[e._v("查询")]),e._v(" "),r("el-button",{attrs:{type:"primary",plain:"",size:"small",icon:"el-icon-refresh-left"},on:{click:e.resetQueryForm}},[e._v("重置")])],1)],1)],1),e._v(" "),r("el-table",{ref:"searchTabel",attrs:{data:e.searchEmps,height:200},on:{select:e.singleSele,"select-all":e.allSels}},[r("el-table-column",{attrs:{type:"selection"}}),e._v(" "),r("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),r("el-table-column",{attrs:{label:"员工编号",prop:"empNumber"}}),e._v(" "),r("el-table-column",{attrs:{label:"姓名",prop:"empName"}}),e._v(" "),r("el-table-column",{attrs:{label:"部门",prop:"orgName"}}),e._v(" "),r("el-table-column",{attrs:{label:"职位",prop:"positionName"}})],1),e._v(" "),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],staticClass:"pagination-wrap",attrs:{total:e.total,page:e.queryForm.pageNum,limit:e.queryForm.pageSize},on:{"update:page":function(t){return e.$set(e.queryForm,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryForm,"pageSize",t)},pagination:e.handleQueryEmp}})],1),e._v(" "),r("el-tab-pane",{attrs:{label:"已选择成员"+e.form.groupUsers.length+"人"}},[r("el-table",{attrs:{data:e.form.groupUsers}},[r("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),r("el-table-column",{attrs:{label:"员工编号",prop:"empNumber"}}),e._v(" "),r("el-table-column",{attrs:{label:"姓名",prop:"empName"}}),e._v(" "),r("el-table-column",{attrs:{label:"部门",prop:"orgName"}}),e._v(" "),r("el-table-column",{attrs:{label:"职位",prop:"positionName"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"90",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.handleClearSel(t.row)}}},[e._v("删除")])]}}])})],1)],1)],1),e._v(" "),r("el-col",{attrs:{span:24}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer text-align-right",staticStyle:{"margin-top":"10px"}},[r("el-button",{attrs:{plain:"",icon:"el-icon-close"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{type:"primary",icon:"el-icon-bank-card"},on:{click:e.submitForm}},[e._v("保存")])],1)],1)],1)},a=[],l=(r("ac6a"),r("5df3"),r("f400"),r("bd86")),n=r("4a47"),i=r("2879"),s=r("7026"),c=r.n(s),p=r("74b1"),u=(r("542c"),{name:"EditGroupDetail",components:{TreeSelect:c.a},props:{size:{type:String,required:!1},type:{type:String,default:"text"},plain:{type:Boolean,default:!1},round:{type:Boolean,default:!1},circle:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},icon:{type:String,default:""},btnText:{type:String,default:"编辑"},title:{type:String,default:"编辑考核组"},mode:{type:String,default:"edit"},groupId:{type:String,default:void 0},beforeCopy:{type:Function,default:null}},data:function(){var e;return e={loading:!1,isFastSearch:!0,total:0,showDialog:!1,groupPeriodTypeOptions:[],deptOptions:[],positionOptions:[],searchEmps:[]},Object(l["a"])(e,"total",0),Object(l["a"])(e,"queryForm",{deptIds:[],posId:void 0,empNumber:void 0,empName:void 0,pageNum:1,pageSize:10}),Object(l["a"])(e,"form",{groupName:void 0,groupPeriodType:void 0,groupUsers:[]}),Object(l["a"])(e,"currPagePreSelected",[]),Object(l["a"])(e,"rules",{groupName:[{required:!0,message:"考核组名称为空",trigger:"change"}],groupPeriodType:[{required:!0,message:"考核周期类型为空",trigger:"change"}]}),e},created:function(){var e=this;Object(i["treeselect"])().then((function(t){e.deptOptions=t.data})),Object(p["d"])().then((function(t){e.positionOptions=t.data.list})),this.getDicts("pfmc_basicsettings_cycle_type").then((function(t){e.groupPeriodTypeOptions=t.data}))},mounted:function(){},computed:{},methods:{btnClick:function(){if("copy"===this.mode&&this.beforeCopy){var e=this.beforeCopy();if(!e)return}this.showDialog=!0},open:function(){var e=this;"edit"!==this.mode&&"copy"!==this.mode||Object(n["getPfmcGroup"])(this.groupId).then((function(t){"0"===t.code?(e.form=t.data,"copy"===e.mode&&(e.form.groupId=void 0)):e.msgError("查询考核组信息失败")}))},close:function(){this.showDialog=!1},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){if(t){if(0===e.form.groupUsers.length)return void e.msgError("考核组成员不能为空");"undefined"===typeof e.form.groupId?Object(n["addPfmcGroup"])(e.form).then((function(t){"0"===t.code?(e.msgSuccess("新增成功"),e.showDialog=!1,e.$emit("update-finished")):e.msgError(t.msg)})):Object(n["updatePfmcGroup"])(e.form).then((function(t){"0"===t.code?(e.msgSuccess("修改成功"),e.showDialog=!1,e.$emit("update-finished")):e.msgError(t.msg)}))}}))},cancel:function(){this.resetQueryForm(),this.resetForm(),this.showDialog=!1},singleSele:function(e,t){this.selsChange(e,[t])},allSels:function(e){this.selsChange(e)},selsChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.length>this.currPagePreSelected.length?this.form.groupUsers=this.addSels(this.form.groupUsers,e):e.length>0&&0!==t.length?this.form.groupUsers=this.delUnSels(this.form.groupUsers,t):0===e.length&&(this.form.groupUsers=this.delUnSels(this.form.groupUsers,this.currPagePreSelected)),this.currPagePreSelected=e},addSels:function(e,t){var r=e.concat(t),o=new Map;r.forEach((function(e){return o.set(e.empId,e)}));var a=new Array;return o.forEach((function(e,t){a.push(e)})),a},delUnSels:function(e,t){return t.forEach((function(t,r){e.forEach((function(r,o){t.empId===r.empId&&e.splice(o,1)}))})),e},handleQueryEmp:function(){var e=this;Object(i["listEmp"])(this.queryForm).then((function(t){"0"===t.code?(e.total=t.data.total,e.searchEmps=t.data.list,e.$nextTick((function(){var e=this;this.currPagePreSelected=[],this.searchEmps.forEach((function(t,r){e.form.groupUsers.forEach((function(r,o){t.empId===r.empId&&(e.currPagePreSelected.push(t),e.$refs.searchTabel.toggleRowSelection(t,!0))}))}))}))):e.msgError(t.msg)}))},resetQueryForm:function(){this.queryForm={deptIds:[],posId:void 0,empNumber:void 0,empName:void 0,pageNum:1,pageSize:10}},handleClearSel:function(e){var t=this;this.form.groupUsers=this.form.groupUsers.filter((function(t){return t.empId!==e.empId})),this.searchEmps.forEach((function(r,o){r.empId===e.empId&&(t.$refs.searchTabel.toggleRowSelection(r,!1),t.currPagePreSelected=t.currPagePreSelected.filter((function(e){return e.empId!==r.empId})))}))},resetForm:function(){this.form={groupName:void 0,groupPeriodType:void 0,groupUsers:[]}}},watch:{}}),d=u,m=(r("db41"),r("2877")),f=Object(m["a"])(d,o,a,!1,null,"adf67196",null);t["default"]=f.exports},db41:function(e,t,r){"use strict";var o=r("4b36"),a=r.n(o);a.a},f400:function(e,t,r){"use strict";var o=r("c26b"),a=r("b39a"),l="Map";e.exports=r("e0b8")(l,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=o.getEntry(a(this,l),e);return t&&t.v},set:function(e,t){return o.def(a(this,l),0===e?0:e,t)}},o,!0)}}]);