(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2bff8bd4","chunk-2d21062b","chunk-6b5d1009","chunk-2d21062b"],{"2cd6":function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("workflow-page",{ref:"wfpage",attrs:{"flow-params":t.flowParams,"approver-map":t.approverMap,vars:t.vars,"show-save-draft-btn":t.showSaveDraftBtn},on:{"driven-flow":t.drivenFlow,"save-draft":t.saveDraft}},[r("div",{staticClass:"app-container"},[r("div",{staticClass:"flow-subject"},[r("b",[t._v(t._s(t.flowSubject))])]),t._v(" "),r("div",{staticClass:"pfmc-btn-bar"},[r("export-data",{attrs:{"task-id":"emp_grade_report_flow_export",params:{procInstId:t.flowParams.PROC_INST_ID_},btnText:"导出"}})],1),t._v(" "),r("el-table",{attrs:{data:t.gradeList,"row-key":"empId"}},[r("el-table-column",{attrs:{label:"序号",type:"index"}}),t._v(" "),r("el-table-column",{attrs:{label:"员工编号",prop:"empNumber"}}),t._v(" "),r("el-table-column",{attrs:{label:"姓名",prop:"empName"}}),t._v(" "),r("el-table-column",{attrs:{label:"组织",prop:"orgName"}}),t._v(" "),r("el-table-column",{attrs:{label:"职位",prop:"position"}}),t._v(" "),r("el-table-column",{attrs:{label:"得分"},scopedSlots:t._u([{key:"default",fn:function(e){return[null!==e.row.score&&"undefined"!==typeof e.row.score?[t._v(t._s(e.row.score))]:["orgAdminReport"===t.flowParams.TASK_DEF_KEY_?[r("el-input",{on:{input:function(t){e.row.importScore=e.row.importScore.replace(/[^\d.]/g,"")}},model:{value:e.row.importScore,callback:function(r){t.$set(e.row,"importScore",r)},expression:"scope.row.importScore"}})]:[r("span",[t._v(t._s(e.row.importScore))])]]]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"等级"},scopedSlots:t._u([{key:"default",fn:function(e){return["orgAdminReport"===t.flowParams.TASK_DEF_KEY_?[r("el-input",{model:{value:e.row.importGrade,callback:function(r){t.$set(e.row,"importGrade",r)},expression:"scope.row.importGrade"}})]:[r("span",[t._v(t._s(e.row.importGrade))])]]}}])})],1)],1)])},a=[],n=r("f957"),c={components:{ExportData:function(){return r.e("chunk-336f6cc4").then(r.bind(null,"2ee5"))},WorkflowPage:function(){return r.e("chunk-654254cb").then(r.bind(null,"76d1"))}},props:{flowParams:Object},data:function(){return{procInstId:void 0,flowSubject:void 0,approverMap:{},vars:{},gradeList:[],showSaveDraftBtn:"orgAdminReport"===this.flowParams.TASK_DEF_KEY_}},created:function(){this.openFlowPage()},mounted:function(){},computed:{},methods:{openFlowPage:function(){var t=this,e=this.fullScreenLoading("正在加载流程页面，请稍后……");this.procInstId=this.flowParams.PROC_INST_ID_,Object(n["getFlowInofByPid"])(this.procInstId).then((function(r){e.close(),"0"===r.code?(t.flowSubject=r.data.flowSubject,t.gradeList=r.data.empGradeList,t.approverMap=r.data.approverMap):t.msgError(r.msg)})).catch((function(r){e.close(),t.msgError(r)}))},drivenFlow:function(t,e){var r=this,o={empGradeList:this.gradeList};e["empGradeReportForm"]=o;var a=this.fullScreenLoading("正在驱动流程，请稍后……");Object(n["flowApproval"])(e).then((function(e){if(a.close(),"0"===e.code){var o="submit"===t?"提交成功":"退回成功";r.msgSuccess(o),r.closeWorkflowPage(r.flowParams.ihrHome)}else r.$notify({title:"服务调用异常",message:e.msg,type:"error"})})).catch((function(t){try{a.close()}catch(e){}r.$notify({title:"网络异常",message:res.message,type:"error"})})).finally((function(){try{a.close()}catch(t){}}))},saveDraft:function(){var t=this,e={empGradeList:this.gradeList},r={empGradeReportForm:e},o=this.fullScreenLoading("正在暂存流程，请稍后……");Object(n["saveDraft"])(r).then((function(e){o.close(),"0"===e.code?t.msgSuccess("流程暂存成功"):t.msgError(e.msg)})).catch((function(e){o.close(),t.msgError(e)}))}},watch:{}},s=c,i=(r("9316"),r("2877")),l=Object(i["a"])(s,o,a,!1,null,"2025d884",null);e["default"]=l.exports},9316:function(t,e,r){"use strict";var o=r("c374"),a=r.n(o);a.a},b854:function(t,e,r){"use strict";r.r(e),r.d(e,"pfmcSettings",(function(){return o})),r.d(e,"pfmcAsist",(function(){return a})),r.d(e,"pfmcExecution",(function(){return n})),r.d(e,"pfmcEval",(function(){return c}));var o="pfmc-settings",a="pfmc-asist",n="pfmc-execution",c="pfmc-eval"},c374:function(t,e,r){},f957:function(t,e,r){"use strict";r.r(e),r.d(e,"startEmpGradeReport",(function(){return n})),r.d(e,"getFlowInofByPid",(function(){return c})),r.d(e,"flowApproval",(function(){return s})),r.d(e,"saveDraft",(function(){return i}));var o=r("b775"),a=r("b854");function n(t){return Object(o["a"])({url:"".concat(a["pfmcExecution"],"/empGradeReport/startEmpGradeReport"),method:"post",data:t})}function c(t){return Object(o["a"])({url:"".concat(a["pfmcExecution"],"/empGradeReport/getFlowInofByPid/").concat(t),method:"get"})}function s(t){return Object(o["a"])({url:"".concat(a["pfmcExecution"],"/empGradeReport/flowApproval"),method:"post",data:t})}function i(t){return Object(o["a"])({url:"".concat(a["pfmcExecution"],"/empGradeReport/saveDraft"),method:"post",data:t})}}}]);