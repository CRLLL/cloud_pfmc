(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-354bfe9a","chunk-2d2266fb"],{"745c":function(t,e,a){"use strict";a.d(e,"e",(function(){return o})),a.d(e,"c",(function(){return s})),a.d(e,"d",(function(){return i})),a.d(e,"b",(function(){return l})),a.d(e,"a",(function(){return c}));var r=a("b775"),n=a("365c");function o(t){return Object(r["a"])({url:"".concat(n["a"],"/rutask/list"),method:"get",params:t})}function s(t){return Object(r["a"])({url:"".concat(n["d"],"/user/list"),method:"get",params:t})}function i(t){return Object(r["a"])({url:"".concat(n["d"],"/role/list"),method:"get",params:t})}function l(t,e){return Object(r["a"])({url:"".concat(n["a"],"/ruprocdef/delegate?ID_=").concat(t,"&ASSIGNEE_=").concat(e),method:"get"})}function c(t,e,a){return Object(r["a"])({url:"".concat(n["a"],"/rutask/getHandleData?PROC_INST_ID_=").concat(t,"&ID_=").concat(e,"&FILENAME=").concat(a),method:"get"})}},e93d:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-dialog",{attrs:{visible:t.open,width:"980px",top:"20px",title:"流程追踪"},on:{"update:visible":function(e){t.open=e}}},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"审批过程",name:"second"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.approvalProcessList}},[a("el-table-column",{attrs:{label:"步骤",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"任务节点",prop:"ACT_NAME_","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"办理人",prop:"ASSIGNEE_NAME","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"审批开始时间",prop:"START_TIME_","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.dateFormat(e.row.START_TIME_)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"审批结束时间",prop:"NAME_","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[null==e.row.END_TIME_?a("span",[t._v("正在审批……")]):a("span",[t._v(t._s(t.dateFormat(e.row.END_TIME_)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"用时",prop:"ZTIME","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"审批意见",prop:"TEXT_","show-overflow-tooltip":""}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"流程图",name:"third"}},[a("img",{attrs:{src:t.imgSrc,alt:"流程图"}})])],1)],1)],1)},n=[],o={data:function(){return{open:!1,activeName:"second"}},methods:{handleClick:function(){}},props:["approvalProcessList","imgSrc"]},s=o,i=a("2877"),l=Object(i["a"])(s,r,n,!1,null,null,null);e["default"]=l.exports},f07d:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ihr-wrapper"},[a("div",{staticClass:"top-query"},[a("el-form",{ref:"queryForm",attrs:{model:t.queryParams,"label-width":"68px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"流程名称",prop:"PNAME"}},[a("el-input",{attrs:{placeholder:"请输入流程名称",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleQuery(e)}},model:{value:t.queryParams.PNAME,callback:function(e){t.$set(t.queryParams,"PNAME",e)},expression:"queryParams.PNAME"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"创建时间"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1)],1)],1)],1),t._v(" "),a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleQuery}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-refresh-left"},on:{click:t.handleReset}},[t._v("重置")])],1)],1),t._v(" "),a("div",{staticClass:"main-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.FinishedTaskList}},[a("el-table-column",{attrs:{label:"序号",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"流程主题","min-width":"230",prop:"PROC_INST_NAME","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"el-button--text",attrs:{href:"javascript:void(0)"},on:{click:function(a){return t.view(e.row,e)}}},[t._v(t._s(e.row.PROC_INST_NAME))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"流程名称",prop:"PNAME_","min-width":"150","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"申请人",prop:"INITATOR_NAME",width:"100","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"任务节点",prop:"NAME_","min-width":"150","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"开始时间",prop:"dateRange",width:"160","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.dateFormat(e.row.START_TIME_)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"办完时间",prop:"dateRange",width:"160","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.dateFormat(e.row.END_TIME_)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"用时",prop:"ZTIME","min-width":"130","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["activiti:finishedtask:view"],expression:"['activiti:finishedtask:view']"}],attrs:{size:"mini",type:"text"},on:{click:function(a){return t.view(e.row,e)}}},[t._v("查看")]),t._v(" "),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["activiti:finishedtask:trackprocess"],expression:"['activiti:finishedtask:trackprocess']"}],attrs:{size:"mini",type:"text"},on:{click:function(a){return t.trackProcess(e.row,e)}}},[t._v("流程追踪")])]}}])})],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],staticClass:"pagination-wrap",attrs:{total:t.total,page:t.queryParams.currentPage,limit:t.queryParams.showCount},on:{"update:page":function(e){return t.$set(t.queryParams,"currentPage",e)},"update:limit":function(e){return t.$set(t.queryParams,"showCount",e)},pagination:t.getList}})],1),t._v(" "),a("process-tracking",{ref:"field",attrs:{approvalProcessList:t.approvalProcessList,imgSrc:t.imgSrc}})],1)},n=[],o=(a("a481"),a("96cf"),a("3b8d")),s=a("b775"),i=a("365c");function l(t){return Object(s["a"])({url:"".concat(i["a"],"/hitask/list"),method:"get",params:t})}var c=a("745c"),u=a("e93d"),p={components:{processTracking:u["default"]},data:function(){return{loading:!0,total:0,FinishedTaskList:[],title:"",open:!1,dateRange:[],queryParams:{currentPage:1,showCount:10,PNAME:void 0,ASSIGNEE:void 0},form:{},approvalProcessList:[],imgSrc:""}},created:function(){this.getList()},methods:{getList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,l(this.addDateRange(this.queryParams,this.dateRange));case 4:e=t.sent,this.loading=!1,"success"===e.result&&(this.FinishedTaskList=e.varList,this.total=e.page.totalResult),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),this.loading=!1,this.$notify({title:"获取已办列表数据出错",message:t.t0.message,type:"error"});case 13:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={unfinishedTaskName:void 0,unfinishedTaskPerson:void 0,currentNode:void 0,currentTask:void 0},this.resetForm("form")},handleQuery:function(){this.queryParams.currentPage=1,this.getList()},handleReset:function(){this.queryParams.PNAME=void 0,this.queryParams.ASSIGNEE=void 0,this.dateRange=[]},getApplicationMatters:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,a,r){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(c["a"])(e,a,r);case 3:n=t.sent,"success"===n.result&&(this.approvalProcessList=n.hitaskList,this.imgSrc=n.imgSrc),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),this.$notify({title:"获取监控数据出错",message:t.t0.message,type:"error"});case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(e,a,r){return t.apply(this,arguments)}return e}(),getFlowParamObj:function(t){var e=t.BUSINESS_ID,a=t.BUSINESS_KEY,r=t.ID_,n=t.EXECUTION_ID_,o=t.PROC_INST_ID_,s=t.PROC_DEF_ID_,i=t.TASK_DEF_KEY_,l=t.FIRST_ACT_DEF_KEY,c=t.ALLOW_REVOKE,u=t.NAME_,p=t.PNAME_,d=t.DGRM_RESOURCE_NAME_;return{ihrHome:!0,taskType:"2",BUSINESS_ID:e,BUSINESS_KEY:a,ID_:r,EXECUTION_ID_:n,PROC_INST_ID_:o,PROC_DEF_ID_:s,TASK_DEF_KEY_:i,FIRST_ACT_DEF_KEY:l,ALLOW_REVOKE:c,NAME_:u,PNAME_:p,IMG:d}},view:function(t){if(t.BUSINESS_KEY&&t.FLOW_PATH){var e=this.getFlowParamObj(t),a=this.$router.resolve({path:t.FLOW_PATH,query:e}).resolved.fullPath,r="/cloud_pfmc/".replace(/\/$/,"");window.open("".concat(r).concat(a))}else this.$message({message:"数据错误",type:"warning"})},trackProcess:function(t){this.$refs.field.open=!0,this.getApplicationMatters(t.PROC_INST_ID_,t.ID_,t.DGRM_RESOURCE_NAME_)}}},d=p,_=a("2877"),v=Object(_["a"])(d,r,n,!1,null,null,null);e["default"]=v.exports}}]);