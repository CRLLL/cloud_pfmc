(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0debdff0","chunk-2d21062b","chunk-adef5ee6","chunk-6bf59962","chunk-6b472776","chunk-2d21062b","chunk-4b2bb356"],{"3e65":function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-dialog",{attrs:{title:e.title,visible:e.show,width:"800px","close-on-click-modal":!1},on:{"update:visible":function(t){e.show=t},open:e.open,close:e.cancel}},[i("field-detail",{ref:"dialogForm",attrs:{"is-edit":e.isEdit,"field-form":e.fieldForm},on:{"update:fieldForm":function(t){e.fieldForm=t},"update:field-form":function(t){e.fieldForm=t}}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{plan:"",icon:"el-icon-close"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-bank-card"},on:{click:e.submitForm}},[e._v("保存")])],1)],1)],1)},o=[],n=i("dbff"),s=i("6338"),d={name:"UpdateFieldDialog",components:{FieldDetail:n["default"]},props:{visible:{type:Boolean,default:!1},isEdit:{type:Boolean,default:!0},title:{type:String,default:""},fieldId:{type:String,default:"0"}},data:function(){return{show:!1,fieldForm:{pfmcField:{fieldId:"",fieldName:"",status:"1",isOpen:"1",fieldDesc:"",fieldType:"",fieldTypeDecimal:""},options:[]}}},computed:{},created:function(){},methods:{submitForm:function(){this.$refs.dialogForm.validateForm()&&("0"==this.fieldId?this.addFieldInfo():this.updateFieldInfo())},resetForm:function(){this.$refs.dialogForm.resetFormValidate(),this.distributionForm={distribution:{distritutionId:"0",distributionName:"",status:"1"},items:[{distributionItemId:"0",fieldId:"0",scale:"",orderNum:1,isDeleted:!1}]}},open:function(){"0"!=this.fieldId&&this.getFieldInfo()},cancel:function(){this.resetForm(),this.show=!1},getFieldInfo:function(){var e=this;Object(s["getField"])(this.fieldId).then((function(t){"0"===t.code?e.fieldForm=t.data:e.msgError(t.msg)})).catch((function(t){e.msgError(t)}))},addFieldInfo:function(){var e=this;Object(s["addField"])(this.fieldForm).then((function(t){"0"===t.code?(e.msgSuccess("新增区段字段成功"),e.show=!1):e.msgError(t.msg)})).catch((function(t){e.msgError(t)}))},updateFieldInfo:function(){var e=this;Object(s["updateFieldDetail"])(this.fieldForm).then((function(t){"0"===t.code?(e.msgSuccess("修改区段字段成功"),e.cancel()):e.msgError(t.msg)})).catch((function(t){e.msgError(t)}))}},watch:{show:function(){0==this.show&&this.$emit("update:visible",!1)},visible:function(){this.show=this.visible}}},a=d,r=i("2877"),c=Object(r["a"])(a,l,o,!1,null,null,null);t["default"]=c.exports},6338:function(e,t,i){"use strict";i.r(t),i.d(t,"listPfmcField",(function(){return n})),i.d(t,"updateField",(function(){return s})),i.d(t,"getField",(function(){return d})),i.d(t,"addField",(function(){return a})),i.d(t,"updateFieldDetail",(function(){return r}));var l=i("b775"),o=i("b854");function n(e){return Object(l["a"])({url:"".concat(o["pfmcSettings"],"/pfmcfield/list"),method:"get",params:e})}function s(e){return Object(l["a"])({url:"".concat(o["pfmcSettings"],"/pfmcfield/update"),method:"put",data:e})}function d(e){return Object(l["a"])({url:"".concat(o["pfmcSettings"],"/pfmcfield/").concat(e),method:"get"})}function a(e){return Object(l["a"])({url:"".concat(o["pfmcSettings"],"/pfmcfield/add"),method:"post",data:e})}function r(e){return Object(l["a"])({url:"".concat(o["pfmcSettings"],"/pfmcfield/updatedetail"),method:"put",data:e})}},"760b":function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-dialog",{attrs:{visible:e.show,"close-on-click-modal":!1,"append-to-body":"",width:"500px"},on:{"update:visible":function(t){e.show=t}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],staticClass:"pfmc-btn-bar"},[i("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAddRow}},[e._v("增加")]),e._v(" "),i("el-button",{attrs:{type:"danger",icon:"el-icon-remove",plain:"",size:"mini",disabled:0==this.selectedRows.length},on:{click:function(t){return e.handleDelRow(e.selectedRows)}}},[e._v("删除")])],1),e._v(" "),i("el-form",{ref:"fieldTypeOptionForm",attrs:{model:e.fieldTypeOptionForm,disabled:!e.isEdit}},[i("el-table",{ref:"optionTable",attrs:{data:e.fieldTypeOptionForm.optionArray,"empty-text":" ",height:"300px"},on:{"selection-change":e.selsChange}},[i("el-table-column",{attrs:{type:"selection",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"值名称",prop:"optionValue",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-form-item",{staticClass:"form-item-margin",attrs:{prop:"optionArray."+t.$index+".optionValue",rules:[{required:!0,message:"值名称不能为空",trigger:"change"}]}},[i("el-input",{attrs:{maxlength:"10"},model:{value:t.row.optionValue,callback:function(i){e.$set(t.row,"optionValue",i)},expression:"scope.row.optionValue"}})],1)]}}])})],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")]),e._v(" "),i("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},o=[],n=(i("5df3"),i("4f7f"),i("ac6a"),{name:"FieldTypeSelectDetail",components:{},props:{visible:{type:Boolean,default:!1},optionList:{type:Array,default:function(){return[]}},fieldId:{type:String,default:"0"},isEdit:{type:Boolean,default:!0}},data:function(){return{show:!1,selectedRows:[],fieldTypeOptionForm:{optionArray:[]}}},created:function(){},mounted:function(){},computed:{},methods:{selsChange:function(e){this.selectedRows=e},handleAddRow:function(){var e=this.fieldTypeOptionForm.optionArray,t=0==e.length?1:parseInt(e[e.length-1].orderNum)+1;e.push({optionId:"0",fieldId:this.fieldId,optionValue:"",orderNum:t,isDeleted:!1})},handleDelRow:function(e){var t=this,i=e;i&&i.forEach((function(e,i){t.fieldTypeOptionForm.optionArray.forEach((function(i,l){e.orderNum===i.orderNum&&t.fieldTypeOptionForm.optionArray.splice(l,1)}))})),this.$refs.optionTable.clearSelection(),this.selectedRows=[]},submit:function(){this.validateForm()&&(this.$emit("update:optionList",this.fieldTypeOptionForm.optionArray),this.show=!1)},cancel:function(){this.reset(),this.show=!1},validateForm:function(){var e=this,t=!0;return this.$refs.fieldTypeOptionForm.validate((function(i){if(t=i,i){var l=new Set;e.fieldTypeOptionForm.optionArray.forEach((function(e){l.add(e.optionValue)})),l.size!=e.fieldTypeOptionForm.optionArray.length&&(e.msgInfo("值名称不能重复"),t=!1)}})),t},reset:function(){this.selectedRows=[],this.fieldTypeOptionForm={optionArray:[]}}},watch:{show:function(){0==this.show&&this.$emit("update:visible",!1)},visible:function(){this.visible&&(this.fieldTypeOptionForm.optionArray=JSON.parse(JSON.stringify(this.optionList))),this.show=this.visible}}}),s=n,d=(i("fd68"),i("2877")),a=Object(d["a"])(s,l,o,!1,null,"14caa0f9",null);t["default"]=a.exports},b854:function(e,t,i){"use strict";i.r(t),i.d(t,"pfmcSettings",(function(){return l})),i.d(t,"pfmcAsist",(function(){return o})),i.d(t,"pfmcExecution",(function(){return n})),i.d(t,"pfmcEval",(function(){return s}));var l="pfmc-settings",o="pfmc-asist",n="pfmc-execution",s="pfmc-eval"},dbff:function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-form",{ref:"fieldForm",attrs:{model:e.fieldForm,rules:e.rules,"label-width":"130px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"区段字段名称 :",prop:"pfmcField.fieldName"}},[i("el-input",{attrs:{disabled:!e.isEdit,maxlength:"20"},model:{value:e.fieldForm.pfmcField.fieldName,callback:function(t){e.$set(e.fieldForm.pfmcField,"fieldName",t)},expression:"fieldForm.pfmcField.fieldName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"状态 :",prop:"pfmcField.status"}},[i("el-select",{attrs:{placeholder:"状态",clearable:"",size:"small",disabled:!e.isEdit},model:{value:e.fieldForm.pfmcField.status,callback:function(t){e.$set(e.fieldForm.pfmcField,"status",t)},expression:"fieldForm.pfmcField.status"}},e._l(e.statusOptions,(function(e){return i("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"公开 :",prop:"pfmcField.isOpen"}},[i("el-radio",{attrs:{disabled:!e.isEdit,label:"1"},model:{value:e.fieldForm.pfmcField.isOpen,callback:function(t){e.$set(e.fieldForm.pfmcField,"isOpen",t)},expression:"fieldForm.pfmcField.isOpen"}},[e._v("是")]),e._v(" "),i("el-radio",{attrs:{disabled:!e.isEdit,label:"0"},model:{value:e.fieldForm.pfmcField.isOpen,callback:function(t){e.$set(e.fieldForm.pfmcField,"isOpen",t)},expression:"fieldForm.pfmcField.isOpen"}},[e._v("否")])],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"字段说明 :",prop:"pfmcField.fieldDesc"}},[i("el-input",{attrs:{type:"textarea",rows:"2",disabled:!e.isEdit,maxlength:"50"},model:{value:e.fieldForm.pfmcField.fieldDesc,callback:function(t){e.$set(e.fieldForm.pfmcField,"fieldDesc",t)},expression:"fieldForm.pfmcField.fieldDesc"}})],1)],1),e._v(" "),i("el-row",{attrs:{gutter:5}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"字段类型 :",prop:"pfmcField.fieldType"}},[i("el-select",{attrs:{placeholder:"字段类型",size:"small",disabled:!e.isEdit},model:{value:e.fieldForm.pfmcField.fieldType,callback:function(t){e.$set(e.fieldForm.pfmcField,"fieldType",t)},expression:"fieldForm.pfmcField.fieldType"}},e._l(e.fieldTypeOptions,(function(e){return i("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:"select"==e.fieldForm.pfmcField.fieldType,expression:"fieldForm.pfmcField.fieldType=='select'"}],attrs:{size:"small"},on:{click:e.handlerFieldTypeSelectEdit}},[e._v(e._s(e.isEdit?"定义列表值":"查看列表值"))]),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"number"==e.fieldForm.pfmcField.fieldType,expression:"fieldForm.pfmcField.fieldType=='number'"}],attrs:{label:"小数位数：",prop:"pfmcField.decimalPlace"}},[i("el-select",{attrs:{placeholder:"",clearable:"",size:"small",disabled:!e.isEdit},model:{value:e.fieldForm.pfmcField.decimalPlace,callback:function(t){e.$set(e.fieldForm.pfmcField,"decimalPlace",t)},expression:"fieldForm.pfmcField.decimalPlace"}},e._l(e.fieldTypeDecimalOptions,(function(e){return i("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1)],1)],1),e._v(" "),i("field-type-select-detail",{attrs:{visible:e.fieldTypeSelectDialogVisible,"option-list":e.fieldForm.options,"field-id":e.fieldForm.pfmcField.fieldId,"is-edit":e.isEdit},on:{"update:visible":function(t){e.fieldTypeSelectDialogVisible=t},"update:optionList":function(t){return e.$set(e.fieldForm,"options",t)},"update:option-list":function(t){return e.$set(e.fieldForm,"options",t)}}})],1)},o=[],n=i("760b"),s={name:"FieldDetail",components:{FieldTypeSelectDetail:n["default"]},props:{isEdit:{type:Boolean,default:!0},fieldForm:{type:Object,default:function(){return{pfmcField:{fieldId:"",fieldName:"",status:"1",isOpen:"1",fieldDesc:"",fieldType:"",decimalPlace:""},options:[]}}}},data:function(){return{title:"",statusOptions:[],fieldTypeOptions:[],fieldTypeDecimalOptions:[],fieldTypeSelectDialogVisible:!1,rules:{"pfmcField.fieldName":[{required:!0,message:"区段字段名称不能为空",trigger:"change"}],"pfmcField.fieldDesc":[{required:!0,message:"状态不能为空",trigger:"change"}],"pfmcField.status":[{required:!0,message:"状态不能为空",trigger:"change"}],"pfmcField.fieldType":[{required:!0,message:"区段字段类型不能为空",trigger:"change"}]}}},computed:{},created:function(){var e=this;this.getDicts("sys_normal_status").then((function(t){e.statusOptions=t.data})),this.getDicts("pfmc_presettings_field_type").then((function(t){e.fieldTypeOptions=t.data})),this.getDicts("pfmc_presettings_field_type_decimal").then((function(t){e.fieldTypeDecimalOptions=t.data}))},methods:{validateForm:function(){var e=!0;return this.$refs.fieldForm.validate((function(t){e=t})),!!e&&("number"!=this.fieldForm.pfmcField.fieldType||this.fieldForm.pfmcField.decimalPlace?"select"!=this.fieldForm.pfmcField.fieldType||0!=this.fieldForm.options.length||(this.msgInfo("请定义列表值"),!1):(this.msgInfo("请选择小数位数"),!1))},resetFormValidate:function(e){this.$refs["fieldForm"].resetFields()},handlerFieldTypeSelectEdit:function(){this.fieldTypeSelectDialogVisible=!0}},mounted:function(){},watch:{}},d=s,a=i("2877"),r=Object(a["a"])(d,l,o,!1,null,"3744b176",null);t["default"]=r.exports},f286:function(e,t,i){},fd68:function(e,t,i){"use strict";var l=i("f286"),o=i.n(l);o.a}}]);