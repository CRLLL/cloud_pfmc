(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e508494","chunk-2d21062b","chunk-3a57c6ee","chunk-10db1c36","chunk-2d21062b"],{"246c":function(t,e,r){"use strict";var o=r("dd76"),n=r.n(o);n.a},2879:function(t,e,r){"use strict";r.r(e),r.d(e,"treeselect",(function(){return a})),r.d(e,"selectPfmcEmpList",(function(){return i})),r.d(e,"addPfmcOrg",(function(){return s})),r.d(e,"updatePfmcOrg",(function(){return c})),r.d(e,"delPfmcOrg",(function(){return u})),r.d(e,"searchEmp",(function(){return l})),r.d(e,"addEmpToOrg",(function(){return p})),r.d(e,"updatePfmcEmp",(function(){return d})),r.d(e,"delPfmcEmp",(function(){return f})),r.d(e,"batchTransferEmp",(function(){return m})),r.d(e,"listEmpNameOrNumber",(function(){return g})),r.d(e,"batchUpdateEmpStatus",(function(){return h})),r.d(e,"listEmp",(function(){return b})),r.d(e,"delOrgCheck",(function(){return v}));var o=r("b775"),n=r("b854");function a(){return Object(o["a"])({url:"".concat(n["pfmcAsist"],"/pfmcOrgEmp/treeselect"),method:"get"})}function i(t){return Object(o["a"])({url:"".concat(n["pfmcAsist"],"/pfmcOrgEmp/listEmpByOrgId"),method:"get",params:t})}function s(t){return Object(o["a"])({url:"".concat(n["pfmcAsist"],"/pfmcOrgEmp"),method:"post",data:t})}function c(t){return Object(o["a"])({url:"".concat(n["pfmcAsist"],"/pfmcOrgEmp"),method:"put",data:t})}function u(t){return Object(o["a"])({url:"".concat(n["pfmcAsist"],"/pfmcOrgEmp/deleteOrg/").concat(t),method:"delete"})}function l(t){return Object(o["a"])({url:"".concat(n["pfmcAsist"],"/pfmcOrgEmp/searchEmp"),method:"get",params:t})}function p(t){return Object(o["a"])({url:"".concat(n["pfmcAsist"],"/pfmcOrgEmp/updateEmpOfOrg"),method:"get",params:t})}function d(t){return Object(o["a"])({url:"".concat(n["pfmcAsist"],"/pfmcOrgEmp/updateEmp"),method:"post",data:t})}function f(t){return Object(o["a"])({url:"".concat(n["pfmcAsist"],"/pfmcOrgEmp/deleteEmp/").concat(t),method:"delete"})}function m(t){return Object(o["a"])({url:"".concat(n["pfmcAsist"],"/pfmcOrgEmp/batchTransferEmp"),method:"post",data:t})}function g(t){return Object(o["a"])({url:"".concat(n["pfmcAsist"],"/pfmcOrgEmp/listEmpNameOrNumber"),method:"get",params:t})}function h(t){return Object(o["a"])({url:"".concat(n["pfmcAsist"],"/pfmcOrgEmp/batchUpdateEmpStatus"),method:"post",data:t})}function b(t){return Object(o["a"])({url:"".concat(n["pfmcAsist"],"/pfmcOrgEmp/listEmp"),method:"post",data:t})}function v(t){return Object(o["a"])({url:"".concat(n["pfmcAsist"],"/pfmcOrgEmp/delOrgCheck/").concat(t),method:"delete"})}},"4a47":function(t,e,r){"use strict";r.r(e),r.d(e,"listPfmcGroup",(function(){return a})),r.d(e,"addPfmcGroup",(function(){return i})),r.d(e,"getPfmcGroup",(function(){return s})),r.d(e,"updatePfmcGroup",(function(){return c})),r.d(e,"delPfmcGroup",(function(){return u})),r.d(e,"disablePfmcGroup",(function(){return l})),r.d(e,"changeGroupState",(function(){return p})),r.d(e,"listGroupUsers",(function(){return d}));var o=r("b775"),n=r("b854");function a(t){return Object(o["a"])({url:"".concat(n["pfmcSettings"],"/pfmcBaseGroup/list"),method:"get",params:t})}function i(t){return Object(o["a"])({url:"".concat(n["pfmcSettings"],"/pfmcBaseGroup"),method:"post",data:t})}function s(t){return Object(o["a"])({url:"".concat(n["pfmcSettings"],"/pfmcBaseGroup/").concat(t),method:"get"})}function c(t){return Object(o["a"])({url:"".concat(n["pfmcSettings"],"/pfmcBaseGroup/update"),method:"put",data:t})}function u(t){return Object(o["a"])({url:"".concat(n["pfmcSettings"],"/pfmcBaseGroup/").concat(t),method:"delete"})}function l(t){return Object(o["a"])({url:"".concat(n["pfmcSettings"],"/pfmcBaseGroup/disablePfmcBaseGroup/").concat(t),method:"get"})}function p(t){return Object(o["a"])({url:"".concat(n["pfmcSettings"],"/pfmcBaseGroup/changeGroupState"),method:"put",data:t})}function d(t){return Object(o["a"])({url:"".concat(n["pfmcSettings"],"/pfmcBaseGroup/groupUsers"),method:"get",params:t})}},"542c":function(t,e,r){},7514:function(t,e,r){"use strict";var o=r("5ca1"),n=r("0a49")(5),a="find",i=!0;a in[]&&Array(1)[a]((function(){i=!1})),o(o.P+o.F*i,"Array",{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")(a)},"8dad":function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"ihr-wrapper"},[r("div",{staticClass:"top-query"},[r("el-form",{ref:"queryForm",attrs:{model:t.queryParams,"label-width":"100px"}},[r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"考核组名称"}},[r("el-input",{attrs:{clearable:"",placeholder:"请输入..."},model:{value:t.queryParams.groupName,callback:function(e){t.$set(t.queryParams,"groupName",e)},expression:"queryParams.groupName"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"考核周期类型"}},[r("el-select",{attrs:{clearable:"",placeholder:"全部"},model:{value:t.queryParams.groupPeriodType,callback:function(e){t.$set(t.queryParams,"groupPeriodType",e)},expression:"queryParams.groupPeriodType"}},t._l(t.groupPeriodTypeOptions,(function(t){return r("el-option",{key:t.dictValue,attrs:{label:t.dictLabel,value:t.dictValue}})})),1)],1)],1),t._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"状态"}},[r("el-select",{attrs:{clearable:"",placeholder:"全部"},model:{value:t.queryParams.groupState,callback:function(e){t.$set(t.queryParams,"groupState",e)},expression:"queryParams.groupState"}},t._l(t.stateOptions,(function(t){return r("el-option",{key:t.dictValue,attrs:{label:t.dictLabel,value:t.dictValue}})})),1)],1)],1)],1)],1),t._v(" "),r("div",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleQuery}},[t._v("查询")]),t._v(" "),r("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-refresh-left"},on:{click:t.handleReset}},[t._v("重置")])],1)],1),t._v(" "),r("div",{staticClass:"main-table"},[r("div",{staticClass:"button-flex"},[r("edit-group-detail",{attrs:{type:"primary",mode:"add",icon:"el-icon-plus",title:"新增考核组",btnText:"新增"},on:{"update-finished":t.updateFinished}}),t._v(" "),r("edit-group-detail",{attrs:{type:"primary",plain:"",mode:"copy",groupId:t.copyGroupId,beforeCopy:t.beforeCopy,icon:"el-icon-plus",title:"复制考核组",btnText:"复制"},on:{"update-finished":t.updateFinished}}),t._v(" "),r("import-data",{attrs:{"task-id":"pfmc_basicsettings_group"},on:{"import-finished":function(e){e&&t.handleQuery()}}}),t._v(" "),r("export-data",{attrs:{"task-id":"pfmc_basicsettings_group","before-download":function(){return!(t.total<=0)||(t.$message({type:"info",message:"没有结果，无需导出"}),!1)}}})],1),t._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"groupTable",attrs:{data:t.pfmcGroupList,"row-key":"groupId","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":t.getSelectedGroup}},[r("el-table-column",{attrs:{type:"selection"}}),t._v(" "),r("el-table-column",{attrs:{label:"序号",type:"index"}}),t._v(" "),r("el-table-column",{attrs:{label:"考核组名称",prop:"groupName"}}),t._v(" "),r("el-table-column",{attrs:{label:"考核周期类型",prop:"groupPeriodType",formatter:t.groupPeriodTypeFormat}}),t._v(" "),r("el-table-column",{attrs:{label:"考核组人数",prop:"userNum"}}),t._v(" "),r("el-table-column",{attrs:{label:"状态",prop:"groupState"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},on:{change:function(r){return t.handleUpdateState(e.row)}},model:{value:e.row.groupState,callback:function(r){t.$set(e.row,"groupState",r)},expression:"scope.row.groupState"}})]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("view-group-detail",{attrs:{groupId:e.row.groupId}}),t._v(" "),r("edit-group-detail",{attrs:{mode:"edit",groupId:e.row.groupId},on:{"update-finished":t.updateFinished}}),t._v(" "),r("el-popconfirm",{staticClass:"el-button-confirm",attrs:{title:"您确定要删除吗？"},on:{onConfirm:function(r){return t.handleDelete(e.row)}}},[r("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("删除")])],1)]}}])})],1),t._v(" "),r("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],staticClass:"pagination-wrap",attrs:{total:t.total,page:t.queryParams.pageNum,limit:t.queryParams.pageSize},on:{"update:page":function(e){return t.$set(t.queryParams,"pageNum",e)},"update:limit":function(e){return t.$set(t.queryParams,"pageSize",e)},pagination:t.getList}})],1),t._v(" "),r("el-dialog",{attrs:{title:t.title,visible:t.open,width:"650px"},on:{"update:visible":function(e){t.open=e}}},[r("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[r("el-row",[r("el-col",{attrs:{span:24}},[r("div",{staticStyle:{"background-color":"rgb(220, 223, 230)",width:"100%","line-height":"30px",color:"rgb(96, 98, 102)","padding-left":"10px"}},[t._v("考核组名称")])]),t._v(" "),r("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:12}},[r("el-form-item",{attrs:{label:"考核组名称",prop:"groupName"}},[r("el-input",{attrs:{disabled:!t.isEdit,placeholder:"请输入考核组名称"},model:{value:t.form.groupName,callback:function(e){t.$set(t.form,"groupName",e)},expression:"form.groupName"}})],1)],1),t._v(" "),r("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:12}},[r("el-form-item",{attrs:{label:"考核周期类型",prop:"groupPeriodType"}},[r("el-select",{attrs:{disabled:!t.isEdit,placeholder:"请选择"},model:{value:t.form.groupPeriodType,callback:function(e){t.$set(t.form,"groupPeriodType",e)},expression:"form.groupPeriodType"}},t._l(t.groupPeriodTypeOptions,(function(t){return r("el-option",{key:t.dictValue,attrs:{label:t.dictLabel,value:t.dictValue}})})),1)],1)],1)],1),t._v(" "),r("el-row",[r("el-col",{attrs:{span:24}},[r("div",{staticStyle:{"background-color":"rgb(220, 223, 230)",width:"100%","line-height":"30px",color:"rgb(96, 98, 102)","padding-left":"10px"}},[t._v("考核组成员选择")])]),t._v(" "),r("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:12}},[r("el-form-item",{attrs:{label:"部门",prop:"deptIds"}},[r("tree-select",{attrs:{options:t.deptOptions,multiple:"",placeholder:"请选择",disabled:!t.isEdit,"default-expand-level":1},model:{value:t.form.deptIds,callback:function(e){t.$set(t.form,"deptIds",e)},expression:"form.deptIds"}})],1)],1),t._v(" "),r("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:12}},[r("el-form-item",{attrs:{label:"职务"}},[r("el-input",{attrs:{clearable:"",size:"small",placeholder:"职务",disabled:!t.isEdit},model:{value:t.form.posId,callback:function(e){t.$set(t.form,"posId",e)},expression:"form.posId"}})],1)],1)],1),t._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"职位"}},[r("el-input",{attrs:{clearable:"",size:"small",placeholder:"职位",disabled:!t.isEdit},model:{value:t.form.jobId,callback:function(e){t.$set(t.form,"jobId",e)},expression:"form.jobId"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"职等"}},[r("el-input",{attrs:{clearable:"",size:"small",placeholder:"职等",disabled:!t.isEdit},model:{value:t.form.posLevel,callback:function(e){t.$set(t.form,"posLevel",e)},expression:"form.posLevel"}})],1)],1)],1),t._v(" "),r("el-row",[t.isEdit?r("el-col",{attrs:{span:24}},[r("div",{staticClass:"text-center"},[r("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleQueryUser}},[t._v("查询")]),t._v(" "),r("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-refresh-left"},on:{click:t.handleResetUser}},[t._v("重置")])],1)]):t._e()],1),t._v(" "),r("el-row",{staticStyle:{"margin-top":"10px"}},[r("el-col",{attrs:{span:24}},[r("el-transfer",{attrs:{titles:t.titles,filterable:"","filter-method":t.filterMethod,props:{key:"empId",label:"empName"},data:t.userList,disabled:!t.isEdit},model:{value:t.toAddUserList,callback:function(e){t.toAddUserList=e},expression:"toAddUserList"}})],1)],1)],1),t._v(" "),t.isEdit?r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{plain:"",icon:"el-icon-close"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),r("el-button",{attrs:{type:"primary",icon:"el-icon-bank-card"},on:{click:t.submitForm}},[t._v("保存")])],1):t._e()],1)],1)},n=[],a=(r("7514"),r("ac6a"),r("4a47")),i=r("2879"),s=r("7026"),c=r.n(s),u=(r("542c"),{components:{TreeSelect:c.a,ImportData:function(){return r.e("chunk-a7c7fc38").then(r.bind(null,"77dc"))},ExportData:function(){return r.e("chunk-336f6cc4").then(r.bind(null,"2ee5"))},ViewGroupDetail:function(){return r.e("chunk-2d0d7617").then(r.bind(null,"7723"))},EditGroupDetail:function(){return r.e("chunk-1c5d5ad3").then(r.bind(null,"a7a5"))}},data:function(){return{loading:!0,total:0,pfmcGroupList:[],deptOptions:void 0,title:"",open:!1,isEdit:!0,groupPeriodTypeOptions:[],isOpenOptions:[],stateOptions:[],userList:[],toAddUserList:[],titles:[],filterMethod:function(t,e){return e.empName.indexOf(t)>-1},groupId:void 0,queryParams:{pageNum:1,pageSize:10,groupName:void 0,groupPeriodType:void 0,groupState:void 0},form:{},rules:{},copyGroupId:void 0}},created:function(){var t=this;this.getList(),this.getTreeselect(),this.getDicts("pfmc_basicsettings_cycle_type").then((function(e){t.groupPeriodTypeOptions=e.data})),this.getDicts("sys_normal_status").then((function(e){t.stateOptions=e.data}))},methods:{beforeCopy:function(){var t=this.$refs.groupTable.selection;return t&&0!==t.length?t.length>1?(this.msgError("请勿多选考核组！"),!1):(this.copyGroupId=t[0].groupId,!0):(this.msgError("请选择考核组！"),!1)},handleReset:function(){this.queryParams={pageNum:1,pageSize:10,groupName:void 0,groupPeriodType:void 0,groupState:void 0}},updateFinished:function(){this.getList()},handleResetUser:function(){},handleDownLoad:function(){},handleImport:function(){},handleExport:function(){},getSelectedGroup:function(t){},getList:function(){var t=this;this.loading=!0,Object(a["listPfmcGroup"])(this.queryParams).then((function(e){t.pfmcGroupList=e.data.list,t.total=e.data.total,t.loading=!1}))},getTreeselect:function(){var t=this;Object(i["treeselect"])().then((function(e){t.deptOptions=e.data}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={groupName:void 0,groupPeriodType:void 0,deptIds:[],posId:"",jobId:"",posLevel:"",groupUsers:[]},this.userList=[],this.toAddUserList=[],this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},handleQueryUser:function(){var t=this,e={deptIds:this.form.deptIds||[],posId:this.form.posId||"",jobId:this.form.jobId||"",posLevel:this.form.posLevel||""};Object(a["listEmp"])(e).then((function(e){var r=t.userList;t.userList=e.data;for(var o=0;o<t.toAddUserList.length;o++){var n=t.toAddUserList[o],a=t.arrIndexOf(n,r),i=t.arrIndexOf(n,t.userList);i<0&&t.userList.push(r[a])}t.open=!0,t.title="查看考核组"}))},arrIndexOf:function(t,e){for(var r=0;r<e.length;r++){var o=e[r];if(o.empId===t)return r}return-1},loadTransfer:function(t){var e=this;this.userList=t,t.forEach((function(t,r){e.toAddUserList.push(t.empId)})),this.titles=["待选","已选"]},handleView:function(t){var e=this;this.reset(),Object(a["getPfmcGroup"])(t.groupId).then((function(t){e.form=t.data,e.loadTransfer(t.data.groupUsers),e.userList.forEach((function(t,e){t.disabled=!0})),e.open=!0,e.isEdit=!1,e.title="查看考核组"}))},handleCopy:function(){var t=this;this.reset();var e=this.$refs.groupTable.selection;if(e&&0!==e.length)if(e.length>1)this.msgError("请勿多选考核组！");else{var r=e[0].groupId;Object(a["getPfmcGroup"])(r).then((function(e){t.form=e.data,t.loadTransfer(e.data.groupUsers),t.open=!0,t.isEdit=!0,t.title="复制考核组",t.form.groupId=void 0;for(var r=0;r<t.userList.length;r++){var o=t.userList[r];o.groupUserId=void 0,o.groupId=void 0}}))}else this.msgError("请选择考核组！")},handleAdd:function(){this.reset(),this.form.deptId=void 0,this.open=!0,this.isEdit=!0,this.title="添加考核组"},handleUpdate:function(t){var e=this;this.reset(),Object(a["getPfmcGroup"])(t.groupId).then((function(t){e.form=t.data,e.loadTransfer(t.data.groupUsers),e.open=!0,e.isEdit=!0,e.title="修改考核组"}))},submitForm:function(){var t=this;this.$refs["form"].validate((function(e){e&&(t.form.groupUsers=[],t.toAddUserList.forEach((function(e,r){t.userList.forEach((function(r,o){e===r.empId&&t.form.groupUsers.push(r)}))})),void 0!==t.form.groupId?Object(a["updatePfmcGroup"])(t.form).then((function(e){"0"===e.code?(t.msgSuccess("修改成功"),t.open=!1,t.getList()):t.msgError(e.msg)})):Object(a["addPfmcGroup"])(t.form).then((function(e){"0"===e.code?(t.msgSuccess("新增成功"),t.open=!1,t.getList()):t.msgError(e.msg)})))}))},handleDelete:function(t){var e=this;this.loading=!0,Object(a["delPfmcGroup"])(t.groupId).then((function(t){e.loading=!1,console.log("delPfmcGroup",t),"0"===t.code?(e.getList(),e.msgSuccess("删除成功")):e.msgError(t.msg)})).catch((function(t){e.loading=!1,e.msgError(t)}))},handleInvalid:function(t){var e=this;this.$confirm('是否设置名称为"'+t.groupName+'"的数据项为失效?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(a["disablePfmcGroup"])(t.groupId)})).then((function(t){console.log("disablePfmcGroup",t),"0"===t.code?(e.getList(),e.msgSuccess("设置成功")):e.msgError(t.msg)})).catch((function(){}))},groupPeriodTypeFormat:function(t,e,r,o){var n=this.groupPeriodTypeOptions.find((function(t){return t.dictValue==r}));return n?n.dictLabel:""},handleUpdateState:function(t){var e=this;this.$confirm('您确定要将名称为"'+t.groupName+'"的考核组设置为'+("1"===t.groupState?"有效":"失效")+"?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.loading=!0;var r=t.groupId,o=t.groupState,n={groupId:r,groupState:o};Object(a["changeGroupState"])(n).then((function(t){e.loading=!1,"0"===t.code?(e.msgSuccess("修改成功"),e.getList()):e.msgError(t.msg)})).catch((function(t){e.loading=!1,e.msgError(t)}))})).catch((function(){t.groupState="1"===t.groupState?"0":"1"}))}},watch:{updateDialogShow:function(){0==this.updateDialogShow&&this.getList()}}}),l=u,p=(r("246c"),r("2877")),d=Object(p["a"])(l,o,n,!1,null,"c6f220ac",null);e["default"]=d.exports},b854:function(t,e,r){"use strict";r.r(e),r.d(e,"pfmcSettings",(function(){return o})),r.d(e,"pfmcAsist",(function(){return n})),r.d(e,"pfmcExecution",(function(){return a})),r.d(e,"pfmcEval",(function(){return i}));var o="pfmc-settings",n="pfmc-asist",a="pfmc-execution",i="pfmc-eval"},dd76:function(t,e,r){}}]);