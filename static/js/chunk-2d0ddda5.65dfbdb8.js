(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ddda5"],{"82c8":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-form",{ref:"dbQuery",attrs:{"label-width":"80px",model:e.dbQueryParams,rules:e.rules}},[r("el-row",{attrs:{type:"flex",align:"middle"}},[r("el-col",{attrs:{span:22}},[r("h3",[e._v("查询数据库")])])],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"数据库：",prop:"dbType"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.dbQueryParams.dbType,callback:function(t){e.$set(e.dbQueryParams,"dbType",t)},expression:"dbQueryParams.dbType"}},[r("el-option",{attrs:{label:"mysql",value:"mysql"}},[e._v("mysql")])],1)],1)],1),e._v(" "),r("el-col",{attrs:{span:7,offset:1}},[r("el-form-item",{attrs:{label:"地 址：",prop:"host"}},[r("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.dbQueryParams.host,callback:function(t){e.$set(e.dbQueryParams,"host",t)},expression:"dbQueryParams.host"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:7,offset:1}},[r("el-form-item",{attrs:{label:"端 口：",prop:"port"}},[r("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.dbQueryParams.port,callback:function(t){e.$set(e.dbQueryParams,"port",t)},expression:"dbQueryParams.port"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"用户名：",prop:"userName"}},[r("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.dbQueryParams.userName,callback:function(t){e.$set(e.dbQueryParams,"userName",t)},expression:"dbQueryParams.userName"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:7,offset:1}},[r("el-form-item",{attrs:{label:"密 码：",prop:"passWord"}},[r("el-input",{attrs:{placeholder:"请输入角色名称","show-password":""},model:{value:e.dbQueryParams.passWord,callback:function(t){e.$set(e.dbQueryParams,"passWord",t)},expression:"dbQueryParams.passWord"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:7,offset:1}},[r("el-form-item",{attrs:{label:"库 名：",prop:"dbName"}},[r("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.dbQueryParams.dbName,callback:function(t){e.$set(e.dbQueryParams,"dbName",t)},expression:"dbQueryParams.dbName"}})],1)],1)],1),e._v(" "),r("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"flex",justify:"end"}},[r("el-col",{attrs:{span:2}},[r("el-button",{attrs:{type:"primary",align:"center"},on:{click:e.connection}},[e._v("查 询")])],1)],1)],1),e._v(" "),r("el-table",{attrs:{data:e.dbAllTableList}},[r("el-table-column",{attrs:{type:"index",label:"序号",width:"100",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"表名",align:"center",prop:"tableName"}}),e._v(" "),r("el-table-column",{attrs:{label:"表说明",align:"center",prop:"tableNotes"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleUpdate(t.row)}}})]}}])})],1),e._v(" "),r("gen-edit",{ref:"field",attrs:{"var-list":e.varList,form:e.form,"code-type":e.codeType}})],1)},s=[],l=(r("96cf"),r("3b8d")),o=r("b775"),n=r("365c");function i(e){var t=e.dbType,r=e.host,a=e.port,s=e.userName,l=e.passWord,i=e.dbName;return Object(o["a"])({url:"/".concat(n["c"],"/code/rerverse/queryDbAllTable?pageNum=").concat(e.pageNum,"&pageSize=").concat(e.pageSize),method:"post",data:{dbType:t,host:r,port:a,userName:s,passWord:l,dbName:i}})}function d(e){e.dbType,e.host,e.port,e.userName,e.passWord,e.dbName;return Object(o["a"])({url:"/".concat(n["c"],"/code/rerverse/queryDbTableDetail"),method:"post",data:e})}var u=r("f0f3"),c={data:function(){return{issueFile:[],codeType:"",dbAllTableList:[],dbQueryParams:{pageNum:1,pageSize:0,dbType:"mysql",host:"172.25.154.165",port:"3306",userName:"wai",passWord:"wai",dbName:"zero"},form:{},varList:[],rules:{dbType:[{required:!0,message:"请输入数据库",trigger:"blur"}],host:[{required:!0,message:"请输入地址",trigger:"blur"}],port:[{required:!0,message:"请输入端口",trigger:"blur"}],userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],passWord:[{required:!0,message:"请输入密码",trigger:"blur"}],dbName:[{required:!0,message:"请输入库名",trigger:"blur"}]}}},methods:{connection:function(){var e=this;this.$refs["dbQuery"].validate((function(t){if(!t)return!1;e.getDbAllTable()}))},getDbAllTable:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,i(this.dbQueryParams);case 4:t=e.sent,t?"0"===t.code?(this.dbAllTableList=t.data.list,this.msgSuccess("数据库查询成功")):this.msgError(t.msg):this.msgError("数据库连接参数错误"),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),this.loading=!1,this.msgError(e.t0.message);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}(),handleUpdate:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var r,a,s,l,o,n,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,console.log(t),r=this.dbQueryParams,a=r.dbType,s=r.host,l=r.port,o=r.userName,n=r.passWord,i=r.dbName,e.next=5,d({tableName:t.tableName,db:{dbName:i,dbType:a,host:s,passWord:n,port:l,userName:o}});case 5:u=e.sent,u&&("0"===u.code?(this.codeType="edit",this.form=u.data,this.varList=u.data.fields,this.$refs.field.open=!0,this.$refs.field.clearValidate("form")):this.msgSuccess(u.msg)),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),this.msgError(e.t0.message);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(t){return e.apply(this,arguments)}return t}()},components:{genEdit:u["default"]}},p=c,m=r("2877"),b=Object(m["a"])(p,a,s,!1,null,null,null);t["default"]=b.exports}}]);